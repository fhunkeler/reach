/*!
 * The MIT License (MIT)
 * 
 * Copyright (c) 2015 Webcom
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["Reach"] = factory();
	else
		root["Reach"] = factory();
})(this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.Reach=undefined;var _classCallCheck2=__webpack_require__(1),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(2),_createClass3=_interopRequireDefault(_createClass2),_adapter=__webpack_require__(6),_adapter2=_interopRequireDefault(_adapter),_actions=__webpack_require__(7),_actions2=_interopRequireDefault(_actions),_datarefs=__webpack_require__(8),_datarefs2=_interopRequireDefault(_datarefs),_reach=__webpack_require__(9),_reach2=_interopRequireDefault(_reach),_room=__webpack_require__(25),_room2=_interopRequireDefault(_room),_webrtcmngr=__webpack_require__(27),_webrtcmngr2=_interopRequireDefault(_webrtcmngr);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SDK_VERSION='0.0.1';var Reach=exports.Reach=(function(){function Reach(){var url=arguments.length<=0||arguments[0]===undefined?'http://webcom.orange.com/base/webrtc':arguments[0];(0,_classCallCheck3.default)(this,Reach);this.datarefs=(0,_datarefs2.default)(url);this.webrtcmngr=(0,_webrtcmngr2.default)(this.datarefs)}(0,_createClass3.default)(Reach,[{key:'Room',value:function Room(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _room2.default.apply(undefined,args.concat([this.datarefs,this.webrtcmngr]))}},{key:'Reach',value:function Reach(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}return _reach2.default.apply(undefined,args.concat([this.datarefs]))}}],[{key:'version',get:function get(){return SDK_VERSION}},{key:'actions',get:function get(){return _actions2.default}}]);return Reach})();module.exports=Reach;

/***/ },
/* 1 */
/***/ function(module, exports) {

	"use strict";
	
	exports.default = function (instance, Constructor) {
	  if (!(instance instanceof Constructor)) {
	    throw new TypeError("Cannot call a class as a function");
	  }
	};
	
	exports.__esModule = true;

/***/ },
/* 2 */
/***/ function(module, exports, __webpack_require__) {

	"use strict";
	
	var _defineProperty = __webpack_require__(3);
	
	var _defineProperty2 = _interopRequireDefault(_defineProperty);
	
	function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
	
	exports.default = (function () {
	  function defineProperties(target, props) {
	    for (var i = 0; i < props.length; i++) {
	      var descriptor = props[i];
	      descriptor.enumerable = descriptor.enumerable || false;
	      descriptor.configurable = true;
	      if ("value" in descriptor) descriptor.writable = true;
	      (0, _defineProperty2.default)(target, descriptor.key, descriptor);
	    }
	  }
	
	  return function (Constructor, protoProps, staticProps) {
	    if (protoProps) defineProperties(Constructor.prototype, protoProps);
	    if (staticProps) defineProperties(Constructor, staticProps);
	    return Constructor;
	  };
	})();
	
	exports.__esModule = true;

/***/ },
/* 3 */
/***/ function(module, exports, __webpack_require__) {

	module.exports = { "default": __webpack_require__(4), __esModule: true };

/***/ },
/* 4 */
/***/ function(module, exports, __webpack_require__) {

	var $ = __webpack_require__(5);
	module.exports = function defineProperty(it, key, desc){
	  return $.setDesc(it, key, desc);
	};

/***/ },
/* 5 */
/***/ function(module, exports) {

	var $Object = Object;
	module.exports = {
	  create:     $Object.create,
	  getProto:   $Object.getPrototypeOf,
	  isEnum:     {}.propertyIsEnumerable,
	  getDesc:    $Object.getOwnPropertyDescriptor,
	  setDesc:    $Object.defineProperty,
	  setDescs:   $Object.defineProperties,
	  getKeys:    $Object.keys,
	  getNames:   $Object.getOwnPropertyNames,
	  getSymbols: $Object.getOwnPropertySymbols,
	  each:       [].forEach
	};

/***/ },
/* 6 */
/***/ function(module, exports) {

	'use strict';window.RTCPeerConnection=null;window.getUserMedia=null;window.attachMediaStream=null;window.reattachMediaStream=null;window.webrtcDetectedBrowser=null;window.webrtcDetectedVersion=null;function fixIceServer(iceServer){if(iceServer.hasOwnProperty('urls')){iceServer.url=iceServer.urls;delete iceServer.urls}if(iceServer.hasOwnProperty('url')&&iceServer.url.toLowerCase().startsWith('turns')&&navigator.mozGetUserMedia){console.warn('(ReachSDK::maybeFixConfiguration) '+'turns detected on firefox -> ignore this entry')}}function maybeFixConfiguration(pcConfig){if(pcConfig===null){return}if(pcConfig.iceServers&&pcConfig.iceServers.length>0){var mTempsServers=[];for(var i=pcConfig.iceServers.length-1;i>=0;i--){var iceServer=pcConfig.iceServers[i];fixIceServer(iceServer);mTempsServers.push(iceServer)}pcConfig.iceServers=mTempsServers}}function createTurnServerConfig(url,username,password){var legacy=arguments.length<=3||arguments[3]===undefined?false:arguments[3],iceServer=undefined;if(legacy){var turn_url_parts=url.split('?');if(turn_url_parts.length===1||turn_url_parts[1].indexOf('transport=udp')===0){iceServer={url:turn_url_parts[0],credential:password,username:username}}}else {iceServer={url:url,credential:password,username:username}}return iceServer}if(navigator.mozGetUserMedia){window.webrtcDetectedBrowser='firefox';window.webrtcDetectedVersion=parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1],10);window.RTCPeerConnection=function(pcConfig,pcConstraints){maybeFixConfiguration(pcConfig);return new mozRTCPeerConnection(pcConfig,pcConstraints)};window.RTCSessionDescription=mozRTCSessionDescription;window.RTCIceCandidate=mozRTCIceCandidate;window.getUserMedia=navigator.mozGetUserMedia.bind(navigator);navigator.getUserMedia=getUserMedia;window.createIceServer=function(url,username,password){var iceServer=null,url_parts=url.split(':');if(url_parts[0].indexOf('stun')===0){iceServer={url:url}}else if(url_parts[0].indexOf('turn')===0){iceServer=createTurnServerConfig(url,username,password,window.webrtcDetectedVersion<27)}return iceServer};window.createIceServers=function(urls,username,password){var iceServers=[];for(var i=0;i<urls.length;i++){var iceServer=window.createIceServer(urls[i],username,password);if(iceServer!==null){iceServers.push(iceServer)}}return iceServers};window.detachMediaStream=function(element){if(element){element.mozSrcObject=null;element.pause()}};window.attachMediaStream=function(element,stream){try{if(element&&stream){element.mozSrcObject=stream;if(element.play&&typeof element.play=='function'){element.play()}else {console.warn('(ReachSDK::attachMediaStream)element.play not available')}}else {console.error('ReachSDK::attachMediaStream->parameters not valid')}}catch(e) {console.error('(ReachSDK::attachMediaStream)Exception='+e)}};window.reattachMediaStream=function(to,from){if(to&&from){to.mozSrcObject=from.mozSrcObject;to.play()}else {console.error('ReachSDK::reattachMediaStream->parameters not valid')}};if(!MediaStream.prototype.getVideoTracks){MediaStream.prototype.getVideoTracks=function(){return []}}if(!MediaStream.prototype.getAudioTracks){MediaStream.prototype.getAudioTracks=function(){return []}}}else if(navigator.webkitGetUserMedia){window.webrtcDetectedBrowser='chrome';window.webrtcDetectedVersion=parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2],10);window.createIceServer=function(url,username,password){var iceServer=null,url_parts=url.split(':');if(url_parts[0].indexOf('stun')===0){iceServer={url:url}}else if(url_parts[0].indexOf('turn')===0){iceServer=createTurnServerConfig(url,password,username)}return iceServer};window.createIceServers=function(urls,username,password){var iceServers=[];if(window.webrtcDetectedVersion>=34){iceServers={urls:urls,credential:password,username:username}}else {for(var i=0;i<urls.length;i++){var iceServer=window.createIceServer(urls[i],username,password);if(iceServer!==null){iceServers.push(iceServer)}}}return iceServers};window.RTCPeerConnection=function(pcConfig,pcConstraints){if(window.webrtcDetectedVersion<34){maybeFixConfiguration(pcConfig)}return new webkitRTCPeerConnection(pcConfig,pcConstraints)};window.getUserMedia=navigator.webkitGetUserMedia.bind(navigator);navigator.getUserMedia=getUserMedia;window.attachMediaStream=function(element,stream){try{if(element&&stream){element.src=URL.createObjectURL(stream);element.autoplay=true}else {console.error('ReachSDK::attachMediaStream ->parameters not valid')}}catch(e) {console.error('(ReachSDK::attachMediaStream)Exception='+e)}};window.detachMediaStream=function(element){if(element){if(typeof element.srcObject!=='undefined'){element.srcObject=''}else if(typeof element.mozSrcObject!=='undefined'){element.mozSrcObject=''}else if(typeof element.src!=='undefined'){element.src=''}else {console.log('Error attaching stream to element.')}}};window.reattachMediaStream=function(to,from){if(to&&from){to.src=from.src}else {console.error('ReachSDK::reattachMediaStream media stream->parameters not valid')}}}else {throw new Error('Browser does not appear to be WebRTC-capable')}

/***/ },
/* 7 */
/***/ function(module, exports) {

	'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.default={ACTION_TYPE_AUDIO:'audio',ACTION_TYPE_VIDEO:'video',ACTION_TYPE_CHAT:'chat',ACTION_TYPE_AUDIO_VIDEO:'audio-video',ACTION_TYPE_SCREEN_SHARING:'screen-sharing',ACTION_TYPE_CALL:'call'};

/***/ },
/* 8 */
/***/ function(module, exports) {

	'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.default=function(WEBCOMBASE_URL){var _datastore=null,_rooms=null,_reach=null,_webrtc=null,_sipPhoneNumbers=null;function _initChildren(){_rooms=_datastore.child('roomsList');_reach=_datastore.child('reach');_webrtc=_datastore.child('webrtc');_sipPhoneNumbers=_datastore.child('sipPhoneNumbers')}function _init(){_datastore=new Webcom(WEBCOMBASE_URL);_initChildren()}function _setWebcomBaseUrl(p_webcombase_url){_datastore=new Webcom(p_webcombase_url);_initChildren()}function _getWebcomBaseUrl(){if(_datastore){return _datastore.toString()}return undefined}function _setDatastore(p_datastore){_datastore=p_datastore;_initChildren()}function _getDatastore(){return _datastore}function _setRooms(p_rooms){_rooms=p_rooms}function _getRooms(){return _rooms}function _setReach(p_reach){_reach=p_reach}function _getReach(){return _reach}function _setWebrtc(p_webrtc){_webrtc=p_webrtc}function _getWebrtc(){return _webrtc}function _setSipPhoneNumbers(p_sipPhoneNumbers){_sipPhoneNumbers=p_sipPhoneNumbers}function _getSipPhoneNumbers(){return _sipPhoneNumbers}_init();return {setWebcomBaseUrl:_setWebcomBaseUrl,getWebcomBaseUrl:_getWebcomBaseUrl,setDatastore:_setDatastore,getDatastore:_getDatastore,setRooms:_setRooms,getRooms:_getRooms,setReach:_setReach,getReach:_getReach,setWebrtc:_setWebrtc,getWebrtc:_getWebrtc,setSipPhoneNumbers:_setSipPhoneNumbers,getSipPhoneNumbers:_getSipPhoneNumbers}};

/***/ },
/* 9 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _keys=__webpack_require__(10),_keys2=_interopRequireDefault(_keys),_stringify=__webpack_require__(22),_stringify2=_interopRequireDefault(_stringify),_utils=__webpack_require__(24),_utils2=_interopRequireDefault(_utils);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var INVITATION_ONGOING='ONGOING',INVITATION_ACCEPTED='ACCEPTED',INVITATION_REJECTED='REJECTED',INVITATION_CANCELED='CANCELED',DEVICE_STATUS_CONNECTED='CONNECTED',ROOM_STATUS_OPEN='OPEN',reach=function reach(p_me,datarefs){var _this=this,me=p_me,dataref=datarefs.getReach(),onUserAddedCb=null,onUserChangedCb=null,onUserRemovedCb=null,newInviteCb=null,onRoomInviteChangedCb=null,mOutgoingInvites=[],mIncomingInvitation=[],automaticRejectTimeOut=null,automaticRejectReason=null,mDeviceId=null;function init(){mDeviceId=dataref.child('userList/'+me+'/connectedList/'+_utils2.default.appInstanceId);mDeviceId.onDisconnect().remove();mDeviceId.child('status').set(DEVICE_STATUS_CONNECTED);try{(function(){var description=mDeviceId.child('description');if(_utils2.default.appInstanceId){description.child('appInstanceId').set(_utils2.default.appInstanceId)}var navigatorData={},properties=['appCodeName','appName','appVersion','buildID','cookieEnabled','language','onLine','oscpu','platform','product','productSub','securityPolicy','userAgent','vendor','vendorSub'];properties.forEach(function(property){if(navigator[property]){navigatorData[property]=navigator[property]}});description.child('navigator').set(navigatorData)})()}catch(e) {console.error('(ReachSDK::reach::init)failed to get information about device. error='+e)}dataref.child('userList/'+me+'/wasInsideReach').set(true)}function _isConnected(p_userId,p_cb){console.log('(ReachSDK::reach::_isConnected)userId: '+p_userId);dataref.child('userList/'+p_userId+'/connectedList').once('value',function(snapshot){if(p_cb&&typeof p_cb=='function'){p_cb(snapshot.val()!==null)}})}function _isRegistered(p_userId,p_cb){console.log('(ReachSDK::reach::_isRegistered)userId: '+p_userId);dataref.child('userList/'+p_userId+'/wasInsideReach').once('value',function(snapshot){if(p_cb&&typeof p_cb=='function'){p_cb(snapshot.val()!==null)}})}function _setConnectedStatus(p_status){if(mDeviceId){mDeviceId.child('status').set(p_status)}}function _setOnUserAdded(p_cb){if(onUserAddedCb){dataref.child('userList').off('child_added',onUserAddedCb);onUserAddedCb=null}if(p_cb&&typeof p_cb=='function'){onUserAddedCb=function(snapshot){console.log('(ReachSDK::reach::onUserAddedCb) '+snapshot.name()+'='+(0,_stringify2.default)(snapshot.val()));var obj={};obj[snapshot.name()]=snapshot.val();p_cb(obj)};dataref.child('userList').on('child_added',onUserAddedCb)}}function _setOnUserChanged(p_cb){if(onUserChangedCb){dataref.child('userList').off('child_changed',onUserChangedCb);onUserChangedCb=null}if(p_cb&&typeof p_cb=='function'){onUserChangedCb=function(snapshot){console.log('(ReachSDK::reach::onUserChangedCb) '+snapshot.name()+'='+(0,_stringify2.default)(snapshot.val()));var obj={};obj[snapshot.name()]=snapshot.val();p_cb(obj)};dataref.child('userList').on('child_changed',onUserChangedCb)}}function _setOnUserRemoved(p_cb){if(onUserRemovedCb){dataref.child('userList').off('child_removed',onUserRemovedCb);onUserRemovedCb=null}if(p_cb&&typeof p_cb=='function'){onUserRemovedCb=function(snapshot){console.log('(ReachSDK::reach::onUserRemovedCb) '+snapshot.name()+'='+(0,_stringify2.default)(snapshot.val()));var obj={};obj[snapshot.name()]=snapshot.val();p_cb(obj)};dataref.child('userList').on('child_removed',onUserRemovedCb)}}function _setOnNewRoomInvitation(p_onNewRoomInviteCb){if(newInviteCb){dataref.child('invitationList/'+me).off('child_added',newInviteCb);newInviteCb=null}if(p_onNewRoomInviteCb&&typeof p_onNewRoomInviteCb=='function'){newInviteCb=function(snapshot){if(snapshot.val().status===INVITATION_ONGOING){(function(){console.log('(ReachSDK::reach::_setOnNewRoomInvitation)new Invite received,id) '+snapshot.name()+',content='+(0,_stringify2.default)(snapshot.val()));var invitationId=snapshot.name();if(!mIncomingInvitation){mIncomingInvitation=[]}if(mIncomingInvitation[invitationId]){if(mIncomingInvitation[invitationId].timeout){clearTimeout(mIncomingInvitation[invitationId].timeout)}delete mIncomingInvitation[invitationId]}mIncomingInvitation[invitationId]={};var obj={};obj[invitationId]=snapshot.val();p_onNewRoomInviteCb(obj);var invitationRef=dataref.child('invitationList/'+me+'/'+invitationId);if(automaticRejectTimeOut){mIncomingInvitation[invitationId].timeout=setTimeout(function(){if(automaticRejectTimeOut){console.log('(ReachSDK::reach::_setOnNewRoomInvitation)automatic reject of Invite received='+(0,_stringify2.default)(snapshot.val()));invitationRef.onDisconnect().cancel();if(automaticRejectReason){invitationRef.update({timestamp_end:Webcom.ServerValue.TIMESTAMP,status:INVITATION_REJECTED,status_info:automaticRejectReason})}else {invitationRef.update({timestamp_end:Webcom.ServerValue.TIMESTAMP,status:INVITATION_REJECTED})}}},automaticRejectTimeOut)}invitationRef.once('child_changed',function(snapshot){if(snapshot&&snapshot.name()==='status'){snapshot.ref().parent().once('value',function(snapshot2){var cb_invitationId=undefined,cb_obj_content=undefined;if(snapshot2){cb_invitationId=snapshot.ref().parent().name();cb_obj_content=snapshot2.val();var cb_obj={};cb_obj[cb_invitationId]=cb_obj_content;if(mIncomingInvitation&&mIncomingInvitation[cb_invitationId]&&mIncomingInvitation[cb_invitationId].timeout){clearTimeout(mIncomingInvitation[cb_invitationId].timeout)}console.log('(ReachSDK::reach::_setOnNewRoomInvitation)Invite changed,id=) '+cb_invitationId+', new content='+(0,_stringify2.default)(cb_obj_content));if(cb_obj&&onRoomInviteChangedCb){onRoomInviteChangedCb(cb_obj)}delete mIncomingInvitation[cb_invitationId]}})}})})()}};dataref.child('invitationList/'+me).on('child_added',newInviteCb)}}function _setOnRoomInvitationChanged(p_onRoomInviteChangedCb){if(onRoomInviteChangedCb){onRoomInviteChangedCb=null}if(p_onRoomInviteChangedCb&&typeof p_onRoomInviteChangedCb=='function'){onRoomInviteChangedCb=p_onRoomInviteChangedCb}}function _setNewRoomInvitationTimeout(p_timeout,p_reason){if(automaticRejectTimeOut){automaticRejectTimeOut=null}if(automaticRejectReason){automaticRejectReason=null}if(p_timeout&&p_timeout===parseInt(p_timeout,10)&&p_timeout>0){console.log('(ReachSDK::reach::_setNewRoomInvitationTimeout)timeout='+p_timeout);automaticRejectTimeOut=p_timeout}if(p_reason){automaticRejectReason=p_reason}}function _isUserPresentInRoom(p_roomId,p_user,p_cb){console.log('(ReachSDK::reach::_isUserPresentInRoom)p_roomId='+p_roomId+' p_user='+p_user);if(!(p_roomId&&typeof p_roomId=='string')){console.error('(ReachSDK::reach::_isUserPresentInRoom)parameter p_roomid is incorrect. Expecting non empty string');return}if(!(p_user&&typeof p_user=='string')){console.error('(ReachSDK::reach::_isUserPresentInRoom)parameter p_user is incorrect. Expecting non empty string');return}if(!(p_cb&&typeof p_cb=='function')){console.error('(ReachSDK::reach::_isUserPresentInRoom)parameter p_cb is incorrect. if defined, expecting a function');return}datarefs.getRooms().child(p_roomId+'/participantList/'+p_user+'/wasInsideRoom').once('value',function(snapshot){var wasPresent=snapshot.val()!==null;console.log('(ReachSDK::reach::_isUserPresentInRoom)p_roomId='+p_roomId+',p_user='+p_user+',result='+wasPresent);p_cb(wasPresent,p_roomId,p_user)})}function _cancelInvitation(p_roomId,p_guestIds,p_cb){if(!(p_roomId&&typeof p_roomId=='string')){console.error('(ReachSDK::reach::_cancelInvitation)parameter p_roomid is incorrect. Expecting non empty string');return}if(p_guestIds&&!p_guestIds instanceof Array){console.error('(ReachSDK::reach::_cancelInvitation)parameter p_guestIds is incorrect. Expecting an Array');return}console.log(' (ReachSDK::reach::_cancelInvitation)p_roomId='+p_roomId+', p_guestIds='+(0,_stringify2.default)(p_guestIds));if(mOutgoingInvites&&mOutgoingInvites[p_roomId]){if(p_guestIds){p_guestIds.forEach(function(guestId,i){if(!(guestId&&typeof guestId=='string')){console.error('(ReachSDK::reach::inviteToRoom)parameter p_guestIds['+i+'] is incorrect. Expecting non empty string')}else if(mOutgoingInvites[p_roomId][guestId]){if(mOutgoingInvites[p_roomId][guestId].InviteDataref){mOutgoingInvites[p_roomId][guestId].InviteDataref.onDisconnect().cancel();if(mOutgoingInvites[p_roomId][guestId].InviteChangedCb&&typeof mOutgoingInvites[p_roomId][guestId].InviteChangedCb=='function'){mOutgoingInvites[p_roomId][guestId].InviteDataref.off('child_changed',mOutgoingInvites[p_roomId][guestId].InviteChangedCb)}mOutgoingInvites[p_roomId][guestId].InviteDataref.once('value',function(dataSnapshot){var cb_status=undefined,cb_guestId=undefined,cb_roomId=undefined;if(dataSnapshot&&dataSnapshot.val()){cb_status=dataSnapshot.val().status;cb_roomId=dataSnapshot.val().room;cb_guestId=dataSnapshot.ref().parent().name();if(cb_status&&cb_status===INVITATION_ONGOING){mOutgoingInvites[cb_roomId][cb_guestId].InviteDataref.update({timestamp_end:Webcom.ServerValue.TIMESTAMP,status:INVITATION_CANCELED});if(mOutgoingInvites[cb_roomId][cb_guestId].statusChangedCb&&typeof mOutgoingInvites[cb_roomId][cb_guestId].statusChangedCb=='function'){mOutgoingInvites[cb_roomId][cb_guestId].statusChangedCb(cb_roomId,cb_guestId,INVITATION_CANCELED)}console.log('(ReachSDK::reach::_cancelInvitation)deleting Invite to room '+cb_roomId+' for invitee '+cb_guestId)}else {console.warn('(ReachSDK::reach::_cancelInvitation)cannot delete intivation to room '+cb_roomId+' for guest '+cb_guestId+' Invitation has been removed/rejected/accepted')}}delete mOutgoingInvites[p_roomId][guestId];if(p_cb&&typeof p_cb=='function'){p_cb(guestId)}})}else {delete mOutgoingInvites[p_roomId][guestId];if(p_cb&&typeof p_cb=='function'){p_cb(guestId)}}}else {if(p_cb&&typeof p_cb=='function'){p_cb(guestId)}}})}else {(0,_keys2.default)(mOutgoingInvites[p_roomId]).forEach(function(invitee){_cancelInvitation(p_roomId,[invitee],p_cb)})}}else {console.warn('(ReachSDK::reach::_cancelInvitation) Invite to room '+p_roomId+' not found')}}function _inviteToRoom(p_roomId,p_guestIds,p_topic,p_statusChangedCb){if(!(p_roomId&&typeof p_roomId=='string')){console.error('(ReachSDK::reach::inviteToRoom)parameter p_roomid is incorrect. Expecting non empty string');return}if(!(p_topic&&typeof p_topic=='string')){console.error('(ReachSDK::reach::inviteToRoom)parameter p_topic is incorrect. Expecting non empty string');return}if(p_statusChangedCb&&typeof p_statusChangedCb!='function'){console.warn('(ReachSDK::reach::inviteToRoom)parameter p_statusChangedCb is incorrect. if defined, expecting a function')}if(!(p_guestIds&&p_guestIds instanceof Array)){console.error('(ReachSDK::reach::inviteToRoom)parameter p_guestIds is incorrect. Expecting an Array');return}datarefs.getRooms().child(p_roomId).child('commonDataList').update({status:ROOM_STATUS_OPEN,owner:me});var _isUserPresentInRoomCb=function _isUserPresentInRoomCb(isAlreadyPresent,p_roomId2,p_guestId2){if(!isAlreadyPresent){datarefs.getRooms().child(p_roomId2+'/participantList/'+p_guestId2).update({connected:false,wasInsideRoom:false})}},_InviteChangedCb=function _InviteChangedCb(snapshot){console.log('(ReachSDK::reach::inviteToRoom::_InviteChangedCb)');if(snapshot&&snapshot.name()==='status'){var cb_guestId2=snapshot.ref().parent().parent().name();console.log('(ReachSDK::reach::inviteToRoom::_InviteChangedCb)cb_guestId2='+cb_guestId2);if(mOutgoingInvites&&mOutgoingInvites[p_roomId]&&mOutgoingInvites[p_roomId][cb_guestId2]&&mOutgoingInvites[p_roomId][cb_guestId2].InviteChangedCb){mOutgoingInvites[p_roomId][cb_guestId2].InviteDataref.off('child_changed',mOutgoingInvites[p_roomId][cb_guestId2].InviteChangedCb)}snapshot.ref().parent().once('value',function(snapshot2){var cb_status=undefined,cb_guestId=undefined,cb_roomId=undefined,cb_status_info=undefined;if(snapshot2){cb_status=snapshot2.val().status;cb_roomId=snapshot2.val().room;cb_status_info=snapshot2.val().status_info;cb_guestId=snapshot2.ref().parent().name();console.log('(ReachSDK::reach::inviteToRoom::_InviteChangedCb)roomId='+cb_roomId+' invitee='+cb_guestId+' new invitation status='+cb_status+' status info='+cb_status_info);if(mOutgoingInvites&&mOutgoingInvites[cb_roomId]&&mOutgoingInvites[cb_roomId][cb_guestId]&&mOutgoingInvites[cb_roomId][cb_guestId].InviteDataref){mOutgoingInvites[cb_roomId][cb_guestId].InviteDataref.onDisconnect().cancel();if(mOutgoingInvites[cb_roomId][cb_guestId].statusChangedCb&&typeof mOutgoingInvites[cb_roomId][cb_guestId].statusChangedCb=='function'){mOutgoingInvites[cb_roomId][cb_guestId].statusChangedCb(cb_roomId,cb_guestId,cb_status,cb_status_info)}else {console.warn('(ReachSDK::reach::inviteToRoom::_InviteChangedCb)cannot retrieve mathing p_statusChangedCb')}delete mOutgoingInvites[cb_roomId][cb_guestId]}else {console.warn('(ReachSDK::reach::inviteToRoom::_InviteChangedCb)cannot retrieve mathing mOutgoingInvite')}}else {console.warn('(ReachSDK::reach::inviteToRoom::_InviteChangedCb)cannot retrieve invitation')}})}};p_guestIds.forEach(function(mGuestId,i){if(!(mGuestId&&typeof mGuestId=='string')){console.error('(ReachSDK::reach::inviteToRoom)parameter p_guestIds['+i+'] is incorrect. Expecting non empty string')}else {console.log('(ReachSDK::reach::inviteToRoom)roomId='+p_roomId+' invitee='+mGuestId.toString());if(mOutgoingInvites[p_roomId]&&mOutgoingInvites[p_roomId][mGuestId]){_cancelInvitation(p_roomId,[mGuestId],function(p_guestId){if(p_guestId&&p_guestId===mGuestId){_inviteToRoom(p_roomId,[p_guestId],p_topic,p_statusChangedCb)}});return}if(!mOutgoingInvites[p_roomId]){mOutgoingInvites[p_roomId]=[]}mOutgoingInvites[p_roomId][mGuestId]={};_isUserPresentInRoom(p_roomId,mGuestId,_isUserPresentInRoomCb);mOutgoingInvites[p_roomId][mGuestId].InviteDataref=dataref.child('invitationList').child(mGuestId).push({from:me,room:p_roomId,timestamp_creation:Webcom.ServerValue.TIMESTAMP,topic:p_topic,status:INVITATION_ONGOING});console.log('(ReachSDK::reach::inviteToRoom)InviteDataref='+mOutgoingInvites[p_roomId][mGuestId].InviteDataref.toString());mOutgoingInvites[p_roomId][mGuestId].InviteChangedCb=_InviteChangedCb;mOutgoingInvites[p_roomId][mGuestId].InviteDataref.on('child_changed',mOutgoingInvites[p_roomId][mGuestId].InviteChangedCb);mOutgoingInvites[p_roomId][mGuestId].statusChangedCb=p_statusChangedCb;mOutgoingInvites[p_roomId][mGuestId].InviteDataref.onDisconnect().update({timestamp_end:Webcom.ServerValue.TIMESTAMP,status:INVITATION_CANCELED})}})}function _acceptInvitation(p_invitation){var inviteId=(0,_keys2.default)(p_invitation)[0];if(!inviteId){console.error('(ReachSDK::reach::_acceptInvitation)parameter p_invitation is incorrect. cannot get invitation Id');return}if(!p_invitation[inviteId]){console.error('(ReachSDK::reach::_acceptInvitation)parameter p_invitation is incorrect. cannot get invitation data');return}dataref.child('invitationList/'+me+'/'+inviteId).once('value',function(dataSnapshot){var cb_status=undefined,cb_guestId=undefined,cb_invitationId=undefined;if(dataSnapshot&&dataSnapshot.val()){cb_invitationId=dataSnapshot.name();cb_status=dataSnapshot.val().status;cb_guestId=dataSnapshot.ref().parent().name();if(cb_status&&cb_status===INVITATION_ONGOING){console.log('(ReachSDK::reach::_acceptInvitation)inviteId='+inviteId+',data='+(0,_stringify2.default)(p_invitation[inviteId]));dataref.child('invitationList/'+cb_guestId+'/'+cb_invitationId).update({timestamp_end:Webcom.ServerValue.TIMESTAMP,status:INVITATION_ACCEPTED})}else {console.warn('(ReachSDK::reach::_acceptInvitation)inviteId='+cb_invitationId+',data='+(0,_stringify2.default)(p_invitation[inviteId])+', cannot be accepted. It has been removed or canceled')}}})}function _rejectInvitation(p_invitation,p_reason){var inviteId=(0,_keys2.default)(p_invitation)[0];if(!inviteId){console.error('(ReachSDK::reach::_rejectInvitation)parameter p_invitation is incorrect. cannot get invitation Id');return}if(!p_invitation[inviteId]){console.error('(ReachSDK::reach::_rejectInvitation)parameter p_invitation is incorrect. cannot get invitation data');return}dataref.child('invitationList/'+me+'/'+inviteId).once('value',function(dataSnapshot){var cb_status=undefined,cb_guestId=undefined,cb_invitationId=undefined;if(dataSnapshot&&dataSnapshot.val()){cb_invitationId=dataSnapshot.name();cb_status=dataSnapshot.val().status;cb_guestId=dataSnapshot.ref().parent().name();if(cb_status&&cb_status===INVITATION_ONGOING){console.log('(ReachSDK::reach::_rejectInvitation)inviteId='+inviteId+',data='+(0,_stringify2.default)(p_invitation[inviteId]));if(p_reason){dataref.child('invitationList/'+cb_guestId+'/'+cb_invitationId).update({timestamp_end:Webcom.ServerValue.TIMESTAMP,status_info:p_reason,status:INVITATION_REJECTED})}else {dataref.child('invitationList/'+cb_guestId+'/'+cb_invitationId).update({timestamp_end:Webcom.ServerValue.TIMESTAMP,status:INVITATION_REJECTED})}}else {console.warn('(ReachSDK::reach::_rejectInvitation)inviteId='+cb_invitationId+',data='+(0,_stringify2.default)(p_invitation[inviteId])+', cannot be rejected. It has been removed or canceled')}}})}function _isRoomActive(p_invitation,p_cb){if(p_invitation&&p_cb&&typeof p_cb=='function'){(function(){var inviteId=(0,_keys2.default)(p_invitation)[0];console.log('(ReachSDK::reach::_isRoomActive)inviteId='+inviteId);var roomId=p_invitation[inviteId].room;datarefs.getRooms().child(roomId+'/commonDataList/status').once('value',function(snapshot){var opened=snapshot&&snapshot.val()&&snapshot.val()===ROOM_STATUS_OPEN;console.log('(ReachSDK::reach::_isRoomActive)inviteId='+inviteId+' result='+opened);p_cb(opened)})})()}}function _archiveInvitations(p_userId,p_cb){console.log('(ReachSDK::reach::_archiveInvitations)userId='+p_userId);dataref.child('invitationList/'+me).once('value',function(snapshot){if(snapshot&&snapshot.hasChildren()){(function(){var nbChildren=snapshot.numChildren(),nbChildrenProcessed=0;snapshot.forEach(function(childSnapshot){if(childSnapshot&&childSnapshot.val()){console.log('(ReachSDK::reach::_archiveInvitations)userId='+p_userId+' inviteId='+childSnapshot.name());if(childSnapshot.val().status===INVITATION_REJECTED||childSnapshot.val().status===INVITATION_CANCELED){dataref.child('invitationListHistory/'+p_userId+'/'+childSnapshot.name()).update(childSnapshot.val());childSnapshot.ref().remove();nbChildrenProcessed++;if(nbChildrenProcessed>=nbChildren&&p_cb&&typeof p_cb=='function'){p_cb()}}else {var inviteData={};inviteData[childSnapshot.name()]=childSnapshot.val();_isRoomActive(inviteData,function(isActive){if(isActive){nbChildrenProcessed++;if(nbChildrenProcessed>=nbChildren&&p_cb&&typeof p_cb=='function'){p_cb()}}else {if(childSnapshot.val().status===INVITATION_ONGOING){var newValue=childSnapshot.val();newValue.status=INVITATION_CANCELED;dataref.child('invitationListHistory/'+p_userId+'/'+childSnapshot.name()).set(newValue)}else {dataref.child('invitationListHistory/'+p_userId+'/'+childSnapshot.name()).set(childSnapshot.val())}childSnapshot.ref().remove();nbChildrenProcessed++;if(nbChildrenProcessed>=nbChildren&&p_cb&&typeof p_cb=='function'){p_cb()}}})}}else {if(p_cb&&typeof p_cb=='function'){p_cb()}}})})()}else {if(p_cb&&typeof p_cb=='function'){p_cb()}}})}function _close(){console.log('(ReachSDK::reach::_close)');if(newInviteCb){dataref.child('invitationList').child(me).off('child_added',newInviteCb);newInviteCb=null}if(onUserAddedCb){dataref.child('userList').off('child_added',onUserAddedCb);onUserAddedCb=null}if(onUserChangedCb){dataref.child('userList').off('child_changed',onUserChangedCb);onUserChangedCb=null}if(onUserRemovedCb){dataref.child('userList').off('child_removed',onUserRemovedCb);onUserRemovedCb=null}if(mOutgoingInvites){mOutgoingInvites.forEach(function(roomId){mOutgoingInvites[roomId].forEach(function(invitee){if(invitee.InviteDataref){invitee.InviteDataref.onDisconnect().cancel();invitee.InviteDataref.update({status:INVITATION_CANCELED,timestamp_end:Webcom.ServerValue.TIMESTAMP})}})});mOutgoingInvites=[]}if(automaticRejectTimeOut){automaticRejectTimeOut=null}if(automaticRejectReason){automaticRejectReason=null}if(mDeviceId){mDeviceId.remove();mDeviceId=null}}init();return {getMe:function getMe(){return me},isConnected:_isConnected,isRegistered:_isRegistered,setConnectedStatus:_setConnectedStatus,setOnUserAdded:_setOnUserAdded,setOnUserChanged:_setOnUserChanged,setOnUserRemoved:_setOnUserRemoved,inviteToRoom:_inviteToRoom,cancelInvitation:_cancelInvitation,setOnNewRoomInvitation:_setOnNewRoomInvitation,setOnRoomInvitationChanged:_setOnRoomInvitationChanged,setNewRoomInvitationTimeout:_setNewRoomInvitationTimeout,archiveMyInvitations:function archiveMyInvitations(p_cb){return _archiveInvitations(me,p_cb)},acceptInvitation:_acceptInvitation,rejectInvitation:_rejectInvitation,on:function on(p_evt,p_cb){switch(p_evt){case 'newRoomInvitation':_this.setOnNewRoomInvitation(p_cb);break;case 'roomInvitationChanged':_this.setOnRoomInvitationChanged(p_cb);break;case 'userAdded':_this.setOnUserAdded(p_cb);break;case 'userChanged':_this.setOnUserChanged(p_cb);break;case 'userRemoved':_this.setOnUserRemoved(p_cb);break;default:console.error('reach.set: no such event');return -1;}},close:_close}};exports.default=reach;

/***/ },
/* 10 */
/***/ function(module, exports, __webpack_require__) {

	module.exports = { "default": __webpack_require__(11), __esModule: true };

/***/ },
/* 11 */
/***/ function(module, exports, __webpack_require__) {

	__webpack_require__(12);
	module.exports = __webpack_require__(18).Object.keys;

/***/ },
/* 12 */
/***/ function(module, exports, __webpack_require__) {

	// 19.1.2.14 Object.keys(O)
	var toObject = __webpack_require__(13);
	
	__webpack_require__(15)('keys', function($keys){
	  return function keys(it){
	    return $keys(toObject(it));
	  };
	});

/***/ },
/* 13 */
/***/ function(module, exports, __webpack_require__) {

	// 7.1.13 ToObject(argument)
	var defined = __webpack_require__(14);
	module.exports = function(it){
	  return Object(defined(it));
	};

/***/ },
/* 14 */
/***/ function(module, exports) {

	// 7.2.1 RequireObjectCoercible(argument)
	module.exports = function(it){
	  if(it == undefined)throw TypeError("Can't call method on  " + it);
	  return it;
	};

/***/ },
/* 15 */
/***/ function(module, exports, __webpack_require__) {

	// most Object methods by ES6 should accept primitives
	var $export = __webpack_require__(16)
	  , core    = __webpack_require__(18)
	  , fails   = __webpack_require__(21);
	module.exports = function(KEY, exec){
	  var fn  = (core.Object || {})[KEY] || Object[KEY]
	    , exp = {};
	  exp[KEY] = exec(fn);
	  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);
	};

/***/ },
/* 16 */
/***/ function(module, exports, __webpack_require__) {

	var global    = __webpack_require__(17)
	  , core      = __webpack_require__(18)
	  , ctx       = __webpack_require__(19)
	  , PROTOTYPE = 'prototype';
	
	var $export = function(type, name, source){
	  var IS_FORCED = type & $export.F
	    , IS_GLOBAL = type & $export.G
	    , IS_STATIC = type & $export.S
	    , IS_PROTO  = type & $export.P
	    , IS_BIND   = type & $export.B
	    , IS_WRAP   = type & $export.W
	    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})
	    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]
	    , key, own, out;
	  if(IS_GLOBAL)source = name;
	  for(key in source){
	    // contains in native
	    own = !IS_FORCED && target && key in target;
	    if(own && key in exports)continue;
	    // export native or passed
	    out = own ? target[key] : source[key];
	    // prevent global pollution for namespaces
	    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]
	    // bind timers to global for call from export context
	    : IS_BIND && own ? ctx(out, global)
	    // wrap global constructors for prevent change them in library
	    : IS_WRAP && target[key] == out ? (function(C){
	      var F = function(param){
	        return this instanceof C ? new C(param) : C(param);
	      };
	      F[PROTOTYPE] = C[PROTOTYPE];
	      return F;
	    // make static versions for prototype methods
	    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;
	    if(IS_PROTO)(exports[PROTOTYPE] || (exports[PROTOTYPE] = {}))[key] = out;
	  }
	};
	// type bitmap
	$export.F = 1;  // forced
	$export.G = 2;  // global
	$export.S = 4;  // static
	$export.P = 8;  // proto
	$export.B = 16; // bind
	$export.W = 32; // wrap
	module.exports = $export;

/***/ },
/* 17 */
/***/ function(module, exports) {

	// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
	var global = module.exports = typeof window != 'undefined' && window.Math == Math
	  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();
	if(typeof __g == 'number')__g = global; // eslint-disable-line no-undef

/***/ },
/* 18 */
/***/ function(module, exports) {

	var core = module.exports = {version: '1.2.6'};
	if(typeof __e == 'number')__e = core; // eslint-disable-line no-undef

/***/ },
/* 19 */
/***/ function(module, exports, __webpack_require__) {

	// optional / simple context binding
	var aFunction = __webpack_require__(20);
	module.exports = function(fn, that, length){
	  aFunction(fn);
	  if(that === undefined)return fn;
	  switch(length){
	    case 1: return function(a){
	      return fn.call(that, a);
	    };
	    case 2: return function(a, b){
	      return fn.call(that, a, b);
	    };
	    case 3: return function(a, b, c){
	      return fn.call(that, a, b, c);
	    };
	  }
	  return function(/* ...args */){
	    return fn.apply(that, arguments);
	  };
	};

/***/ },
/* 20 */
/***/ function(module, exports) {

	module.exports = function(it){
	  if(typeof it != 'function')throw TypeError(it + ' is not a function!');
	  return it;
	};

/***/ },
/* 21 */
/***/ function(module, exports) {

	module.exports = function(exec){
	  try {
	    return !!exec();
	  } catch(e){
	    return true;
	  }
	};

/***/ },
/* 22 */
/***/ function(module, exports, __webpack_require__) {

	module.exports = { "default": __webpack_require__(23), __esModule: true };

/***/ },
/* 23 */
/***/ function(module, exports, __webpack_require__) {

	var core = __webpack_require__(18);
	module.exports = function stringify(it){ // eslint-disable-line no-unused-vars
	  return (core.JSON && core.JSON.stringify || JSON.stringify).apply(JSON, arguments);
	};

/***/ },
/* 24 */
/***/ function(module, exports) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});var utils=(function(){function s4(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}function _guid(){return ""+s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4()}var _appInstanceId=_guid();return {appInstanceId:_appInstanceId}})();exports.default=utils;

/***/ },
/* 25 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.default=function(p_me,p_roomId,datarefs,webrtcmngr){var roomId=p_roomId,me=p_me,dataref=datarefs.getRooms().child(roomId),roomWebrtcStacks={},mAvailableStreams=[],mStreams=[],mMutedStreams=[],remoteUnpublishedCb=null,instantMessageListCb=null,publishedMediaListCb=null,publishedMediaListCbForAvailableStream=null,unPublishedMediaListCb=null,unPublishedMediaListCbForAvailableStream=null,participantListJoinAddedCb=null,participantListJoinChangedCb=null,participantListLeaveCb=null;function _addAvailableStream(data){console.log('(ReachSDK::room['+roomId+']::_addAvailableStream)data='+(0,_stringify2.default)(data));mAvailableStreams.push(data)}function _removeAvailableStream(streamId){console.log('(ReachSDK::room['+roomId+']::_removeAvailableStream)streamId='+streamId);if(mAvailableStreams&&streamId){for(var i=mAvailableStreams.length-1;i>=0;i--){if(mAvailableStreams[i]&&(0,_keys2.default)(mAvailableStreams[i])[0]&&(0,_keys2.default)(mAvailableStreams[i])[0]===streamId){delete mAvailableStreams[i]}}}}function initWebcomListener(){if(!publishedMediaListCbForAvailableStream){publishedMediaListCbForAvailableStream=function(snapshot){var obj={},name=snapshot.name(),value=snapshot.val();console.log('(ReachSDK::room['+roomId+']::onPublishedStreamForAvailableStream)stream='+(0,_stringify2.default)(value));obj[name]=value;obj[name].roomId=roomId;_addAvailableStream(obj)};dataref.child('publishedMediaList').on('child_added',publishedMediaListCbForAvailableStream)}if(!unPublishedMediaListCbForAvailableStream){unPublishedMediaListCbForAvailableStream=function(snapshot){var streamId=snapshot.name();console.log('(ReachSDK::room['+roomId+']::onUnPublishedStreamForAvailableStream)stream='+streamId);_removeAvailableStream(streamId)};dataref.child('publishedMediaList').on('child_removed',unPublishedMediaListCbForAvailableStream)}}function init(){dataref.child('participantList/'+me).update({connected:true,wasInsideRoom:true});dataref.child('participantList/'+me+'/connected').onDisconnect().set(false);initWebcomListener()}function _getRoomId(){return roomId}function _getMe(){return me}function _setOnParticipantJoin(p_cb){var participantListRef=dataref.child('participantList');if(participantListJoinAddedCb){participantListRef.off('child_added',participantListJoinAddedCb);participantListJoinAddedCb=null}if(participantListJoinChangedCb){participantListRef.off('child_changed',participantListJoinChangedCb);participantListJoinChangedCb=null}if(p_cb&&typeof p_cb=='function'){participantListJoinAddedCb=function(snapshot){var user=snapshot.name();if(snapshot.val()&&snapshot.val().connected&&snapshot.val().wasInsideRoom){console.log('(ReachSDK::room['+roomId+']::_setOnParticipantJoin) user has joined: '+user);p_cb(user)}};participantListRef.on('child_added',participantListJoinAddedCb);participantListJoinChangedCb=function(snapshot){var user=snapshot.name();if(snapshot.val()&&snapshot.val().connected&&snapshot.val().wasInsideRoom){console.log('(ReachSDK::room['+roomId+']::_setOnParticipantJoin) user has joined: '+user);p_cb(user)}};participantListRef.on('child_changed',participantListJoinChangedCb)}else {console.error('(ReachSDK::room['+roomId+']::_setOnParticipantJoin)parameter incorrect. Expected function')}}function _setOnParticipantLeave(p_cb){if(participantListLeaveCb){dataref.child('participantList').off('child_changed',participantListLeaveCb);participantListLeaveCb=null}if(p_cb&&typeof p_cb=='function'){participantListLeaveCb=function(snapshot){var user=snapshot.name();if(snapshot.val()&&!snapshot.val().connected&&snapshot.val().wasInsideRoom){console.log('(ReachSDK::room['+roomId+']::_setOnParticipantLeave) user has left: '+user);p_cb(user)}};dataref.child('participantList').on('child_changed',participantListLeaveCb)}else {console.error('(ReachSDK::room['+roomId+']::_setOnParticipantLeave)parameter incorrect. Expected function')}}function _sendInstantMessage(p_message){if(p_message!==''){console.log('(ReachSDK::room['+roomId+']::sendInstantMessage)message='+p_message);dataref.child('instantMessageList').push({from:me,message:p_message,timestamp:Webcom.ServerValue.TIMESTAMP})}}function _setOnInstantMessage(p_cb){if(instantMessageListCb){dataref.child('instantMessageList').off('child_added',instantMessageListCb);instantMessageListCb=null}if(p_cb&&typeof p_cb=='function'){instantMessageListCb=function(snapshot){var obj=snapshot.val();console.log('(ReachSDK::room['+roomId+']::_setOnInstantMessage)receive InstantMessage='+(0,_stringify2.default)(obj));p_cb(obj)};dataref.child('instantMessageList').on('child_added',instantMessageListCb)}else {console.error('(ReachSDK::room['+roomId+']::_setOnInstantMessage)parameter incorrect. Expected function')}}function _publishStream(streamId,localVid,p_actionType,getLocalStreamCb){console.log('(ReachSDK::room['+roomId+']::publishStream)roomId='+roomId+',streamId='+streamId+',me='+me+',actionType='+p_actionType);if(!(streamId&&typeof streamId=='string')){console.error('(ReachSDK::reach::inviteToRoom)parameter streamId is incorrect. Expecting non empty string');return}var localDataRef=dataref.child('publishedMediaList').child(streamId),remoteDataRef=localDataRef.child('subscribersList'),pubAndSubscribe=function pubAndSubscribe(){localDataRef.set({from:me,appInstanceId:_utils2.default.appInstanceId,actionType:p_actionType});localDataRef.onDisconnect().remove();var addSubscribersListCb=function addSubscribersListCb(snapshot){var remoteAppInstanceId=snapshot.name(),data=snapshot.val(),_subscriberId=data.userId,_peercoId=data.peercoId,_peercoRef=data.peercoRef,isAudioMute=mMutedStreams[streamId]&&mMutedStreams[streamId].audio,isVideoMute=mMutedStreams[streamId]&&mMutedStreams[streamId].video,streamStackId=streamId+'_pub';console.log('(ReachSDK::room['+roomId+']::publishStream::addSubscribersListCb)subscriber '+_subscriberId+' to stream '+streamId+' added '+(0,_stringify2.default)(data));if(!roomWebrtcStacks[streamStackId]){roomWebrtcStacks[streamStackId]=[]}var mStackId=webrtcmngr.createWebrtc(localVid,remoteAppInstanceId,function(){console.log('(ReachSDK::room['+roomId+']::publishStream::addSubscribersListCb)subscriber '+_subscriberId+' to stream '+streamId+' connection lost')},true,p_actionType,_peercoId,_peercoRef,isAudioMute,isVideoMute);roomWebrtcStacks[streamStackId].push({stackId:mStackId,subscriberId:_subscriberId,isPublish:true,peercoId:_peercoId,peercoRef:_peercoRef})},removeSubscribersListCb=function removeSubscribersListCb(snapshot){var subscriberId=snapshot.name(),streamStacks=roomWebrtcStacks[streamId+'_pub'];if(subscriberId&&streamStacks){console.log('(ReachSDK::room['+roomId+']::publishStream::removeSubscribersListCb)subscriber '+subscriberId+' to stream '+streamId+' removed');for(var i=streamStacks.length-1;i>=0;i--){if(streamStacks[i].subscriberId===subscriberId){webrtcmngr.closeWebrtc(streamStacks[i].stackId,true)}}delete roomWebrtcStacks[streamId+'_pub']}};mStreams[streamId]={addSubscribersListCb:addSubscribersListCb,removeSubscribersListCb:removeSubscribersListCb};remoteDataRef.on('child_added',addSubscribersListCb);remoteDataRef.on('child_removed',removeSubscribersListCb)};if(p_actionType){if(p_actionType===_actions2.default.ACTION_TYPE_VIDEO){_localstream2.default.connectLocalVideoStream(localVid,pubAndSubscribe,getLocalStreamCb)}else if(p_actionType===_actions2.default.ACTION_TYPE_AUDIO){_localstream2.default.connectLocalAudioStream(localVid,pubAndSubscribe,getLocalStreamCb)}else if(p_actionType===_actions2.default.ACTION_TYPE_AUDIO_VIDEO){_localstream2.default.connectLocalAudioVideoStream(localVid,pubAndSubscribe,getLocalStreamCb)}}}function _setOnPublishedStream(p_cb){if(publishedMediaListCb){dataref.child('publishedMediaList').off('child_added',publishedMediaListCb);publishedMediaListCb=null}if(p_cb&&typeof p_cb=='function'){publishedMediaListCb=function(snapshot){var obj={},name=snapshot.name();obj[name]=snapshot.val();obj[name].roomId=roomId;p_cb(obj)};dataref.child('publishedMediaList').on('child_added',publishedMediaListCb)}else {console.error('(ReachSDK::room['+roomId+']::_setOnPublishedStream)parameter incorrect. Expected function')}}function _unPublishStream(streamId,callback){console.log('(ReachSDK::room['+roomId+']::unPublishStream)streamId '+streamId);var localDataRef=dataref.child('publishedMediaList/'+streamId),remoteDataRef=localDataRef.child('subscribersList'),streamStacksId=streamId+'_pub';if(mStreams[streamId]&&mStreams[streamId].addSubscribersListCb){remoteDataRef.off('child_added',mStreams[streamId].addSubscribersListCb)}if(mStreams[streamId]&&mStreams[streamId].removeSubscribersListCb){remoteDataRef.off('child_removed',mStreams[streamId].removeSubscribersListCb)}delete mStreams[streamId];delete mMutedStreams[streamId];localDataRef.onDisconnect().cancel();localDataRef.remove();if(roomWebrtcStacks[streamStacksId]&&roomWebrtcStacks[streamStacksId].length>0){(function(){var nbStack=roomWebrtcStacks[streamStacksId].length,closeCb=function closeCb(){nbStack--;if(nbStack<1){delete roomWebrtcStacks[streamStacksId];if(callback&&typeof callback=='function'){callback()}}};for(var i=nbStack-1;i>=0;i--){webrtcmngr.closeWebrtc(roomWebrtcStacks[streamStacksId][i].stackId,true,closeCb)}})()}else {delete roomWebrtcStacks[streamStacksId];if(callback&&typeof callback=='function'){callback()}}}function _setOnUnPublishedStream(p_cb){if(unPublishedMediaListCb){dataref.child('publishedMediaList').off('child_removed',unPublishedMediaListCb);unPublishedMediaListCb=null}if(p_cb&&typeof p_cb=='function'){unPublishedMediaListCb=function(snapshot){p_cb(snapshot.name())};dataref.child('publishedMediaList').on('child_removed',unPublishedMediaListCb)}else {console.error('(ReachSDK::room['+roomId+']::_setOnUnPublishedStream)parameter incorrect. Expected function')}}function _subscribeToStream(streamData,remoteVid,getRemoteStreamCb){var streamId=(0,_keys2.default)(streamData)[0],actionType=streamData[streamId].actionType;console.log('(ReachSDK::room['+roomId+']::subscribeToStream)streamId '+streamId);if(mStreams&&mStreams[streamId]){if(actionType){if(actionType===_actions2.default.ACTION_TYPE_VIDEO){_localstream2.default.connectLocalVideoStream(remoteVid,getRemoteStreamCb)}else if(actionType===_actions2.default.ACTION_TYPE_AUDIO){_localstream2.default.connectLocalAudioStream(remoteVid,getRemoteStreamCb)}else if(actionType===_actions2.default.ACTION_TYPE_AUDIO_VIDEO){_localstream2.default.connectLocalAudioVideoStream(remoteVid,getRemoteStreamCb)}}return streamId}var appInstanceId=streamData[streamId].appInstanceId,localDataRef=dataref.child('publishedMediaList').child(streamId),remoteDataRef=localDataRef.child('subscribersList'),streamStacksId=streamId+'_sub',_peercoId=undefined,_peercoRef=undefined;if(!roomWebrtcStacks[streamStacksId]){roomWebrtcStacks[streamStacksId]=[]}else if(roomWebrtcStacks[streamStacksId]&&roomWebrtcStacks[streamStacksId][0]&&roomWebrtcStacks[streamStacksId][0].peercoId){_peercoId=roomWebrtcStacks[streamStacksId][0].peercoId}var getRandomIntInclusive=function getRandomIntInclusive(min,max){return Math.floor(Math.random()*(max-min+1))+min};if(!_peercoId){_peercoId=Math.floor(Date.now()).toString()+getRandomIntInclusive(0,1000000)}_peercoRef=datarefs.getWebrtc().push().name();remoteDataRef.child(_utils2.default.appInstanceId).set({ts:Webcom.ServerValue.TIMESTAMP,userId:me,peercoId:_peercoId,peercoRef:_peercoRef});var isAudioMute=mMutedStreams[streamId]&&mMutedStreams[streamId].audio,isVideoMute=mMutedStreams[streamId]&&mMutedStreams[streamId].video,mStackId=webrtcmngr.createWebrtc(remoteVid,appInstanceId,function(){},false,actionType,_peercoId,_peercoRef,isAudioMute,isVideoMute,getRemoteStreamCb);if(!remoteUnpublishedCb){remoteUnpublishedCb=function(snapshot){var removedStreamId=(0,_keys2.default)(snapshot)[0]+'_sub';if(roomWebrtcStacks[removedStreamId]){var i=0;while(i<roomWebrtcStacks[removedStreamId].length){webrtcmngr.closeWebrtc(roomWebrtcStacks[removedStreamId][i].stackId,false);i++}delete roomWebrtcStacks[removedStreamId]}};dataref.child('publishedMediaList').on('child_removed',remoteUnpublishedCb)}roomWebrtcStacks[streamStacksId].push({stackId:mStackId,isPublish:false,peercoId:_peercoId,peercoRef:_peercoRef});return streamId}function _unSubscribeFromStream(streamId){console.log('(ReachSDK::room['+roomId+']::unSubscribeFromStream)streamId '+streamId);var localDataRef=dataref.child('publishedMediaList').child(streamId),remoteDataRef=localDataRef.child('subscribersList'),streamStacksId=streamId+'_sub';remoteDataRef.child(_utils2.default.appInstanceId).remove();if(roomWebrtcStacks[streamStacksId]){var i=0;while(i<roomWebrtcStacks[streamStacksId].length){if(roomWebrtcStacks[streamStacksId][i]){webrtcmngr.closeWebrtc(roomWebrtcStacks[streamStacksId][i].stackId,false)}i++}delete roomWebrtcStacks[streamStacksId]}delete mMutedStreams[streamId]}function _getAvailableStreams(){console.log('(ReachSDK::room['+roomId+']::_getAvailableStreams)');return mAvailableStreams}function _getAvailableStream(streamId){console.log('(ReachSDK::room['+roomId+']::_getAvailableStream)streamId='+streamId);if(mAvailableStreams&&streamId){for(var i=mAvailableStreams.length-1;i>=0;i--){if(mAvailableStreams[i]&&(0,_keys2.default)(mAvailableStreams[i])[0]&&(0,_keys2.default)(mAvailableStreams[i])[0]===streamId){return mAvailableStreams[i]}}}return null}function _removeAllAvailableStreams(){console.log('(ReachSDK::room['+roomId+']::_removeAllAvailableStreams');mAvailableStreams=[]}function _muteAudioStream(streamId){if(!(streamId&&typeof streamId=='string')){console.error('(ReachSDK::room['+roomId+']::_muteAudioStream)parameter streamId is incorrect. Expecting non empty string');return}console.log('(ReachSDK::room['+roomId+']::_muteAudioStream)streamId='+streamId);if(!mMutedStreams[streamId]){mMutedStreams[streamId]={}}mMutedStreams[streamId].audio=true;if(roomWebrtcStacks){[roomWebrtcStacks[streamId+'_pub'],roomWebrtcStacks[streamId+'_sub']].forEach(function(stacks){if(stacks&&stacks.length>0){for(var i=stacks.length-1;i>=0;i--){webrtcmngr.muteAudioWebrtcStack(stacks[i].stackId)}}})}}function _unmuteAudioStream(streamId){if(!(streamId&&typeof streamId=='string')){console.error('(ReachSDK::room['+roomId+']::_unmuteAudioStream)parameter streamId is incorrect. Expecting non empty string');return}if(mMutedStreams[streamId]&&mMutedStreams[streamId].audio){mMutedStreams[streamId].audio=false}console.log('(ReachSDK::room['+roomId+']::_unmuteAudioStream)streamId='+streamId);if(roomWebrtcStacks){[roomWebrtcStacks[streamId+'_pub'],roomWebrtcStacks[streamId+'_sub']].forEach(function(stacks){if(stacks&&stacks.length>0){for(var i=stacks.length-1;i>=0;i--){webrtcmngr.unmuteAudioWebrtcStack(stacks[i].stackId)}}})}}function _muteVideoStream(streamId){if(!(streamId&&typeof streamId=='string')){console.error('(ReachSDK::room['+roomId+']::_muteVideoStream)parameter streamId is incorrect. Expecting non empty string');return}console.log('(ReachSDK::room['+roomId+']::_muteVideoStream)streamId='+streamId);if(!mMutedStreams[streamId]){mMutedStreams[streamId]={}}mMutedStreams[streamId].video=true;if(roomWebrtcStacks){[roomWebrtcStacks[streamId+'_pub'],roomWebrtcStacks[streamId+'_sub']].forEach(function(stacks){if(stacks&&stacks.length>0){for(var i=stacks.length-1;i>=0;i--){webrtcmngr.muteVideoWebrtcStack(stacks[i].stackId)}}})}}function _unmuteVideoStream(streamId){if(!(streamId&&typeof streamId=='string')){console.error('(ReachSDK::room['+roomId+']::_unmuteVideoStream)parameter streamId is incorrect. Expecting non empty string');return}if(mMutedStreams[streamId]&&mMutedStreams[streamId].video){mMutedStreams[streamId].video=false}console.log('(ReachSDK::room['+roomId+']::_unmuteVideoStream)streamId='+streamId);if(roomWebrtcStacks){[roomWebrtcStacks[streamId+'_pub'],roomWebrtcStacks[streamId+'_sub']].forEach(function(stacks){if(stacks&&stacks.length>0){for(var i=stacks.length-1;i>=0;i--){webrtcmngr.unmuteVideoWebrtcStack(stacks[i].stackId)}}})}}function _close(updateRoomStatusToClose){console.log('(ReachSDK::room['+roomId+']::_close)room '+roomId+', detroyRoom='+updateRoomStatusToClose);var participantListRef=dataref.child('participantList'),publishedMediaListRef=dataref.child('publishedMediaList');participantListRef.child(me+'/connected').set(false);(0,_keys2.default)(mStreams).forEach(_unPublishStream);mStreams=[];if(instantMessageListCb){dataref.child('instantMessageList').off('child_added',instantMessageListCb);instantMessageListCb=null}if(publishedMediaListCb){publishedMediaListRef.off('child_added',publishedMediaListCb);publishedMediaListCb=null}if(publishedMediaListCbForAvailableStream){publishedMediaListRef.off('child_added',publishedMediaListCbForAvailableStream);publishedMediaListCbForAvailableStream=null}if(unPublishedMediaListCb){publishedMediaListRef.off('child_removed',unPublishedMediaListCb);unPublishedMediaListCb=null}if(unPublishedMediaListCbForAvailableStream){publishedMediaListRef.off('child_removed',unPublishedMediaListCbForAvailableStream);unPublishedMediaListCbForAvailableStream=null}if(participantListJoinAddedCb){participantListRef.off('child_added',participantListJoinAddedCb);participantListJoinAddedCb=null}if(participantListJoinChangedCb){participantListRef.off('child_changed',participantListJoinChangedCb);participantListJoinChangedCb=null}if(participantListLeaveCb){participantListRef.off('child_changed',participantListLeaveCb);participantListLeaveCb=null}if(remoteUnpublishedCb){publishedMediaListRef.off('child_removed',remoteUnpublishedCb);remoteUnpublishedCb=null}(0,_keys2.default)(roomWebrtcStacks).forEach(function(streamStacksId){roomWebrtcStacks[streamStacksId].forEach(function(stack){if(stack){webrtcmngr.closeWebrtc(stack.stackId,stack.isPublish);webrtcmngr.clearWebrtcStacks(stack.stackId)}})});roomWebrtcStacks={};mMutedStreams=[];_removeAllAvailableStreams();if(updateRoomStatusToClose&&updateRoomStatusToClose===true){dataref.child('commonDataList/status').set(ROOM_STATUS_CLOSE)}}init();return {getRoomId:_getRoomId,getMe:_getMe,setOnParticipantJoin:_setOnParticipantJoin,setOnParticipantLeave:_setOnParticipantLeave,sendInstantMessage:_sendInstantMessage,setOnInstantMessage:_setOnInstantMessage,publishStream:_publishStream,setOnPublishedStream:_setOnPublishedStream,unPublishStream:_unPublishStream,setOnUnPublishedStream:_setOnUnPublishedStream,subscribeToStream:_subscribeToStream,unSubscribeFromStream:_unSubscribeFromStream,getAvailableStreams:_getAvailableStreams,getAvailableStream:_getAvailableStream,muteAudioStream:_muteAudioStream,unmuteAudioStream:_unmuteAudioStream,muteVideoStream:_muteVideoStream,unmuteVideoStream:_unmuteVideoStream,close:_close,on:function on(evt,p_cb){switch(evt){case 'instantMessage':_setOnInstantMessage(p_cb);break;case 'publishedStream':_setOnPublishedStream(p_cb);break;case 'unPublishedStream':_setOnUnPublishedStream(p_cb);break;case 'participantJoin':_setOnParticipantJoin(p_cb);break;case 'participantLeave':_setOnParticipantLeave(p_cb);break;default:console.err('(ReachSDK::room['+roomId+']::on)unsupported '+evt+' event');break;}}}};var _keys=__webpack_require__(10),_keys2=_interopRequireDefault(_keys),_stringify=__webpack_require__(22),_stringify2=_interopRequireDefault(_stringify),_actions=__webpack_require__(7),_actions2=_interopRequireDefault(_actions),_localstream=__webpack_require__(26),_localstream2=_interopRequireDefault(_localstream),_utils=__webpack_require__(24),_utils2=_interopRequireDefault(_utils);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ROOM_STATUS_CLOSE='CLOSE';

/***/ },
/* 26 */
/***/ function(module, exports) {

	'use strict';Object.defineProperty(exports,'__esModule',{value:true});var localstream=(function(){var localVideoStreams=[],localAudioStreams=[],localAudioVideoStreams=[],streamVideo=null,streamAudio=null,streamAudioVideo=null,listenersVideo=[],listenersAudio=[],listenersAudioVideo=[],mLocalStreamVideo=null,mLocalStreamAudio=null,mLocalStreamAudioVideo=null,initVideoProgress=false,initAudioProgress=false,initAudioVideoProgress=false;function _initVideo(callback){console.log('(ReachSDK::localstream::initVideo)');if(!initVideoProgress){initVideoProgress=true;navigator.getMedia=getUserMedia;mLocalStreamVideo=document.createElement('VIDEO');mLocalStreamVideo.muted=true;localVideoStreams.push(mLocalStreamVideo);if(streamVideo===null){navigator.getMedia({audio:false,video:true},function(s){streamVideo=s;localVideoStreams.forEach(function(localVideoStream){attachMediaStream(localVideoStream,streamVideo)});localVideoStreams=[];listenersVideo.forEach(function(listenerVideo){listenerVideo(streamVideo)});listenersVideo=[];initVideoProgress=false;if(callback){callback()}},function(error){console.error('Error on webrtcLocalStream - webkitGetUserMedia : error=');console.dir(error);initVideoProgress=false;if(callback){callback(error)}})}else {localVideoStreams.forEach(function(localVideoStream){attachMediaStream(localVideoStream,streamVideo)});localVideoStreams=[];listenersVideo.forEach(function(listenerVideo){listenerVideo(streamVideo)});listenersVideo=[];initVideoProgress=false}}}function _initAudio(callback){console.log('(ReachSDK::localstream::initAudio)');if(!initAudioProgress){initAudioProgress=true;navigator.getMedia=getUserMedia;mLocalStreamAudio=document.createElement('AUDIO');mLocalStreamAudio.muted=true;localAudioStreams.push(mLocalStreamAudio);if(streamAudio===null){navigator.getMedia({audio:true,video:false},function(s){streamAudio=s;localAudioStreams.forEach(function(localAudioStream){attachMediaStream(localAudioStream,streamAudio)});localAudioStreams=[];listenersAudio.forEach(function(listenerAudio){listenerAudio(streamAudio)});listenersAudio=[];initAudioProgress=false;if(callback){callback()}},function(error){console.error('Error on webrtcLocalStream - webkitGetUserMedia :error=');console.dir(error);initAudioProgress=false;if(callback){callback(error)}})}else {localAudioStreams.forEach(function(localAudioStream){attachMediaStream(localAudioStream,streamAudio)});localAudioStreams=[];listenersAudio.forEach(function(listenerAudio){listenerAudio(streamAudio)});listenersAudio=[];initAudioProgress=false}}}function _initAudioVideo(callback){console.log('(ReachSDK::localstream::initAudioVideo)');if(!initAudioVideoProgress){initAudioVideoProgress=true;navigator.getMedia=getUserMedia;mLocalStreamAudioVideo=document.createElement('AUDIOVIDEO');mLocalStreamAudioVideo.muted=true;localAudioVideoStreams.push(mLocalStreamAudioVideo);if(streamAudioVideo===null){navigator.getMedia({audio:true,video:true},function(s){streamAudioVideo=s;localAudioVideoStreams.forEach(function(localAudioVideoStream){attachMediaStream(localAudioVideoStream,streamAudioVideo)});localAudioVideoStreams=[];listenersAudioVideo.forEach(function(listenerAudioVideo){listenerAudioVideo(streamAudioVideo)});listenersAudioVideo=[];initAudioVideoProgress=false;if(callback){callback()}},function(error){console.error('(ReachSDK::localstream::initAudioVideo::Error on webrtcLocalStream - webkitGetUserMedia : error=');console.dir(error);initAudioVideoProgress=false;if(callback){callback(error)}})}else {localAudioVideoStreams.forEach(function(localAudioVideoStream){attachMediaStream(localAudioVideoStream,streamAudioVideo)});localAudioVideoStreams=[];listenersAudioVideo.forEach(function(listenerAudioVideo){listenerAudioVideo(streamAudioVideo)});listenersAudioVideo=[];initAudioVideoProgress=false}}}function _close(){console.log('(ReachSDK::localstream::close)');if(mLocalStreamVideo){detachMediaStream(mLocalStreamVideo);mLocalStreamVideo=null}if(streamAudioVideo){streamAudioVideo.stop();streamAudioVideo=null}if(streamVideo){streamVideo.stop();streamVideo=null}initVideoProgress=false;if(mLocalStreamAudio){detachMediaStream(mLocalStreamAudio);mLocalStreamAudio=null}if(streamAudio){streamAudio.stop();streamAudio=null}initAudioProgress=false;if(mLocalStreamAudioVideo){detachMediaStream(mLocalStreamAudioVideo);mLocalStreamAudioVideo=null}if(streamAudioVideo){streamAudioVideo.stop();streamAudioVideo=null}initAudioVideoProgress=false}return {getVideoStream:function getVideoStream(){return streamVideo},addVideoListener:function addVideoListener(cb){listenersVideo.push(cb)},initVideo:function initVideo(){_initVideo()},connectLocalVideoStream:function connectLocalVideoStream(videoElt,publishStreamCb,getLocalStreamCb){if(videoElt){videoElt.muted=true;if(streamVideo){console.log('(ReachSDK::localstream::connectLocalVideoStream)use existing streamVideo');attachMediaStream(videoElt,streamVideo);if(getLocalStreamCb&&typeof getLocalStreamCb=='function'){getLocalStreamCb(streamVideo)}}else {localVideoStreams.push(videoElt);if(getLocalStreamCb&&typeof getLocalStreamCb=='function'){listenersVideo.push(getLocalStreamCb)}_initVideo(publishStreamCb)}}else {if(!streamVideo){if(getLocalStreamCb&&typeof getLocalStreamCb=='function'){listenersVideo.push(getLocalStreamCb)}_initVideo(publishStreamCb)}else {if(getLocalStreamCb&&typeof getLocalStreamCb=='function'){getLocalStreamCb(streamVideo)}}}},getAudioStream:function getAudioStream(){return streamAudio},addAudioListener:function addAudioListener(cb){listenersAudio.push(cb)},initAudio:function initAudio(){_initAudio()},connectLocalAudioStream:function connectLocalAudioStream(AudioElt,publishStreamCb,getLocalStreamCb){if(AudioElt){AudioElt.muted=true;if(streamAudio){console.log('(ReachSDK::localstream::connectLocalAudioStream)use existing streamAudio');attachMediaStream(AudioElt,streamAudio);if(getLocalStreamCb&&typeof getLocalStreamCb=='function'){getLocalStreamCb(streamAudio)}}else {localAudioStreams.push(AudioElt);if(getLocalStreamCb&&typeof getLocalStreamCb=='function'){listenersAudio.push(getLocalStreamCb)}_initAudio(publishStreamCb)}}else {if(!streamAudio){if(getLocalStreamCb&&typeof getLocalStreamCb=='function'){listenersAudio.push(getLocalStreamCb)}_initAudio(publishStreamCb)}else {if(getLocalStreamCb&&typeof getLocalStreamCb=='function'){getLocalStreamCb(streamAudio)}}}},getAudioVideoStream:function getAudioVideoStream(){return streamAudioVideo},addAudioVideoListener:function addAudioVideoListener(cb){listenersAudioVideo.push(cb)},initAudioVideo:function initAudioVideo(){_initAudioVideo()},connectLocalAudioVideoStream:function connectLocalAudioVideoStream(AudioVideoElt,publishStreamCb,getLocalStreamCb){if(AudioVideoElt){AudioVideoElt.muted=true;if(streamAudioVideo){console.log('(ReachSDK::localstream::connectLocalAudioVideoStream)use existing streamAudioVideo');attachMediaStream(AudioVideoElt,streamAudioVideo);if(getLocalStreamCb){getLocalStreamCb(streamAudioVideo)}}else {localAudioVideoStreams.push(AudioVideoElt);if(getLocalStreamCb&&typeof getLocalStreamCb=='function'){listenersAudioVideo.push(getLocalStreamCb)}_initAudioVideo(publishStreamCb)}}else {if(!streamAudioVideo){if(getLocalStreamCb&&typeof getLocalStreamCb=='function'){listenersAudioVideo.push(getLocalStreamCb)}_initAudioVideo(publishStreamCb)}else {if(getLocalStreamCb){getLocalStreamCb(streamAudioVideo)}}}},close:function close(){_close()}}})();exports.default=localstream;

/***/ },
/* 27 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _utils=__webpack_require__(24),_utils2=_interopRequireDefault(_utils),_webrtc=__webpack_require__(28),_webrtc2=_interopRequireDefault(_webrtc),_localstream=__webpack_require__(26),_localstream2=_interopRequireDefault(_localstream);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var webrtcmngr=function webrtcmngr(datarefs){var _this=this,webrtcStacks=[],virtualWebrtcStacks=[];function _createWebrtc(p_Vid,p_remoteAppInstId,p_onCloseCb,p_isPublish,p_actionType,p_peercoId,p_peercoRef,p_mutedAudio,p_muteVideo,p_getStreamCb){var webrtcStackId=p_peercoId,localDataRef=datarefs.getWebrtc().child(p_peercoRef+'/'+_utils2.default.appInstanceId),remoteDataRef=datarefs.getWebrtc().child(p_peercoRef+'/'+p_remoteAppInstId),virtualWebrtcStack=undefined;if(p_isPublish){virtualWebrtcStack={webRtcStackId:webrtcStackId,localVid:p_Vid}}else {virtualWebrtcStack={webRtcStackId:webrtcStackId,remoteVid:p_Vid}}var id=virtualWebrtcStacks.push(virtualWebrtcStack)-1;if(!webrtcStacks[webrtcStackId]){console.debug('ReachSDK::webrtcmngr::createWebrtc->create a new real webrtcStack');var webRtcStack=(0,_webrtc2.default)(this,p_isPublish,localDataRef,remoteDataRef,webrtcStackId,p_actionType,p_mutedAudio,p_muteVideo);webRtcStack.setOnClose(p_onCloseCb);if(p_isPublish){webrtcStacks[webrtcStackId]={stack:webRtcStack,isPublished:1,isSubscribed:0};webRtcStack.connectLocalStream(p_Vid,p_getStreamCb)}else {webrtcStacks[webrtcStackId]={stack:webRtcStack,isPublished:0,isSubscribed:1};webRtcStack.connectRemoteStream(p_Vid,p_getStreamCb)}}else {console.debug('ReachSDK::webrtcmngr::createWebrtc->use existing real webrtcStack');if(p_isPublish){webrtcStacks[webrtcStackId].isPublished++;webrtcStacks[webrtcStackId].stack.connectLocalStream(p_Vid,p_getStreamCb)}else {webrtcStacks[webrtcStackId].isSubscribed++;webrtcStacks[webrtcStackId].stack.connectRemoteStream(p_Vid,p_getStreamCb)}}console.debug('ReachSDK::webrtcmngr::createWebrtc->webrtcStack:'+webrtcStackId+' new isPublished count ='+webrtcStacks[webrtcStackId].isPublished+' new isSubscribed count ='+webrtcStacks[webrtcStackId].isSubscribed);return id}function _closeWebrtc(id,p_isUnPublish,callback){console.debug('ReachSDK::webrtcmngr::closeWebrtc->id='+id);if(!virtualWebrtcStacks[id]){console.warn('ReachSDK::webrtcmngr::closeWebrtc: virtualstack '+id+' not found');if(callback&&typeof callback=='function'){callback()}return false}var webrtcStackId=virtualWebrtcStacks[id].webRtcStackId;if(webrtcStackId&&webrtcStacks[webrtcStackId]){if(p_isUnPublish&&webrtcStacks[webrtcStackId].isPublished>0){webrtcStacks[webrtcStackId].isPublished--}else if(!p_isUnPublish&&webrtcStacks[webrtcStackId].isSubscribed>0){webrtcStacks[webrtcStackId].isSubscribed--}if(webrtcStacks[webrtcStackId].isPublished<1&&webrtcStacks[webrtcStackId].isSubscribed<1){console.debug('ReachSDK::webrtcmngr::closeWebrtc->destroy  real webrtcStack:'+webrtcStackId);webrtcStacks[webrtcStackId].stack.close(callback);webrtcStacks[webrtcStackId]=null}else {console.debug('ReachSDK::webrtcmngr::closeWebrtc->decrement  real webrtcStack:'+webrtcStackId+' new isPublished count ='+webrtcStacks[webrtcStackId].isPublished+' new isSubscribed count ='+webrtcStacks[webrtcStackId].isSubscribed);if(callback&&typeof callback=='function'){callback()}}}else {if(callback&&typeof callback=='function'){callback()}console.warn('ReachSDK::webrtcmngr::closeWebrtc cannot found real stack')}if(virtualWebrtcStacks[id].localVid){_localstream2.default.close();detachMediaStream(virtualWebrtcStacks[id].localVid)}if(virtualWebrtcStacks[id].remoteVid){detachMediaStream(virtualWebrtcStacks[id].remoteVid)}return true}function _clearWebrtcStacks(webrtcStackId){console.debug('ReachSDK::webrtcmngr::clearWebrtcStacks id='+webrtcStackId);if(webrtcStackId&&webrtcStacks&&webrtcStacks[webrtcStackId]){webrtcStacks[webrtcStackId]=null}return true}function _muteAudioWebrtcStack(virtualWebrtcStackId){console.log('(ReachSDK::webrtcmngr::muteAudioWebrtcStack) virtualWebrtcStackId='+virtualWebrtcStackId);if(virtualWebrtcStacks&&virtualWebrtcStacks[virtualWebrtcStackId]&&virtualWebrtcStacks[virtualWebrtcStackId].webRtcStackId){var webRtcStackId=virtualWebrtcStacks[virtualWebrtcStackId].webRtcStackId;console.log('(ReachSDK::webrtcmngr::muteAudioWebrtcStack) virtualWebrtcStackId='+virtualWebrtcStackId+' webRtcStackId='+webRtcStackId);if(webrtcStacks&&webrtcStacks[webRtcStackId]&&webrtcStacks[webRtcStackId].stack){webrtcStacks[webRtcStackId].stack.muteAudio()}else {console.warn('(ReachSDK::webrtcmngr::muteAudioWebrtcStack) webrtcStack='+webRtcStackId+' not found')}}else {console.warn('(ReachSDK::webrtcmngr::muteAudioWebrtcStack) virtualWebrtcStackId='+virtualWebrtcStackId+' not found')}}function _unmuteAudioWebrtcStack(virtualWebrtcStackId){console.log('(ReachSDK::webrtcmngr::_unmuteAudioWebrtcStack) virtualWebrtcStackId='+virtualWebrtcStackId);if(virtualWebrtcStacks&&virtualWebrtcStacks[virtualWebrtcStackId]&&virtualWebrtcStacks[virtualWebrtcStackId].webRtcStackId){var webRtcStackId=virtualWebrtcStacks[virtualWebrtcStackId].webRtcStackId;console.log('(ReachSDK::webrtcmngr::_unmuteAudioWebrtcStack) virtualWebrtcStackId='+virtualWebrtcStackId+',webRtcStackId='+webRtcStackId);if(webrtcStacks&&webrtcStacks[webRtcStackId]&&webrtcStacks[webRtcStackId].stack){webrtcStacks[webRtcStackId].stack.unmuteAudio()}else {console.warn('(ReachSDK::webrtcmngr::_unmuteAudioWebrtcStack) webrtcStack='+webRtcStackId+' not found')}}else {console.warn('(ReachSDK::webrtcmngr::_unmuteAudioWebrtcStack) virtualWebrtcStackId='+virtualWebrtcStackId+' not found')}}function _muteVideoWebrtcStack(virtualWebrtcStackId){console.log('(ReachSDK::webrtcmngr::muteAudioWebrtcStack) virtualWebrtcStackId='+virtualWebrtcStackId);if(virtualWebrtcStacks&&virtualWebrtcStacks[virtualWebrtcStackId]&&virtualWebrtcStacks[virtualWebrtcStackId].webRtcStackId){var webRtcStackId=virtualWebrtcStacks[virtualWebrtcStackId].webRtcStackId;console.log('(ReachSDK::webrtcmngr::muteAudioWebrtcStack) virtualWebrtcStackId='+virtualWebrtcStackId+' webRtcStackId='+webRtcStackId);if(webrtcStacks&&webrtcStacks[webRtcStackId]&&webrtcStacks[webRtcStackId].stack){webrtcStacks[webRtcStackId].stack.muteVideo()}else {console.warn('(ReachSDK::webrtcmngr::muteAudioWebrtcStack) webrtcStack='+webRtcStackId+' not found')}}else {console.warn('(ReachSDK::webrtcmngr::muteAudioWebrtcStack) virtualWebrtcStackId='+virtualWebrtcStackId+' not found')}}function _unmuteVideoWebrtcStack(virtualWebrtcStackId){console.log('(ReachSDK::webrtcmngr::_unmuteAudioWebrtcStack) virtualWebrtcStackId='+virtualWebrtcStackId);if(virtualWebrtcStacks&&virtualWebrtcStacks[virtualWebrtcStackId]&&virtualWebrtcStacks[virtualWebrtcStackId].webRtcStackId){var webRtcStackId=virtualWebrtcStacks[virtualWebrtcStackId].webRtcStackId;console.log('(ReachSDK::webrtcmngr::_unmuteAudioWebrtcStack) virtualWebrtcStackId='+virtualWebrtcStackId+', webRtcStackId='+webRtcStackId);if(webrtcStacks&&webrtcStacks[webRtcStackId]&&webrtcStacks[webRtcStackId].stack){webrtcStacks[webRtcStackId].stack.unmuteVideo()}else {console.warn('(ReachSDK::webrtcmngr::_unmuteAudioWebrtcStack) webrtcStack='+webRtcStackId+' not found')}}else {console.warn('(ReachSDK::webrtcmngr::_unmuteAudioWebrtcStack) virtualWebrtcStackId='+virtualWebrtcStackId+' not found')}}return {createWebrtc:function createWebrtc(p_Vid,p_remoteAppInstId,p_onCloseCb,p_isPublish,p_actionType,p_peercoId,p_mutedAudio,p_muteVideo,p_getStreamCb){return _createWebrtc.bind(_this)(p_Vid,p_remoteAppInstId,p_onCloseCb,p_isPublish,p_actionType,p_peercoId,p_mutedAudio,p_muteVideo,p_getStreamCb)},closeWebrtc:_closeWebrtc,clearWebrtcStacks:_clearWebrtcStacks,muteAudioWebrtcStack:_muteAudioWebrtcStack,unmuteAudioWebrtcStack:_unmuteAudioWebrtcStack,muteVideoWebrtcStack:_muteVideoWebrtcStack,unmuteVideoWebrtcStack:_unmuteVideoWebrtcStack}};exports.default=webrtcmngr;

/***/ },
/* 28 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _stringify=__webpack_require__(22),_stringify2=_interopRequireDefault(_stringify),_actions=__webpack_require__(7),_actions2=_interopRequireDefault(_actions),_localstream=__webpack_require__(26),_localstream2=_interopRequireDefault(_localstream);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ICE_CONNECTION_STATE_DISCONNECTED='disconnected',ICE_CONNECTION_STATE_CONNECTED='connected',ICE_CONNECTION_STATE_COMPLETED='completed',ICE_CONNECTION_STATE_CHECKING='checking',ICE_CONNECTION_STATE_CLOSED='closed',ICE_CONNECTION_STATE_FAILED='failed',ICE_CONNECTION_STATE_OTHER='other',DEFAULT_ICE_CONFIG={iceServers:[{url:'turns:turn1.webcom.orange.com:443',username:'admin',credential:'webcom1234'},{url:'turn:turn2.webcom.orange.com:443',username:'admin',credential:'webcom1234'},{url:'turns:turn3.webcom.orange.com:443',username:'admin',credential:'webcom1234'}]},webrtc=function webrtc(p_webrtcmngr,p_isPublish,p_localDataRef,p_remoteDataRef,p_webrtcStackId,p_actionType,p_muteAudio,p_muteVideo){var webrtcmngr=p_webrtcmngr,stackId=new Date().getTime(),isPublish=p_isPublish,pc=null,localDataRef=p_localDataRef,remoteDataRef=p_remoteDataRef,iceCandidatesListCb=null,sdpOfferCb=null,sdpAnswerCb=null,remotedatarefCb=null,onCloseCb=null,webrtcStackId=p_webrtcStackId,actionType=p_actionType,config=null,myPeerConnection=null,myRTCSessionDescription=null,myRTCIceCandidate=null,localStreams=[],remoteStreams=[],remoteStreamsCb=[],receivedStream=null,sentStream=null,isClosed=false,closeInProgress=false,iceConnectionState=null,onCloseCb2=null,isAudioMute=false,isVideoMute=false;console.log('(ReachSDK::webrtc::)stackId=${stackId} isPublish=${isPublish},localDataRef=${localDataRef},remoteDataRef=${remoteDataRef})');var DtlsSrtpKeyAgreement={DtlsSrtpKeyAgreement:true},optional={optional:[DtlsSrtpKeyAgreement]},publisherMediaConstraints={mandatory:{OfferToReceiveAudio:false,OfferToReceiveVideo:false}},subscriberMediaConstraints={mandatory:{OfferToReceiveAudio:true,OfferToReceiveVideo:true}};function onError(e){console.log('(ReachSDK::webrtc::)stackId='+stackId+'error='+e);console.dir(e)}function getIceServersConfigFromServer(callbackOk,callbackKo){console.log('ReachSDK::webrtc::getIceServersConfigFromServer');if(localDataRef){localDataRef.root().child('config').once('value',function(snapshot){var _config=snapshot?snapshot.val():null;if(_config){if(typeof callbackOk=='function'){callbackOk(_config)}}else if(typeof callbackKo=='function'){callbackKo()}},function(error){if(typeof callbackKo=='function'){callbackKo(error)}})}else if(typeof callbackKo=='function'){callbackKo()}}function startListeningToRemoteIceCandidate(){remoteDataRef.child('iceCandidatesList').on('child_added',iceCandidatesListCb)}function stopListeningToRemoteIceCandidate(){remoteDataRef.child('iceCandidatesList').off('child_added',iceCandidatesListCb)}function _muteTracks(enabled,tracks){if(tracks){tracks.forEach(function(track){if(track){track.enabled=enabled}})}}function _muteAudioTracks(mute){isAudioMute=mute;var stream=isPublish&&sentStream?sentStream:!isPublish&&receivedStream?receivedStream:null;if(stream){_muteTracks(!isAudioMute,stream.getAudioTracks())}}function _muteAudio(){console.log('(ReachSDK::webrtc::_muteAudio)stackId='+stackId);_muteAudioTracks(true)}function _unmuteAudio(){console.log('(ReachSDK::webrtc::_unmuteAudio)stackId='+stackId);_muteAudioTracks(false)}function _muteVideoTracks(mute){isVideoMute=mute;var stream=isPublish&&sentStream?sentStream:!isPublish&&receivedStream?receivedStream:null;if(stream){_muteTracks(!isAudioMute,stream.getVideoTracks())}}function _muteVideo(){console.log('(ReachSDK::webrtc::_muteVideo)stackId='+stackId);_muteVideoTracks(true)}function _unmuteVideo(){console.log('(ReachSDK::webrtc::_unmuteVideo)stackId='+stackId);_muteVideoTracks(false)}function _initlocalStream(callback){console.log('(ReachSDK::webrtc::_initlocalStream)stackId='+stackId+' get local video stream and renders to local video');if(actionType){var initlocalStream=undefined;if(actionType===_actions2.default.ACTION_TYPE_VIDEO){initlocalStream=function(){console.log('(ReachSDK::webrtc::_initlocalStream)initlocalStream_video');if(_localstream2.default.getVideoStream()&&_localstream2.default.getVideoStream().clone&&typeof _localstream2.default.getVideoStream().clone=='function'){sentStream=_localstream2.default.getVideoStream().clone()}else {sentStream=_localstream2.default.getVideoStream()}if(isAudioMute){_muteAudio()}if(isVideoMute){_muteVideo()}pc.addStream(sentStream);for(var i=0;i<localStreams.length;i++){console.log('(ReachSDK::webrtc::_initlocalStream)stackId='+stackId+' rendering local video to '+localStreams[i].id);attachMediaStream(localStreams[i],_localstream2.default.getVideoStream())}if(callback&&typeof callback=='function'){callback()}};if(_localstream2.default.getVideoStream()){initlocalStream()}else {_localstream2.default.addVideoListener(initlocalStream);_localstream2.default.initVideo()}}else if(actionType===_actions2.default.ACTION_TYPE_AUDIO){initlocalStream=function(){console.log('(ReachSDK::webrtc::_initlocalStream)initlocalStream_audio');if(_localstream2.default.getAudioStream()&&_localstream2.default.getAudioStream().clone&&typeof _localstream2.default.getAudioStream().clone=='function'){sentStream=_localstream2.default.getAudioStream().clone()}else {sentStream=_localstream2.default.getAudioStream()}if(isAudioMute){_muteAudio()}if(isVideoMute){_muteVideo()}pc.addStream(sentStream);for(var i=0;i<localStreams.length;i++){console.log('(ReachSDK::webrtc::_initlocalStream)stackId='+stackId+' rendering local Audio to '+localStreams[i].id);attachMediaStream(localStreams[i],_localstream2.default.getAudioStream())}if(callback&&typeof callback=='function'){callback()}};if(_localstream2.default.getAudioStream()){initlocalStream()}else {_localstream2.default.addAudioListener(initlocalStream);_localstream2.default.initAudio()}}else if(actionType===_actions2.default.ACTION_TYPE_AUDIO_VIDEO){initlocalStream=function(){console.log('(ReachSDK::webrtc::_initlocalStream)initlocalStream_audio_video');if(_localstream2.default.getAudioVideoStream()&&_localstream2.default.getAudioVideoStream().clone&&typeof _localstream2.default.getAudioVideoStream().clone=='function'){sentStream=_localstream2.default.getAudioVideoStream().clone()}else {sentStream=_localstream2.default.getAudioVideoStream()}if(isAudioMute){_muteAudio()}if(isVideoMute){_muteVideo()}pc.addStream(sentStream);for(var i=0;i<localStreams.length;i++){console.log('(ReachSDK::webrtc::_initlocalStream)stackId='+stackId+' rendering local AudioVideo to '+localStreams[i].id);attachMediaStream(localStreams[i],_localstream2.default.getAudioVideoStream())}if(callback&&typeof callback=='function'){callback()}};if(_localstream2.default.getAudioVideoStream()){initlocalStream()}else {_localstream2.default.addAudioVideoListener(initlocalStream);_localstream2.default.initAudioVideo()}}}else {console.warn('(ReachSDK::webrtc::_initlocalStream)no actionType specified')}}function _initSdpCallbacks(){console.debug('(ReachSDK::webrtc::_initSdpCallbacks)stackId='+stackId);if(isPublish){if(sdpOfferCb){remoteDataRef.off('child_added',sdpOfferCb)}sdpAnswerCb=function(snapshot){if(!isClosed&&snapshot.name()==='sdpAnswer'){var data=snapshot.val();console.debug('(ReachSDK::webrtc::sdpAnswerCb)stackId='+stackId+'-received sdpAnswer: '+(0,_stringify2.default)(data));pc.setRemoteDescription(new myRTCSessionDescription(data),function(){console.debug('(ReachSDK::webrtc::sdpAnswerCb)stackId='+stackId+'-remote description set');startListeningToRemoteIceCandidate()},onError);remoteDataRef.off('child_added',sdpAnswerCb)}};remoteDataRef.on('child_added',sdpAnswerCb)}else {if(sdpAnswerCb){remoteDataRef.off('child_added',sdpAnswerCb)}sdpOfferCb=function(snapshot){if(!isClosed&&snapshot.name()==='sdpOffer'){var data=snapshot.val();console.debug('(ReachSDK::webrtc::sdpOfferCb)stackId='+stackId+'-received sdpOffer: '+(0,_stringify2.default)(data));pc.setRemoteDescription(new myRTCSessionDescription(data),function(){pc.createAnswer(function(description){console.log('(ReachSDK::webrtc::sdpOfferCb)stackId='+stackId+'-sending answer');pc.setLocalDescription(description,function(){console.debug('(ReachSDK::webrtc::sdpOfferCb)stackId='+stackId+'-set sdpAnswer in base : '+(0,_stringify2.default)(description));localDataRef.child('sdpAnswer').set(JSON.parse((0,_stringify2.default)(description)));startListeningToRemoteIceCandidate()},onError)},onError,subscriberMediaConstraints)},onError);remoteDataRef.off('child_added',sdpOfferCb)}};remoteDataRef.on('child_added',sdpOfferCb)}}function _closeSdpCallbacks(){if(sdpAnswerCb){remoteDataRef.off('child_added',sdpAnswerCb);sdpAnswerCb=null}if(sdpOfferCb){remoteDataRef.off('child_added',sdpOfferCb);sdpOfferCb=null}}function sendOffer(){console.log('(webrtc::sendOffer)stackid='+stackId+'-creating sdpOffer');pc.createOffer(function(description){pc.setLocalDescription(description,function(){console.debug('(ReachSDK::webrtc::createOffer)stackId='+stackId+'-set sdpOffer in base : '+(0,_stringify2.default)(description));localDataRef.child('sdpOffer').set(JSON.parse((0,_stringify2.default)(description)))},onError)},onError,publisherMediaConstraints)}function _close(callback){if(!closeInProgress&&!isClosed){closeInProgress=true;onCloseCb2=callback;console.debug('(ReachSDK::webrtc::_close)stackId='+stackId+'-closing webrtc stack');if(pc){pc.close()}if(remotedatarefCb){remoteDataRef.off('child_added',remotedatarefCb);remotedatarefCb=null}if(iceCandidatesListCb){stopListeningToRemoteIceCandidate();iceCandidatesListCb=null}_closeSdpCallbacks();for(var i=0;i<localStreams.length;i++){if(localStreams[i]){detachMediaStream(localStreams[i]);console.debug('(ReachSDK::webrtc::_close)stackId='+stackId+'-stopping local video to '+localStreams[i].id)}}for(var j=0;j<remoteStreams.length;j++){if(remoteStreams[j]){detachMediaStream(remoteStreams[j]);console.debug('(ReachSDK::webrtc::_close)stackId='+stackId+'-stopping remote vid to '+remoteStreams[j].id)}}isClosed=true;console.debug('(ReachSDK::webrtc::_close)stackId='+stackId+'-closing webrtc stack -> waiting for ICE_CONNECTION_STATE_DISCONNECTED');if(isClosed&&(iceConnectionState===ICE_CONNECTION_STATE_DISCONNECTED||iceConnectionState===ICE_CONNECTION_STATE_CLOSED||iceConnectionState===ICE_CONNECTION_STATE_FAILED)){console.debug('(ReachSDK::webrtc::_close)stackId='+stackId+'-closed webrtc stack complete');pc=null;closeInProgress=false;webrtcmngr.clearWebrtcStacks(webrtcStackId);if(onCloseCb2&&typeof onCloseCb2=='function'){onCloseCb2()}}}else {console.debug('(ReachSDK::webrtc::_close)stackId='+stackId+'-closing webrtc stack already in progress')}}function _connectLocalStream(videoElt,getStreamCb){if(actionType){if(actionType===_actions2.default.ACTION_TYPE_VIDEO){_localstream2.default.connectLocalVideoStream(videoElt,getStreamCb)}else if(actionType===_actions2.default.ACTION_TYPE_AUDIO){_localstream2.default.connectLocalAudioStream(videoElt,getStreamCb)}else if(actionType===_actions2.default.ACTION_TYPE_AUDIO_VIDEO){_localstream2.default.connectLocalAudioVideoStream(videoElt,getStreamCb)}}}function _connectRemoteStream(videoElt,getStreamCb){if(videoElt){if(receivedStream){attachMediaStream(videoElt,receivedStream);if(getStreamCb&&typeof getStreamCb=='function'){getStreamCb(receivedStream)}}else {remoteStreams.push(videoElt);if(getStreamCb&&typeof getStreamCb=='function'){remoteStreamsCb.push(getStreamCb)}}}else {if(receivedStream){if(getStreamCb&&typeof getStreamCb=='function'){getStreamCb(receivedStream)}}else {if(getStreamCb&&typeof getStreamCb=='function'){remoteStreamsCb.push(getStreamCb)}}}}function init_pc(){console.log('(ReachSDK::webrtc::init_pc)stackId='+stackId+'_config=',(0,_stringify2.default)(config));pc=new myPeerConnection(config,optional);pc.onicecandidate=function(e){if(e.candidate){console.log('(ReachSDK::webrtc::pc.onicecandidate)stackId='+stackId+' send ice candidate='+(0,_stringify2.default)(e.candidate));localDataRef.child('iceCandidatesList').push({label:e.candidate.sdpMLineIndex,id:e.candidate.sdpMid,candidate:e.candidate.candidate})}};pc.onaddstream=function(e){console.debug('(ReachSDK::webrtc::onaddstream)stackId='+stackId+'-stream:'+(0,_stringify2.default)(e.stream));if(e&&e.stream){receivedStream=e.stream;if(isAudioMute){_muteAudio()}if(isVideoMute){_muteVideo()}}};pc.oniceconnectionstatechange=function(){if(!!pc&&pc.iceConnectionState===ICE_CONNECTION_STATE_CHECKING){console.debug('(ReachSDK::webrtc::oniceconnectionstatechange)stackId='+stackId+'-checking');iceConnectionState=ICE_CONNECTION_STATE_CHECKING}else if(!!pc&&pc.iceConnectionState===ICE_CONNECTION_STATE_CONNECTED){iceConnectionState=ICE_CONNECTION_STATE_CONNECTED;console.debug('(ReachSDK::webrtc::oniceconnectionstatechange)stackId='+stackId+'-connected');if(receivedStream){remoteStreams.forEach(function(remoteStream){if(remoteStream){console.debug('(ReachSDK::webrtc::onaddstream)pc.onaddstream stackId='+stackId+'-rendering remote vid to '+remoteStream.id);attachMediaStream(remoteStream,receivedStream)}});remoteStreamsCb.forEach(function(remoteStreamCb){if(remoteStreamCb){remoteStreamCb(receivedStream)}});remoteStreamsCb=[]}stopListeningToRemoteIceCandidate()}else if(!!pc&&pc.iceConnectionState===ICE_CONNECTION_STATE_COMPLETED){iceConnectionState=ICE_CONNECTION_STATE_COMPLETED;console.debug('(ReachSDK::webrtc::oniceconnectionstatechange)stackId='+stackId+'-'+ICE_CONNECTION_STATE_COMPLETED);stopListeningToRemoteIceCandidate()}if(!!pc&&pc.iceConnectionState===ICE_CONNECTION_STATE_DISCONNECTED){iceConnectionState=ICE_CONNECTION_STATE_DISCONNECTED;console.log('(ReachSDK::webrtc::oniceconnectionstatechange)stackId='+stackId+'-remote disconnection, closing peer connection');_close()}else if(!!pc&&pc.iceConnectionState===ICE_CONNECTION_STATE_CLOSED){console.debug('(ReachSDK::webrtc::oniceconnectionstatechange)stackId='+stackId+'-closed');iceConnectionState=ICE_CONNECTION_STATE_CLOSED;_close()}else if(!!pc&&pc.iceConnectionState===ICE_CONNECTION_STATE_FAILED){console.debug('(ReachSDK::webrtc::oniceconnectionstatechange)stackId='+stackId+'-failed');iceConnectionState=ICE_CONNECTION_STATE_FAILED;_close()}else {if(pc){console.debug('(ReachSDK::webrtc::oniceconnectionstatechange)stackId='+stackId+'-'+pc.iceConnectionState)}else {console.debug('(ReachSDK::webrtc::oniceconnectionstatechange)stackId='+stackId+'-pc = null')}iceConnectionState=ICE_CONNECTION_STATE_OTHER}if(isClosed&&(iceConnectionState===ICE_CONNECTION_STATE_DISCONNECTED||iceConnectionState===ICE_CONNECTION_STATE_CLOSED||iceConnectionState===ICE_CONNECTION_STATE_FAILED)){console.debug('(ReachSDK::webrtc::_close)stackId='+stackId+'-closed webrtc stack complete');pc=null;closeInProgress=false;webrtcmngr.clearWebrtcStacks(webrtcStackId);if(onCloseCb&&typeof onCloseCb=='function'){onCloseCb()}if(onCloseCb2&&typeof onCloseCb2=='function'){onCloseCb2()}}};iceCandidatesListCb=function(snapshot){var data=snapshot.val(),candidate=new myRTCIceCandidate({sdpMLineIndex:data.label,candidate:data.candidate,sdpMid:data.id});console.log('(ReachSDK::webrtc::iceCandidatesListCb)stackId='+stackId+'received ice candidate='+(0,_stringify2.default)(candidate));pc.addIceCandidate(candidate)};if(isPublish){_initlocalStream(function(){_initSdpCallbacks();sendOffer()})}else {_initSdpCallbacks()}}(function(){console.log('(ReachSDK::webrtc::init)stackId='+stackId);if(typeof RTCPeerConnection==='function'){myPeerConnection=RTCPeerConnection}else {console.error('(ReachSDK::webrtc::init)stackId='+stackId+' error=Webrtc is not supported on this browser !');throw new Error('Webrtc is not supported on this browser !')}if(typeof RTCSessionDescription==='function'){myRTCSessionDescription=RTCSessionDescription}else {console.error('(ReachSDK::webrtc::init)stackId='+stackId+' error2=Webrtc is not supported on this browser !');throw new Error('Webrtc is not supported on this browser !')}if(typeof RTCIceCandidate==='function'){myRTCIceCandidate=RTCIceCandidate}else {console.error('(ReachSDK::webrtc::init)stackId='+stackId+' error3=Webrtc is not supported on this browser !');throw new Error('Webrtc is not supported on this browser !')}if(p_muteAudio){isAudioMute=true}if(p_muteVideo){isVideoMute=true}getIceServersConfigFromServer(function(_config){config=_config;console.log('(ReachSDK::webrtc::) use server config=',(0,_stringify2.default)(config));init_pc()},function(){if(typeof DEFAULT_ICE_CONFIG!=='undefined'){config=DEFAULT_ICE_CONFIG;console.log('(ReachSDK::webrtc::) use DEFAULT_ICE_CONFIG config=',(0,_stringify2.default)(config))}else {console.log('(ReachSDK::webrtc::) no ice  config')}init_pc()})})();return {setOnClose:function setOnClose(cb){onCloseCb=cb},close:function close(cb){console.debug('(ReachSDK::webrtc::_close)stackId='+stackId+'-close requested');_close(cb)},connectLocalStream:_connectLocalStream,connectRemoteStream:_connectRemoteStream,muteAudio:_muteAudio,unmuteAudio:_unmuteAudio,muteVideo:_muteVideo,unmuteVideo:_unmuteVideo}};exports.default=webrtc;

/***/ }
/******/ ])
});
;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBmODUxYTZkMjQ2NjA2N2QzYjVhMiIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9iYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2suanMiLCJ3ZWJwYWNrOi8vLy4vfi9iYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MuanMiLCJ3ZWJwYWNrOi8vLy4vfi9iYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2RlZmluZS1wcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly8vLi9+L2JhYmVsLXJ1bnRpbWUvfi9jb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly8vLi9+L2JhYmVsLXJ1bnRpbWUvfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmpzIiwid2VicGFjazovLy8uL3NyYy9hZGFwdGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9hY3Rpb25zLmpzIiwid2VicGFjazovLy8uL3NyYy9kYXRhcmVmcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVhY2guanMiLCJ3ZWJwYWNrOi8vLy4vfi9iYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9iYWJlbC1ydW50aW1lL34vY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzLmpzIiwid2VicGFjazovLy8uL34vYmFiZWwtcnVudGltZS9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cy5qcyIsIndlYnBhY2s6Ly8vLi9+L2JhYmVsLXJ1bnRpbWUvfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLnRvLW9iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2JhYmVsLXJ1bnRpbWUvfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmRlZmluZWQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9iYWJlbC1ydW50aW1lL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5vYmplY3Qtc2FwLmpzIiwid2VicGFjazovLy8uL34vYmFiZWwtcnVudGltZS9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuZXhwb3J0LmpzIiwid2VicGFjazovLy8uL34vYmFiZWwtcnVudGltZS9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL34vYmFiZWwtcnVudGltZS9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuY29yZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2JhYmVsLXJ1bnRpbWUvfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmN0eC5qcyIsIndlYnBhY2s6Ly8vLi9+L2JhYmVsLXJ1bnRpbWUvfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmEtZnVuY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9iYWJlbC1ydW50aW1lL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5mYWlscy5qcyIsIndlYnBhY2s6Ly8vLi9+L2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeS5qcyIsIndlYnBhY2s6Ly8vLi9+L2JhYmVsLXJ1bnRpbWUvfi9jb3JlLWpzL2xpYnJhcnkvZm4vanNvbi9zdHJpbmdpZnkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzLmpzIiwid2VicGFjazovLy8uL3NyYy9yb29tLmpzIiwid2VicGFjazovLy8uL3NyYy9sb2NhbHN0cmVhbS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvd2VicnRjbW5nci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvd2VicnRjLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELE87QUNW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LEtBQUssQ0FBRSxlQUFDLEVBQUUsQ0FBSyxDQUNkLE9BQU8sQ0FBQyxLQUFLLHNDQUFzQyxPQUFPLG9CQUFtQixDQUM3RSxNQUFNLENBQUMsRUFBRSxDQUFDLENBQ1YsQ0FPRCxrQkFBa0IsQ0FBRSxtQkFBbUIsQ0FNdkMsbUJBQW1CLENBQUUsb0JBQW9CLENBSXpDLFNBQVMsQ0FBRSxVQUFVLENBSXJCLFdBQVcsQ0FBRSxZQUFZLENBSXpCLFNBQVMsQ0FBRSxVQUFVLENBSXJCLFdBQVcsQ0FBRSxZQUFZLENBQ3pCLENBQ0QsQ0E1NEJ3RCxnQkE4NEIxQyxNQUFNLEMiLCJmaWxlIjoicmVhY2gtZGVidWcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJSZWFjaFwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJSZWFjaFwiXSA9IGZhY3RvcnkoKTtcbn0pKHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuIFxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHdlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvblxuICoqLyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogd2VicGFjay9ib290c3RyYXAgZjg1MWE2ZDI0NjYwNjdkM2I1YTJcbiAqKi8iLCIvLyBQb2x5ZmlsbHMgZm9yIFdlYlJUQ1xuXG5cbi8vIFRPRE8gMTlrIG1pbmlmaWVkLCB3ZSBjYW4gZG8gbGVzcyBtYXliZVxuLyogZXNsaW50IG5vLXVudXNlZC12YXJzOjAgKi9cbmltcG9ydCBhZGFwdGVyanMgZnJvbSAnLi9hZGFwdGVyJztcblxuaW1wb3J0IGFjdGlvbnMgZnJvbSAnLi9hY3Rpb25zJztcbmltcG9ydCBkYXRhcmVmcyBmcm9tICcuL2RhdGFyZWZzJztcbmltcG9ydCByZWFjaCBmcm9tICcuL3JlYWNoJztcbmltcG9ydCByb29tIGZyb20gJy4vcm9vbSc7XG5pbXBvcnQgd2VicnRjbW5nciBmcm9tICcuL3dlYnJ0Y21uZ3InO1xuXG5jb25zdCBTREtfVkVSU0lPTiA9ICcwLjAuMSc7XG5cbmV4cG9ydCBjbGFzcyBSZWFjaCB7XG5cdGNvbnN0cnVjdG9yKHVybD0gJ2h0dHA6Ly93ZWJjb20ub3JhbmdlLmNvbS9iYXNlL3dlYnJ0YycpIHtcblx0XHR0aGlzLmRhdGFyZWZzID0gZGF0YXJlZnModXJsKTtcblx0XHR0aGlzLndlYnJ0Y21uZ3IgPSB3ZWJydGNtbmdyKHRoaXMuZGF0YXJlZnMpO1xuXHR9XG5cblx0Um9vbSguLi5hcmdzKSB7XG5cdFx0cmV0dXJuIHJvb20oLi4uYXJncywgdGhpcy5kYXRhcmVmcywgdGhpcy53ZWJydGNtbmdyKTtcblx0fVxuXG5cdFJlYWNoKC4uLmFyZ3MpIHtcblx0XHRyZXR1cm4gcmVhY2goLi4uYXJncywgdGhpcy5kYXRhcmVmcyk7XG5cdH1cblxuXHRzdGF0aWMgZ2V0IHZlcnNpb24oKSB7XG5cdFx0cmV0dXJuIFNES19WRVJTSU9OO1xuXHR9XG5cdHN0YXRpYyBnZXQgYWN0aW9ucygpIHtcblx0XHRyZXR1cm4gYWN0aW9ucztcblx0fVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWNoO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2luZGV4LmpzXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59O1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjay5qc1xuICoqIG1vZHVsZSBpZCA9IDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgX2RlZmluZVByb3BlcnR5ID0gcmVxdWlyZShcImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5XCIpO1xuXG52YXIgX2RlZmluZVByb3BlcnR5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmluZVByb3BlcnR5KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZXhwb3J0cy5kZWZhdWx0ID0gKGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gICAgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gICAgcmV0dXJuIENvbnN0cnVjdG9yO1xuICB9O1xufSkoKTtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9iYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MuanNcbiAqKiBtb2R1bGUgaWQgPSAyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IHsgXCJkZWZhdWx0XCI6IHJlcXVpcmUoXCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eVwiKSwgX19lc01vZHVsZTogdHJ1ZSB9O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5LmpzXG4gKiogbW9kdWxlIGlkID0gM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyICQgPSByZXF1aXJlKCcuLi8uLi9tb2R1bGVzLyQnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoaXQsIGtleSwgZGVzYyl7XG4gIHJldHVybiAkLnNldERlc2MoaXQsIGtleSwgZGVzYyk7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2JhYmVsLXJ1bnRpbWUvfi9jb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eS5qc1xuICoqIG1vZHVsZSBpZCA9IDRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciAkT2JqZWN0ID0gT2JqZWN0O1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNyZWF0ZTogICAgICRPYmplY3QuY3JlYXRlLFxuICBnZXRQcm90bzogICAkT2JqZWN0LmdldFByb3RvdHlwZU9mLFxuICBpc0VudW06ICAgICB7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxcbiAgZ2V0RGVzYzogICAgJE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IsXG4gIHNldERlc2M6ICAgICRPYmplY3QuZGVmaW5lUHJvcGVydHksXG4gIHNldERlc2NzOiAgICRPYmplY3QuZGVmaW5lUHJvcGVydGllcyxcbiAgZ2V0S2V5czogICAgJE9iamVjdC5rZXlzLFxuICBnZXROYW1lczogICAkT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMsXG4gIGdldFN5bWJvbHM6ICRPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzLFxuICBlYWNoOiAgICAgICBbXS5mb3JFYWNoXG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2JhYmVsLXJ1bnRpbWUvfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmpzXG4gKiogbW9kdWxlIGlkID0gNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLypcbiAqICMlTFxuICogV2ViY29tIHNlcnZpY2VcbiAqXG4gKiBNb2R1bGUgbmFtZTogY29tLm9yYW5nZS53ZWJydGM6d2ViY29tLXNlcnZpY2VcbiAqIFZlcnNpb246ICAgICAwLjAuMS1TTkFQU0hPVFxuICogQ3JlYXRlZDogICAgIDIwMTQtMDQtMDFcbiAqICUlXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTMgLSAyMDE1IE9yYW5nZSBMYWJzXG4gKiAlJVxuICogVGhpcyBzb2Z0d2FyZSBpcyBjb25maWRlbnRpYWwgYW5kIHByb3ByaWV0YXJ5IGluZm9ybWF0aW9uIG9mIE9yYW5nZS5cbiAqIFlvdSBzaGFsbCBub3QgZGlzY2xvc2Ugc3VjaCBDb25maWRlbnRpYWwgSW5mb3JtYXRpb24gYW5kIHNoYWxsIHVzZSBpdCBvbmx5IGluXG4gKiBhY2NvcmRhbmNlIHdpdGggdGhlIHRlcm1zIG9mIHRoZSBhZ3JlZW1lbnQgeW91IGVudGVyZWQgaW50by5cbiAqIFVuYXV0aG9yaXplZCBjb3B5aW5nIG9mIHRoaXMgZmlsZSwgdmlhIGFueSBtZWRpdW0gaXMgc3RyaWN0bHkgcHJvaGliaXRlZC5cbiAqXG4gKiBJZiB5b3UgYXJlIE9yYW5nZSBlbXBsb3llZSB5b3Ugc2hhbGwgdXNlIHRoaXMgc29mdHdhcmUgaW4gYWNjb3JkYW5jZSB3aXRoXG4gKiB0aGUgT3JhbmdlIFNvdXJjZSBDaGFydGVyIChodHRwOi8vb3BlbnNvdXJjZS5pdG4uZnRncm91cC9pbmRleC5waHAvT3JhbmdlX1NvdXJjZSkuXG4gKiAjTCVcbiAqL1xuXG5cbi8qIGdsb2JhbCBNZWRpYVN0cmVhbSwgd2Via2l0UlRDUGVlckNvbm5lY3Rpb24sIG1velJUQ1BlZXJDb25uZWN0aW9uLCBtb3pSVENJY2VDYW5kaWRhdGUsIG1velJUQ1Nlc3Npb25EZXNjcmlwdGlvbiAqL1xuXG4vKipcbiAqIEBmaWxlIGFkYXB0LmpzIC0gSlMgZmlsZSB0byB1c2Ugc28gYXMgdG8gZ2V0IHNvbWUgYWRhcHRlZCBtZXRob2RzXG4gKiBAZGVzY3JpcHRpb24gVGhpcyBmaWxlIHByb3ZpZGVzIG1ldGhvZHMgdG8gaGFuZGxlIElDRSBzZXJ2ZXJzLCB1c2VyIG1lZGlhcyBvciBSVEMgUGVlciBDb25uZWN0aW9uIGZvciBleGFtcGxlLiBNZWRpYSBzdHJlYW1cbiAqIG1ldGhvZHMgYXJlIGFsc28gcHJvdmlkZWQgc28gYXMgdG8gYXR0YWNoLCBycmVhdHRhY2ggb3IgcmVtb3ZlIGV4aXN0aW5nIHN0cmVhbXMuXG4gKiBAYXV0aG9yIFdlYmNvbVxuICogQGNvcHlyaWdodCBPcmFuZ2UgTGFicyAoQykgMjAxMyAtIDIwMTRcbiAqIEBsaWNlbmNlIE9yYW5nZVxuICpcbiAqIFZlcnNpb24gZG9jIDogMS4zLjBcbiAqL1xuXG5cbi8qICoqKioqKioqKiAqXG4gKiBWYXJpYWJsZXMgKlxuICogKioqKioqKioqICovXG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIFRoZSBSVEMgUGVlciBDb25uZWN0aW9uIHRvIHVzZS4gVGhpcyBvYmplY3QgcHJvdmlkZXMgdGhlIGNoYW5uZWxzIHRvIHVzZVxuICogdG8gZXN0YWJsaXNoIHRoZSBjb21tdW5pY2F0aW9uIGFuZCBzZW5kIGRhdGEgYmV0d2VlbiBwYXJ0aWNpcGFudHMuIFRoaXMgb2JqZWN0XG4gKiBpcyBhdmFpbGFibGUgb25seSBvbiB1cCB0byBkYXRlIHdlYiBicm93c2VycyAoQ2hyb21lIDMxLCBGaXJlZm94IDM1LCBPcGVyYSAyNykuXG4gKi9cbndpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiA9IG51bGw7XG4vKipcbiAqIEBkZXNjcmlwdGlvbiBUaGUgdXNlciBtZWRpYSBwaWNrZWQgZnJvbSB0aGUgd2ViIGJyb3dzZXIgY29udGFpbmluZyB0aGUgdmlkZW8gYW5kIGF1ZGlvIHN0cmVhbXMgZ290dGVuIGZyb20gdGhlXG4gKiB3ZWJjYW1zIGFuZCBtaWNyb3Bob25lcy4gVGhpcyBtZWRpYSByZXRyaWV2bWVudCBpcyBhdmFpbGFibGUgb25seSBmb3IgbW9kZXJuIHdlYiBicm93c2VycyBzaW5jZSBGaXJlZm94IDE3LCBDaHJvbWUgMjEgb3IgT3BlcmEgMTguXG4gKi9cbndpbmRvdy5nZXRVc2VyTWVkaWEgPSBudWxsO1xuLypcbiAqIEBkZXNjcmlwdGlvbiBGdW5jdGlvbiB0byB1c2UgdG8gYXR0YWNoIHRoZSBtZWRpYSBzdHJlYW0gd2hpY2ggd2lsbCBiZSBpbnRlZ3JhdGVkIHRvIGFuIEhUTUwgb2JqZWN0IGFzIGEgdmlkZW8uXG4gKi9cbndpbmRvdy5hdHRhY2hNZWRpYVN0cmVhbSA9IG51bGw7XG4vKlxuICogQGRlc2NyaXB0aW9uIEZ1bmN0aW9uIHRvIHVzZSB0byByZWF0dGFjaCB0aGUgbWVkaWEgc3RyZWFtXG4gKi9cbndpbmRvdy5yZWF0dGFjaE1lZGlhU3RyZWFtID0gbnVsbDtcbi8qKlxuICogQGRlc2NyaXB0aW9uIFRoZSBkZXRlY3RlZCBicm93c2VyIHN1cG9ydGluZyBXZWJSVEMgKEZpcmVmb3ggb3IgQ2hyb21lKVxuICovXG53aW5kb3cud2VicnRjRGV0ZWN0ZWRCcm93c2VyID0gbnVsbDtcbi8qKlxuICogQGRlc2NyaXB0aW9uIFRoZSBkZXRlY3RlZCB2ZXJzaW9uIG9mIHRoZSBXZWJSVEMgY2FwYWJsZSBkZXRlY3RlZCBicm93ZXIuIFRoaXMgdmVyc2lvbiB3aWxsIGJlIHVzZWQgdG8gbWFuYWdlIG5ldHdvcmtzIGFzcGVjdHMgbGlrZSBUVVJOLlxuICovXG53aW5kb3cud2VicnRjRGV0ZWN0ZWRWZXJzaW9uID0gbnVsbDtcblxuLyoqXG4gKiBGaXggaWNlIHNlcnZlciBjb25maWcgb2JqZWN0XG4gKiBAcGFyYW0gaWNlU2VydmVyXG4gKi9cbmZ1bmN0aW9uIGZpeEljZVNlcnZlcihpY2VTZXJ2ZXIpIHtcblx0aWYgKGljZVNlcnZlci5oYXNPd25Qcm9wZXJ0eSgndXJscycpKSB7XG5cdFx0aWNlU2VydmVyLnVybCA9IGljZVNlcnZlci51cmxzO1xuXHRcdGRlbGV0ZSBpY2VTZXJ2ZXIudXJscztcblx0fVxuXHRpZiAoaWNlU2VydmVyLmhhc093blByb3BlcnR5KCd1cmwnKSAmJlxuXHRcdGljZVNlcnZlci51cmwudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKCd0dXJucycpICYmXG5cdFx0bmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYSkge1xuXHRcdGNvbnNvbGUud2FybignKFJlYWNoU0RLOjptYXliZUZpeENvbmZpZ3VyYXRpb24pICcgK1xuXHRcdCd0dXJucyBkZXRlY3RlZCBvbiBmaXJlZm94IC0+IGlnbm9yZSB0aGlzIGVudHJ5Jyk7XG5cdH1cbn1cblxuLyoqXG4gKiBGaXggcGVlciBjb25uZWN0aW9uIGNvbmZpZ3VyYXRpb24gaXNzdWVzIGlmIG5lZWRlZCwgc3BlY2lhbGx5IGFib3V0IElDRSBzZXJ2ZXJzXG4gKiBAcGFyYW0gcGNDb25maWcgLSBUaGUgcGVlciBjb25uZWN0aW9uIGNvbmZpZ3VyYXRpb24gdG8gZml4IGlmIG5vdCBudWxsXG4gKi9cbmZ1bmN0aW9uIG1heWJlRml4Q29uZmlndXJhdGlvbihwY0NvbmZpZykge1xuXHRpZiAocGNDb25maWcgPT09IG51bGwpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRpZiAocGNDb25maWcuaWNlU2VydmVycyAmJiBwY0NvbmZpZy5pY2VTZXJ2ZXJzLmxlbmd0aCA+IDApIHtcblx0XHRjb25zdCBtVGVtcHNTZXJ2ZXJzID0gW107XG5cdFx0Zm9yIChsZXQgaSA9IHBjQ29uZmlnLmljZVNlcnZlcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdGNvbnN0IGljZVNlcnZlciA9IHBjQ29uZmlnLmljZVNlcnZlcnNbaV07XG5cdFx0XHRmaXhJY2VTZXJ2ZXIoaWNlU2VydmVyKTtcblx0XHRcdG1UZW1wc1NlcnZlcnMucHVzaChpY2VTZXJ2ZXIpO1xuXHRcdH1cblx0XHRwY0NvbmZpZy5pY2VTZXJ2ZXJzID0gbVRlbXBzU2VydmVycztcblx0fVxufVxuXG4vKipcbiAqIFJldHVybnMgdHVybiBjb25maWcgb2JqZWN0XG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge1N0cmluZ30gdXNlcm5hbWVcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXNzd29yZFxuICogQHBhcmFtIHtCb29sZWFufSBsZWdhY3lcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVR1cm5TZXJ2ZXJDb25maWcodXJsLCB1c2VybmFtZSwgcGFzc3dvcmQsIGxlZ2FjeT0gZmFsc2UpIHtcblx0bGV0IGljZVNlcnZlcjtcblxuXHRpZiAobGVnYWN5KSB7XG5cdFx0Ly8gQ3JlYXRlIGljZVNlcnZlciB3aXRoIHR1cm4gdXJsLlxuXHRcdC8vIElnbm9yZSB0aGUgdHJhbnNwb3J0IHBhcmFtZXRlciBmcm9tIFRVUk4gdXJsIGZvciBGRiB2ZXJzaW9uIDw9MjcuXG5cdFx0Y29uc3QgdHVybl91cmxfcGFydHMgPSB1cmwuc3BsaXQoJz8nKTtcblx0XHQvLyBSZXR1cm4gbnVsbCBmb3IgY3JlYXRlSWNlU2VydmVyIGlmIHRyYW5zcG9ydD10Y3AuXG5cdFx0aWYgKHR1cm5fdXJsX3BhcnRzLmxlbmd0aCA9PT0gMSB8fFxuXHRcdFx0dHVybl91cmxfcGFydHNbMV0uaW5kZXhPZigndHJhbnNwb3J0PXVkcCcpID09PSAwKSB7XG5cdFx0XHRpY2VTZXJ2ZXIgPSB7XG5cdFx0XHRcdHVybDogdHVybl91cmxfcGFydHNbMF0sXG5cdFx0XHRcdCdjcmVkZW50aWFsJzogcGFzc3dvcmQsXG5cdFx0XHRcdHVzZXJuYW1lXG5cdFx0XHR9O1xuXHRcdH1cblx0fSBlbHNlIHtcblx0XHQvLyBGRiAyNyBhbmQgYWJvdmUgc3VwcG9ydHMgdHJhbnNwb3J0IHBhcmFtZXRlcnMgaW4gVFVSTiB1cmwsXG5cdFx0Ly8gU28gcGFzc2luZyBpbiB0aGUgZnVsbCB1cmwgdG8gY3JlYXRlIGljZVNlcnZlci5cblx0XHRpY2VTZXJ2ZXIgPSB7XG5cdFx0XHR1cmwsXG5cdFx0XHRjcmVkZW50aWFsOiBwYXNzd29yZCxcblx0XHRcdHVzZXJuYW1lXG5cdFx0fTtcblx0fVxuXG5cdHJldHVybiBpY2VTZXJ2ZXI7XG59XG5cblxuLyogKioqKioqKioqICpcbiAqIFNjcmlwdGluZyAqXG4gKiAqKioqKioqKiogKi9cblxuLypcbiAqIElmIHRoZSB3ZWIgYnJvd3NlciBpbiB1c2UgaXMgRmlyZWZveFxuICovXG5pZiAobmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYSkge1xuXHR3aW5kb3cud2VicnRjRGV0ZWN0ZWRCcm93c2VyID0gJ2ZpcmVmb3gnO1xuXG5cdHdpbmRvdy53ZWJydGNEZXRlY3RlZFZlcnNpb24gPVxuXHRcdHBhcnNlSW50KG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0ZpcmVmb3hcXC8oWzAtOV0rKVxcLi8pWzFdLCAxMCk7XG5cblx0LyoqXG5cdCAqIFRoZSBSVENQZWVyQ29ubmVjdGlvbiBvYmpldCBiYXNlZCBvbiBtb3praXQuXG5cdCAqIElmIG5lZWRlZCwgdGhlIGNvbmZpZ3VyYXRpb24gb2YgdGhlIHBlZXIgY29ubmVjdGlvbiB3aWxsIGJlIGZpeGVkLlxuXHQgKiBAcGFyYW0gcGNDb25maWcgLSBUaGUgcGVlciBjb25uZWN0aW9uIGNvbmZpZ1xuXHQgKiBAcGFyYW0gcGNDb25zdHJhaW50cyAtIFRoZSBwZWVyIGNvbm5lY3Rpb24gY29uc3RyYWludHNcblx0ICovXG5cdHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiA9IGZ1bmN0aW9uIChwY0NvbmZpZywgcGNDb25zdHJhaW50cykge1xuXHRcdC8vIC51cmxzIGlzIG5vdCBzdXBwb3J0ZWQgaW4gRkYgeWV0LlxuXHRcdG1heWJlRml4Q29uZmlndXJhdGlvbihwY0NvbmZpZyk7XG5cdFx0cmV0dXJuIG5ldyBtb3pSVENQZWVyQ29ubmVjdGlvbihwY0NvbmZpZywgcGNDb25zdHJhaW50cyk7XG5cdH07XG5cblx0Ly8gVGhlIFJUQ1Nlc3Npb25EZXNjcmlwdGlvbiBvYmplY3QuXG5cdHdpbmRvdy5SVENTZXNzaW9uRGVzY3JpcHRpb24gPSBtb3pSVENTZXNzaW9uRGVzY3JpcHRpb247XG5cblx0Ly8gVGhlIFJUQ0ljZUNhbmRpZGF0ZSBvYmplY3QuXG5cdHdpbmRvdy5SVENJY2VDYW5kaWRhdGUgPSBtb3pSVENJY2VDYW5kaWRhdGU7XG5cblx0Ly8gR2V0IFVzZXJNZWRpYSAob25seSBkaWZmZXJlbmNlIGlzIHRoZSBwcmVmaXgpLlxuXHR3aW5kb3cuZ2V0VXNlck1lZGlhID0gbmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYS5iaW5kKG5hdmlnYXRvcik7XG5cdG5hdmlnYXRvci5nZXRVc2VyTWVkaWEgPSBnZXRVc2VyTWVkaWE7XG5cblxuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIHRoZSBJQ0Ugc2VydmVyIGZvciB0aGUgVVJMIGZvciBGaXJlZm94LlxuXHQgKiBUaGUgU1RVTiBhbmQgVFVSTiBzZXJ2ZXJzIHdpbGwgYmUgY29uc2lkZXJlZC4gSW4gY2FzZSBvZiBhIFRVUk4gc2VydmVyIGlzIGluIHVzZSwgY3JlZGVudGlhbHMgYW5kIHVzZXJuYW1lcyB3aWxsIGJlIGdvdC5cblx0ICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIFRoZSB1cmwgdG8gdXNlIHRvIGdldCB0aGUgSUNFIHNlcnZlclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdXNlcm5hbWUgLSBUaGUgdXNlcm5hbWVcblx0ICogQHBhcmFtIHtzdHJpbmd9IHBhc3N3b3JkIC0gVGhlIHBhc3N3b3JkXG5cdCAqL1xuXHR3aW5kb3cuY3JlYXRlSWNlU2VydmVyID0gKHVybCwgdXNlcm5hbWUsIHBhc3N3b3JkKSA9PiB7XG5cdFx0bGV0IGljZVNlcnZlciA9IG51bGw7XG5cdFx0Y29uc3QgdXJsX3BhcnRzID0gdXJsLnNwbGl0KCc6Jyk7XG5cdFx0aWYgKHVybF9wYXJ0c1swXS5pbmRleE9mKCdzdHVuJykgPT09IDApIHtcblx0XHRcdC8vIENyZWF0ZSBpY2VTZXJ2ZXIgd2l0aCBzdHVuIHVybC5cblx0XHRcdGljZVNlcnZlciA9IHtcblx0XHRcdFx0dXJsXG5cdFx0XHR9O1xuXHRcdH0gZWxzZSBpZiAodXJsX3BhcnRzWzBdLmluZGV4T2YoJ3R1cm4nKSA9PT0gMCkge1xuXHRcdFx0aWNlU2VydmVyID0gY3JlYXRlVHVyblNlcnZlckNvbmZpZyhcdHVybCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHVzZXJuYW1lLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cGFzc3dvcmQsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR3aW5kb3cud2VicnRjRGV0ZWN0ZWRWZXJzaW9uIDwgMjcpO1xuXHRcdH1cblx0XHRyZXR1cm4gaWNlU2VydmVyO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIHRoZSBJQ0Ugc2VydmVycyBmcm9tIHNvbWUgVVJMcy4gVGhlIFNUVU4gYW5kIFRVUk4gc2V2ZXJzIGNvbnN0cmFpbnRzIHdpbGwgYmUgaGFuZGxlZC5cblx0ICogQHBhcmFtIHthcnJheX0gdXJscyAtIFRoZSB1cmxzIHRvIHVzZSB0byBnZXQgdGhlIElDRSBzZXJ2ZXJcblx0ICogQHBhcmFtIHtzdHJpbmd9IHVzZXJuYW1lIC0gVGhlIHVzZXJuYW1lXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBwYXNzd29yZCAtIFRoZSBwYXNzd29yZFxuXHQgKi9cblx0d2luZG93LmNyZWF0ZUljZVNlcnZlcnMgPSBmdW5jdGlvbiAodXJscywgdXNlcm5hbWUsIHBhc3N3b3JkKSB7XG5cdFx0Y29uc3QgaWNlU2VydmVycyA9IFtdO1xuXHRcdC8vIFVzZSAudXJsIGZvciBGaXJlRm94LlxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdXJscy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3QgaWNlU2VydmVyID0gd2luZG93LmNyZWF0ZUljZVNlcnZlcih1cmxzW2ldLFxuXHRcdFx0XHR1c2VybmFtZSxcblx0XHRcdFx0cGFzc3dvcmQpO1xuXHRcdFx0aWYgKGljZVNlcnZlciAhPT0gbnVsbCkge1xuXHRcdFx0XHRpY2VTZXJ2ZXJzLnB1c2goaWNlU2VydmVyKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGljZVNlcnZlcnM7XG5cdH07XG5cblx0LyoqXG5cdCAqIERldGFjaCB0aGUgbWVkaWEgc3RyZWFtIGZyb20gdGhlIGVsZW1lbnQuXG5cdCAqIFRoZSBlbGVtZW50IHdpbGwgaGF2ZSBpdHMgc3JjIGNvbnRlbnQgY2hhbmdlZCB0byBudWxsIGFuZCB3aWxsIGJlIHBhdXNlZC5cblx0ICogQHBhcmFtIHt2aWRlbyB0YWd9IGVsZW1lbnQgLSBUaGUgdmlkZW8gdGFnIHdoZXJlIHRoZSBzdHJlYW0gaXMgZGlzcGxheWVkXG5cdCAqL1xuXHR3aW5kb3cuZGV0YWNoTWVkaWFTdHJlYW0gPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuXHRcdGlmIChlbGVtZW50KSB7XG5cdFx0XHRlbGVtZW50Lm1velNyY09iamVjdCA9IG51bGw7XG5cdFx0XHRlbGVtZW50LnBhdXNlKCk7XG5cdFx0fVxuXHR9O1xuXG5cdC8qKlxuXHQgKiBBdHRhY2ggYSBtZWRpYSBzdHJlYW0gdG8gYW4gZWxlbWVudC5cblx0ICogVGhlIHNyYyBhdHRyaWJ1dGUgb2YgdGhlIGVsZW1lbnQgd2lsbCBiZSBkZWZpbmVkIHdpdGggdGhlIHN0cmVhbSBhbmQgd2lsbCBiZSBwbGF5ZWQuXG5cdCAqIEBwYXJhbSB7dmlkZW8gdGFnfSBlbGVtZW50IC0gVGhlIHZpZGVvIHRhZyB3aGVyZSB0aGUgc3RyZWFtIGlzIGRpc3BsYXllZFxuXHQgKiBAcGFyYW0gc3RyZWFtIC0gVGhlIHN0cmVhbSB0byBhdHRhY2ggdG8gdGhlIGVsZW1lbnRcblx0ICovXG5cdHdpbmRvdy5hdHRhY2hNZWRpYVN0cmVhbSA9IGZ1bmN0aW9uIChlbGVtZW50LCBzdHJlYW0pIHtcblx0XHR0cnkge1xuXHRcdFx0aWYgKGVsZW1lbnQgJiYgc3RyZWFtKSB7XG5cdFx0XHRcdGVsZW1lbnQubW96U3JjT2JqZWN0ID0gc3RyZWFtO1xuXHRcdFx0XHRpZiAoZWxlbWVudC5wbGF5ICYmIHR5cGVvZiBlbGVtZW50LnBsYXkgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdGVsZW1lbnQucGxheSgpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnNvbGUud2FybignKFJlYWNoU0RLOjphdHRhY2hNZWRpYVN0cmVhbSllbGVtZW50LnBsYXkgbm90IGF2YWlsYWJsZScpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdSZWFjaFNESzo6YXR0YWNoTWVkaWFTdHJlYW0tPnBhcmFtZXRlcnMgbm90IHZhbGlkJyk7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Y29uc29sZS5lcnJvcihgKFJlYWNoU0RLOjphdHRhY2hNZWRpYVN0cmVhbSlFeGNlcHRpb249JHtlfWApO1xuXHRcdH1cblxuXG5cdH07XG5cblx0LyoqXG5cdCAqIEF0dGFjaCBhZ2FpbiBhIG1lZGlhIHN0cmVhbSB0byBhbiBlbGVtZW50LlxuXHQgKiBUaGUgXCJmcm9tXCIgZWxlbWVudCB3aWxsIGhhdmUgaXRzIHNyYyB2YWx1ZSBjb3BpZWQgdG8gdGhlIFwidG9cIiBvYmplY3QgYmVmb3JlIHBsYXlpbmcgaXQuXG5cdCAqIEBwYXJhbSB7dmlkZW8gdGFnfSB0byAtIFRoZSB2aWRlbyB0YWcgd2hlcmUgdGhlIHN0cmVhbSBzaG91bGQgYmUgcHV0XG5cdCAqIEBwYXJhbSB7dmlkZW8gdGFnfSBmcm9tIC0gVGhlIHZpZGVvIHRhZyB3aGVyZSB0aGUgc3RyZWFtIHNob3VsZCBiZSB0YWtlblxuXHQgKi9cblx0d2luZG93LnJlYXR0YWNoTWVkaWFTdHJlYW0gPSBmdW5jdGlvbiAodG8sIGZyb20pIHtcblx0XHRpZiAodG8gJiYgZnJvbSkge1xuXHRcdFx0dG8ubW96U3JjT2JqZWN0ID0gZnJvbS5tb3pTcmNPYmplY3Q7XG5cdFx0XHR0by5wbGF5KCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ1JlYWNoU0RLOjpyZWF0dGFjaE1lZGlhU3RyZWFtLT5wYXJhbWV0ZXJzIG5vdCB2YWxpZCcpO1xuXHRcdH1cblx0fTtcblxuXHQvLyBGYWtlIGdldHtWaWRlbyxBdWRpb31UcmFja3Ncblx0aWYgKCFNZWRpYVN0cmVhbS5wcm90b3R5cGUuZ2V0VmlkZW9UcmFja3MpIHtcblx0XHRNZWRpYVN0cmVhbS5wcm90b3R5cGUuZ2V0VmlkZW9UcmFja3MgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gW107XG5cdFx0fTtcblx0fVxuXG5cdGlmICghTWVkaWFTdHJlYW0ucHJvdG90eXBlLmdldEF1ZGlvVHJhY2tzKSB7XG5cdFx0TWVkaWFTdHJlYW0ucHJvdG90eXBlLmdldEF1ZGlvVHJhY2tzID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIFtdO1xuXHRcdH07XG5cdH1cblxuXHQvKlxuXHQgKiBJZiB0aGUgd2ViIGJyb3dzZXIgaW4gdXNlIGlzIENocm9tZVxuXHQgKi9cbn0gZWxzZSBpZiAobmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYSkge1xuXHR3aW5kb3cud2VicnRjRGV0ZWN0ZWRCcm93c2VyID0gJ2Nocm9tZSc7XG5cdHdpbmRvdy53ZWJydGNEZXRlY3RlZFZlcnNpb24gPVxuXHRcdHBhcnNlSW50KG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0Nocm9tKGV8aXVtKVxcLyhbMC05XSspXFwuLylbMl0sIDEwKTtcblxuXHQvKipcblx0ICogQ3JlYXRlcyB0aGUgSUNFIHNlcnZlciBmcm9tIHRoZSBVUkwgYW5kIGhhbmRsZXMgU1RVTiAvIFRVUk4gc2VydmVycyBjb25zdHJhaW50cyBieSByZXRyaWV2aW5nIGNyZWRlbnRpYWxzIGFuZCB1c2VybmFtZXMgaWYgbmVlZGVkLlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdXJsIC0gVGhlIHVybCB0byB1c2UgdG8gZ2V0IHRoZSBJQ0Ugc2VydmVyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSB1c2VybmFtZSAtIFRoZSB1c2VybmFtZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30gcGFzc3dvcmQgLSBUaGUgcGFzc3dvcmRcblx0ICovXG5cdHdpbmRvdy5jcmVhdGVJY2VTZXJ2ZXIgPSBmdW5jdGlvbiAodXJsLCB1c2VybmFtZSwgcGFzc3dvcmQpIHtcblx0XHRsZXQgaWNlU2VydmVyID0gbnVsbDtcblx0XHRjb25zdCB1cmxfcGFydHMgPSB1cmwuc3BsaXQoJzonKTtcblx0XHRpZiAodXJsX3BhcnRzWzBdLmluZGV4T2YoJ3N0dW4nKSA9PT0gMCkge1xuXHRcdFx0Ly8gQ3JlYXRlIGljZVNlcnZlciB3aXRoIHN0dW4gdXJsLlxuXHRcdFx0aWNlU2VydmVyID0ge1xuXHRcdFx0XHR1cmxcblx0XHRcdH07XG5cdFx0fSBlbHNlIGlmICh1cmxfcGFydHNbMF0uaW5kZXhPZigndHVybicpID09PSAwKSB7XG5cdFx0XHQvLyBDaHJvbWUgTTI4ICYgYWJvdmUgdXNlcyBiZWxvdyBUVVJOIGZvcm1hdC5cblx0XHRcdGljZVNlcnZlciA9IGNyZWF0ZVR1cm5TZXJ2ZXJDb25maWcodXJsLCBwYXNzd29yZCwgdXNlcm5hbWUpO1xuXHRcdH1cblx0XHRyZXR1cm4gaWNlU2VydmVyO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIHRoZSBJQ0Ugc2VydmVycyBmcm9tIHRoZSBVUkwgZm9yIENocm9tZSBNMzQgYW5kIGFib3ZlXG5cdCAqIEBwYXJhbSB7YXJyYXl9IHVybHMgLSBUaGUgdXJscyB0byB1c2UgdG8gZ2V0IHRoZSBJQ0Ugc2VydmVyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSB1c2VybmFtZSAtIFRoZSB1c2VybmFtZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30gcGFzc3dvcmQgLSBUaGUgcGFzc3dvcmRcblx0ICovXG5cdHdpbmRvdy5jcmVhdGVJY2VTZXJ2ZXJzID0gZnVuY3Rpb24gKHVybHMsIHVzZXJuYW1lLCBwYXNzd29yZCkge1xuXHRcdGxldCBpY2VTZXJ2ZXJzID0gW107XG5cdFx0aWYgKHdpbmRvdy53ZWJydGNEZXRlY3RlZFZlcnNpb24gPj0gMzQpIHtcblx0XHRcdC8vIC51cmxzIGlzIHN1cHBvcnRlZCBzaW5jZSBDaHJvbWUgTTM0LlxuXHRcdFx0aWNlU2VydmVycyA9IHtcblx0XHRcdFx0dXJscyxcblx0XHRcdFx0Y3JlZGVudGlhbDogcGFzc3dvcmQsXG5cdFx0XHRcdHVzZXJuYW1lXG5cdFx0XHR9O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHVybHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0Y29uc3QgaWNlU2VydmVyID0gd2luZG93LmNyZWF0ZUljZVNlcnZlcih1cmxzW2ldLFxuXHRcdFx0XHRcdHVzZXJuYW1lLFxuXHRcdFx0XHRcdHBhc3N3b3JkKTtcblx0XHRcdFx0aWYgKGljZVNlcnZlciAhPT0gbnVsbCkge1xuXHRcdFx0XHRcdGljZVNlcnZlcnMucHVzaChpY2VTZXJ2ZXIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBpY2VTZXJ2ZXJzO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBUaGUgUlRDIFBlZXIgQ29ubmVjdGlvbiBvYmplY3QuIElmIG5lZWRlZCwgaXRzIHBlZXIgY29ubmVjdGlvbiBjb25maWd1cmF0aW9uIHdpbGwgYmUgZml4ZWRcblx0ICogQHBhcmFtIHBjQ29uZmlnIC0gVGhlIHBlZXIgY29ubmVjdGlvbiBjb25maWdcblx0ICogQHBhcmFtIHBjQ29uc3RyYWludHMgLSBUaGUgcGVlciBjb25uZWN0aW9uIGNvbnN0cmFpbnRzXG5cdCAqL1xuXHR3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gPSBmdW5jdGlvbiAocGNDb25maWcsIHBjQ29uc3RyYWludHMpIHtcblx0XHQvLyAudXJscyBpcyBzdXBwb3J0ZWQgc2luY2UgQ2hyb21lIE0zNC5cblx0XHRpZiAod2luZG93LndlYnJ0Y0RldGVjdGVkVmVyc2lvbiA8IDM0KSB7XG5cdFx0XHRtYXliZUZpeENvbmZpZ3VyYXRpb24ocGNDb25maWcpO1xuXHRcdH1cblx0XHRyZXR1cm4gbmV3IHdlYmtpdFJUQ1BlZXJDb25uZWN0aW9uKHBjQ29uZmlnLCBwY0NvbnN0cmFpbnRzKTtcblx0fTtcblxuXHQvLyBHZXQgVXNlck1lZGlhIChvbmx5IGRpZmZlcmVuY2UgaXMgdGhlIHByZWZpeCkuXG5cdC8vIENvZGUgZnJvbSBBZGFtIEJhcnRoLlxuXHR3aW5kb3cuZ2V0VXNlck1lZGlhID0gbmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYS5iaW5kKG5hdmlnYXRvcik7XG5cdG5hdmlnYXRvci5nZXRVc2VyTWVkaWEgPSBnZXRVc2VyTWVkaWE7XG5cbi8vICAvLyBBdHRhY2ggYSBtZWRpYSBzdHJlYW0gdG8gYW4gZWxlbWVudC5cbi8vICBhdHRhY2hNZWRpYVN0cmVhbSA9IGZ1bmN0aW9uKGVsZW1lbnQsIHN0cmVhbSkge1xuLy8gICAgaWYgKHR5cGVvZiBlbGVtZW50LnNyY09iamVjdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbi8vICAgICAgZWxlbWVudC5zcmNPYmplY3QgPSBzdHJlYW07XG4vLyAgICB9IGVsc2UgaWYgKHR5cGVvZiBlbGVtZW50Lm1velNyY09iamVjdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbi8vICAgICAgZWxlbWVudC5tb3pTcmNPYmplY3QgPSBzdHJlYW07XG4vLyAgICB9IGVsc2UgaWYgKHR5cGVvZiBlbGVtZW50LnNyYyAhPT0gJ3VuZGVmaW5lZCcpIHtcbi8vICAgICAgZWxlbWVudC5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHN0cmVhbSk7XG4vLyAgICB9IGVsc2Uge1xuLy8gICAgICBjb25zb2xlLmxvZygnRXJyb3IgYXR0YWNoaW5nIHN0cmVhbSB0byBlbGVtZW50LicpO1xuLy8gICAgfVxuLy8gIH07XG5cblx0LyoqXG5cdCAqIEF0dGFjaCBhIG1lZGlhIHN0cmVhbSB0byBhbiBlbGVtZW50LlxuXHQgKiBUaGUgc3JjIGF0dHJpYnV0ZSBvZiB0aGUgZWxlbWVudCB3aWxsIGJlIGRlZmluZWQgd2l0aCB0aGUgc3RyZWFtIGFuZCB3aWxsIGJlIHBsYXllZC5cblx0ICogQHBhcmFtIHt2aWRlbyB0YWd9IGVsZW1lbnQgLSBUaGUgdmlkZW8gdGFnIHdoZXJlIHRoZSBzdHJlYW0gaXMgZGlzcGxheWVkXG5cdCAqIEBwYXJhbSBzdHJlYW0gLSBUaGUgc3RyZWFtIHRvIGF0dGFjaCB0byB0aGUgZWxlbWVudFxuXHQgKi9cblx0d2luZG93LmF0dGFjaE1lZGlhU3RyZWFtID0gZnVuY3Rpb24gKGVsZW1lbnQsIHN0cmVhbSkge1xuXHRcdHRyeSB7XG5cdFx0XHRpZiAoZWxlbWVudCAmJiBzdHJlYW0pIHtcblx0XHRcdFx0Ly8gZWxlbWVudC5zcmMgPSB3ZWJraXRVUkwuY3JlYXRlT2JqZWN0VVJMKHN0cmVhbSk7XG5cdFx0XHRcdGVsZW1lbnQuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChzdHJlYW0pO1xuXHRcdFx0XHRlbGVtZW50LmF1dG9wbGF5ID0gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ1JlYWNoU0RLOjphdHRhY2hNZWRpYVN0cmVhbSAtPnBhcmFtZXRlcnMgbm90IHZhbGlkJyk7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Y29uc29sZS5lcnJvcihgKFJlYWNoU0RLOjphdHRhY2hNZWRpYVN0cmVhbSlFeGNlcHRpb249JHtlfWApO1xuXHRcdH1cblx0fTtcblxuXHQvKipcblx0ICogRGV0YWNoIHRoZSBtZWRpYSBzdHJlYW0gZnJvbSB0aGUgZWxlbWVudCBieSBhc3NpbmdlZCBudWxsIHZhbHVlIHRvIGl0cyBzcmMgYXR0cmlidXRlLlxuXHQgKiBAcGFyYW0ge3ZpZGVvIHRhZ30gZWxlbWVudCAtIFRoZSB2aWRlbyB0YWcgd2hlcmUgdGhlIHN0cmVhbSBpcyBkaXNwbGF5ZWRcblx0ICovXG5cdHdpbmRvdy5kZXRhY2hNZWRpYVN0cmVhbSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cdFx0aWYgKGVsZW1lbnQpIHtcblx0XHRcdGlmICh0eXBlb2YgZWxlbWVudC5zcmNPYmplY3QgIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdGVsZW1lbnQuc3JjT2JqZWN0ID0gJyc7XG5cdFx0XHR9IGVsc2UgaWYgKHR5cGVvZiBlbGVtZW50Lm1velNyY09iamVjdCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0ZWxlbWVudC5tb3pTcmNPYmplY3QgPSAnJztcblx0XHRcdH0gZWxzZSBpZiAodHlwZW9mIGVsZW1lbnQuc3JjICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHRlbGVtZW50LnNyYyA9ICcnO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc29sZS5sb2coJ0Vycm9yIGF0dGFjaGluZyBzdHJlYW0gdG8gZWxlbWVudC4nKTtcblx0XHRcdH1cblx0XHR9XG5cblx0fTtcblxuXHQvKipcblx0ICogQXR0YWNoIGFnYWluIGEgbWVkaWEgc3RyZWFtIHRvIGFuIGVsZW1lbnQuXG5cdCAqIFRoZSBcImZyb21cIiBlbGVtZW50IHdpbGwgaGF2ZSBpdHMgc3JjIHZhbHVlIGNvcGllZCB0byB0aGUgXCJ0b1wiIG9iamVjdCBiZWZvcmUgcGxheWluZyBpdC5cblx0ICogQHBhcmFtIHt2aWRlbyB0YWd9IHRvIC0gVGhlIHZpZGVvIHRhZyB3aGVyZSB0aGUgc3RyZWFtIHNob3VsZCBiZSBwdXRcblx0ICogQHBhcmFtIHt2aWRlbyB0YWd9IGZyb20gLSBUaGUgdmlkZW8gdGFnIHdoZXJlIHRoZSBzdHJlYW0gc2hvdWxkIGJlIHRha2VuXG5cdCAqL1xuXHR3aW5kb3cucmVhdHRhY2hNZWRpYVN0cmVhbSA9IGZ1bmN0aW9uICh0bywgZnJvbSkge1xuXHRcdGlmICh0byAmJiBmcm9tKSB7XG5cdFx0XHR0by5zcmMgPSBmcm9tLnNyYztcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc29sZS5lcnJvcignUmVhY2hTREs6OnJlYXR0YWNoTWVkaWFTdHJlYW0gbWVkaWEgc3RyZWFtLT5wYXJhbWV0ZXJzIG5vdCB2YWxpZCcpO1xuXHRcdH1cblx0fTtcblxufSBlbHNlIHtcblx0dGhyb3cgbmV3IEVycm9yKCdCcm93c2VyIGRvZXMgbm90IGFwcGVhciB0byBiZSBXZWJSVEMtY2FwYWJsZScpO1xufVxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvYWRhcHRlci5qc1xuICoqLyIsImV4cG9ydCBkZWZhdWx0IHtcblxuXHQvKipcblx0ICogQXVkaW8gY29tbXVuaWNhdGlvbiBzZXJ2aWNlXG5cdCAqIEBjb25zdGFudFxuXHQgKiBAdHlwZSB7c3RyaW5nfVxuXHQgKi9cblx0QUNUSU9OX1RZUEVfQVVESU86ICdhdWRpbycsXG5cdC8qKlxuXHQgKiBWaWRlbyBjb21tdW5pY2F0aW9uIHNlcnZpY2Vcblx0ICogQGNvbnN0YW50XG5cdCAqIEB0eXBlIHtzdHJpbmd9XG5cdCAqL1xuXHRBQ1RJT05fVFlQRV9WSURFTzogJ3ZpZGVvJyxcblx0LyoqXG5cdCAqIENoYXQgY29tbXVuaWNhdGlvbiBzZXJ2aWNlXG5cdCAqIEBjb25zdGFudFxuXHQgKiBAdHlwZSB7c3RyaW5nfVxuXHQgKi9cblx0QUNUSU9OX1RZUEVfQ0hBVDogJ2NoYXQnLFxuXHQvKipcblx0ICogQXVkaW8gYW5kIHZpZGVvIGNvbW11bmljYXRpb24gc2VydmljZVxuXHQgKiBAY29uc3RhbnRcblx0ICogQHR5cGUge3N0cmluZ31cblx0ICovXG5cdEFDVElPTl9UWVBFX0FVRElPX1ZJREVPOiAnYXVkaW8tdmlkZW8nLFxuXHQvKipcblx0ICogU2NyZWVuLXNoYXJpbmcgc2VydmljZVxuXHQgKiBAY29uc3RhbnRcblx0ICogQHR5cGUge3N0cmluZ31cblx0ICovXG5cdEFDVElPTl9UWVBFX1NDUkVFTl9TSEFSSU5HOiAnc2NyZWVuLXNoYXJpbmcnLFxuXHQvKipcblx0ICogQ2FsbCBjb21tdW5pY2F0aW9uIHNlcnZpY2Vcblx0ICogQGNvbnN0YW50XG5cdCAqIEB0eXBlIHtzdHJpbmd9XG5cdCAqL1xuXHRBQ1RJT05fVFlQRV9DQUxMOiAnY2FsbCdcbn07XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvYWN0aW9ucy5qc1xuICoqLyIsIi8qKlxuICogQGZpbGUgZGF0YXJlZnMuanMgLSBKUyBmaWxlIG1vZGVsaXppbmcgYSBkYXRhcmVmLCBpLmUuIGEgcG9pbnRlciB0byB0aGUgV2ViY29tIHh3aXRoIGRlZGljYXRlZCBub2RlcyBmb3Igcm9vbXMsIHJlYWNoIHNlcnZpY2UgYW5kIFdlYlJUQyBjb21tdW5pY2F0aW9ucy5cbiAqIEBhdXRob3IgV2ViY29tXG4gKi9cblxuLyplc2xpbnQgY29tcGxleGl0eToxLCBtYXgtc3RhdGVtZW50czogMSwgbWF4LWxlbjogMSovXG5cbi8qKlxuICogUmVwcmVzZW50cyBhIGRhdGFyZWYgd2l0aCBzZXZlcmFsIG5vZGVzIGluIGl0IHdoaWNoIGFyZSBwb2ludGluZyB0byBzb21lIGxvY2F0aW9ucyBpbiB0aGUgZGF0YWJhc2UuXG4gKiBUaGUgZGF0YXJlZnMgY2FuIGJlIGNvbnNpZGVyZWQgYXMgYSBXZWJjb20gb2JqZWN0IHBvaW50aW5nIHRvIGEgYmFzZSBVUkwuIFRoaXMgbm9kZSBjb250YWlucyBjaGlsZHJlbiBub2RlcyBmb3JcbiAqIHJlYWNoIHNlcnZpY2UsIHJvb21zIGFuZCBXZWJSVEMgY29tbXVuaWNhdGlvbnMuXG4gKlxuICogV2FybmluZyA6IHdoZW4gdXNlZCB3aXRoIGRlbW8gVUksIHRoaXMgZmlsZSBpcyBub3QgaW1wb3J0ZWQ6ICBkZW1vIFVJIGhhc2UgaXRzIG93biBjb25maWd1cmF0aW9uIHN5c3RlbSAoaW1wb3J0IGpzb24gY29uZmlnIHdpdGggYSBwaHAgc2VydmVyIG1vZHVsZSlcbiAqIFRoZXNlIG5vZGVzIGFyZSA6XG4gKiAgICAgICAtIHJvb21zXG4gKiAgICAgICAtIHJlYWNoXG4gKiAgICAgICAtIHdlYnJ0Y1xuICogICAgICAgLSBzaXBQaG9uZU51bWJlcnNcbiAqICAgICAgIC0gZGF0YXN0b3JlLCBpLmUuIHRoZSBXZWJjb20gb2JqZWN0XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oV0VCQ09NQkFTRV9VUkwpIHtcblxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFRoZSBkYXRhc3RvcmUgaW4gdGhlIG1haW4gb2JqZWN0IHdoaWNoIGNhbiBiZSBjb25zaWRlcmVkIGhhcyB0aGUgcm9vdCBub2RlIG9mIHRoZSBiYXNlLlxuXHQgKiBJdCBjb250YWlucyB0aGUgaW5zdGFuY2lhdGVkIFdlYmNvbSBkZWZpbmVkIGJ5IGEgV0VCQ09NQkFTRV9VUkxcblx0ICogVGhlIG1haW4gbm9kZXMgY29udGFpbmluZyB0aGUgcm9vbXMsIHRoZSBTSVAgcGhvbmUgbnVtYmVycyBhbmQgdGhlIHJlYWNoIGFuZCBXZWJSVEMgZGF0YSBhcmUgY2hpbGRyZW4gb2YgdGhpcyBub2RlLlxuXHQgKi9cblx0bGV0IF9kYXRhc3RvcmUgPSBudWxsO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIEEgbm9kZSBjb250YWluaW5nIGFsbCB0aGUgcm9vbXMgb2YgdGhlIGNvbW11bmljYXRpb24gc3lzdGVtLlxuXHQgKiBFYWNoIFwicm9vbVwiIG5vZGUgcG9zc2Vzc2VzIHRoZSBwYXJ0aWNpcGFudHMgYW5kIHRoZSBleGNoYW5nZWQgaW5zdGFudCBtZXNzYWdlcyBmb3IgZXhhbXBsZS5cblx0ICogSW4gdGhlIGRhdGFiYXNlLCB0aGlzIG5vZGUgaXMgaWRlbnRpZmllZCBieSBcInJvb21zTGlzdFwiLlxuXHQgKi9cblx0bGV0IF9yb29tcyA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQSBub2RlIGNvbnRhaW5pbmcgYWxsIHRoZSBkYXRhIGFib3V0IHRoZSByZWFjaCBzZXJ2aWNlIHVzZWQgdG8gcHV0IGluIHJlbGF0aW9uIHVzZXJzLlxuXHQgKiBJbiB0aGUgZGF0YWJhc2UsIHRoaXMgbm9kZSBpcyBpZGVudGlmaWVkIGJ5IFwicmVhY2hcIi5cblx0ICovXG5cdGxldCBfcmVhY2ggPSBudWxsO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIEEgbm9kZSBjb250YWluaW5nIGFsbCB0aGUgZGF0YSBhYm91dCB0aGUgV2ViUlRDIGZlYXR1cmUuXG5cdCAqIEluIHRoZSBkYXRhYmFzZSwgdGhpcyBub2RlIGlzIGlkZW50aWZpZWQgYnkgXCJ3ZWJydGNcIi5cblx0ICovXG5cdGxldCBfd2VicnRjID0gbnVsbDtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBBIG5vZGUgY29udGFpbmluZyBhbGwgdGhlIGRhdGEgYWJvdXQgdGhlIFNJUCBwaG9uZSBudW1iZXJzLlxuXHQgKiBJbiB0aGUgZGF0YWJhc2UsIHRoaXMgbm9kZSBpcyBpZGVudGlmaWVkIGJ5IFwic2lwUGhvbmVOdW1iZXJzXCIuXG5cdCAqL1xuXHRsZXQgX3NpcFBob25lTnVtYmVycyA9IG51bGw7XG5cblx0LyoqXG5cdCAqIERlZmluZXMgdGhlIGNoaWxkcmVuIG5vZGVzLCBpLmUuIGNyZWF0ZXMgZm9yIGVhY2ggb2YgdGhlbSBhIGRlZGljYXRlZCBub2RlIGluIHRoZSBkYXRhYmFzZVxuXHQgKiB1bmRlciB0aGUgbWFpbiBub2RlIChkYXRhIHN0b3JlKS4gQ3JlYXRlZCBub2RlcyBhcmUgXCJyb29tc0xpc3RcIiwgXCJyZWFjaFwiLCBcIndlYnJ0Y1wiLCBcInNpcFBob25lTnVtYmVyc1wiLlxuXHQgKi9cblx0ZnVuY3Rpb24gX2luaXRDaGlsZHJlbigpIHtcblx0XHRfcm9vbXMgPSBfZGF0YXN0b3JlLmNoaWxkKCdyb29tc0xpc3QnKTtcblx0XHRfcmVhY2ggPSBfZGF0YXN0b3JlLmNoaWxkKCdyZWFjaCcpO1xuXHRcdF93ZWJydGMgPSBfZGF0YXN0b3JlLmNoaWxkKCd3ZWJydGMnKTtcblx0XHRfc2lwUGhvbmVOdW1iZXJzID0gX2RhdGFzdG9yZS5jaGlsZCgnc2lwUGhvbmVOdW1iZXJzJyk7XG5cdH1cblxuXHQvKipcblx0ICogVGhlIGluaXRpYWxpemF0aW9uIGZ1bmN0aW9uIHdoaWNoIGluc3RhbnRpYXRlcyB0aGUgV2ViY29tIHN0b3JlZCBpbiB0aGUgZGF0YSBzdG9yZS5cblx0ICogQWxsIHRoZSBjaGlsZHJlbiBub2Rlc25hcmUgZGVmaW5lcyBoZXJlLlxuXHQgKi9cblx0ZnVuY3Rpb24gX2luaXQoKSB7XG5cdFx0X2RhdGFzdG9yZSA9IG5ldyBXZWJjb20oV0VCQ09NQkFTRV9VUkwpO1xuXHRcdF9pbml0Q2hpbGRyZW4oKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBEZWZpbmVzIHRoZSBXZWJjb20gVVJMIGFuZCByZWluaXQgdGhlIGNoaWxkcmVuLlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gcF93ZWJjb21iYXNlX3VybCAtIFRoZSBVUkwgb2YgdGhlIFdlYmNvbVxuXHQgKi9cblx0ZnVuY3Rpb24gX3NldFdlYmNvbUJhc2VVcmwocF93ZWJjb21iYXNlX3VybCkge1xuXHRcdF9kYXRhc3RvcmUgPSBuZXcgV2ViY29tKHBfd2ViY29tYmFzZV91cmwpO1xuXHRcdF9pbml0Q2hpbGRyZW4oKTtcblx0fVxuXG5cdC8qKlxuXHQgKiByZXR1cm4gdGhlIFdlYmNvbSBVUkwuXG5cdCAqL1xuXHRmdW5jdGlvbiBfZ2V0V2ViY29tQmFzZVVybCgpIHtcblx0XHRpZiAoX2RhdGFzdG9yZSkge1xuXHRcdFx0cmV0dXJuIF9kYXRhc3RvcmUudG9TdHJpbmcoKTtcblx0XHR9XG5cdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0fVxuXG5cdC8qKlxuXHQgKiBEZWZpbmVzIHRoZSBkYXRhc3RvcmUgYW5kIHJlaW5pdCB0aGUgY2hpbGRyZW4uXG5cdCAqIEBwYXJhbSB7V2ViY29tfSBwX2RhdGFzdG9yZSAtIEEgV2ViY29tIG9iamVjdCB3aGljaCBpcyB0aGUgbmV3IGRhdGEgc3RvcmVcblx0ICovXG5cdGZ1bmN0aW9uIF9zZXREYXRhc3RvcmUocF9kYXRhc3RvcmUpIHtcblx0XHRfZGF0YXN0b3JlPXBfZGF0YXN0b3JlO1xuXHRcdF9pbml0Q2hpbGRyZW4oKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRoZSBkYXRhc3RvcmVcblx0ICogQHJldHVybiB7V2ViY29tfSAtIFRoZSBkYXRhIHN0b3JlIGFzIGEgV2ViY29tXG5cdCAqL1xuXHRmdW5jdGlvbiBfZ2V0RGF0YXN0b3JlKCkge1xuXHRcdHJldHVybiBfZGF0YXN0b3JlO1xuXHR9XG5cblxuXHQvKipcblx0ICogRGVmaW5lcyBhIG5ldyByb29tcyBub2RlXG5cdCAqIEBwYXJhbSBwX3Jvb21zIC0gQSBub2RlIGNvbnRhaW5pbmcgYWxsIHRoZSByb29tc1xuXHQgKi9cblx0ZnVuY3Rpb24gX3NldFJvb21zKHBfcm9vbXMpIHtcblx0XHRfcm9vbXM9cF9yb29tcztcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRoZSByb290IG5vZGUgb2YgdGhlIHJvb21zLlxuXHQgKiBAcmV0dXJuIC0gVGhlIG5vZGUgY29udGFpbmluZyBhbGwgdGhlIHJvb21zIGxpc3Rcblx0ICovXG5cdGZ1bmN0aW9uIF9nZXRSb29tcygpIHtcblx0XHRyZXR1cm4gX3Jvb21zO1xuXHR9XG5cblx0LyoqXG5cdCAqIERlZmluZXMgYSBuZXcgcmVhY2ggbm9kZVxuXHQgKiBAcGFyYW0gcF9yZWFjaCAtIEEgbm9kZSBjb250YWluaW5nIGFsbCB0aGUgZGF0YSBhYm91dCB0aGUgcmVhY2ggc2VydmljZVxuXHQgKi9cblx0ZnVuY3Rpb24gX3NldFJlYWNoKHBfcmVhY2gpIHtcblx0XHRfcmVhY2g9cF9yZWFjaDtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRoZSByZWFjaCBub2RlIG9mIHRoZSByb29tcy5cblx0ICogQHJldHVybiAtIFRoZSBub2RlIGNvbnRhaW5pbmcgYWxsIHRoZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcmVhY2ggc2VydmljZVxuXHQgKi9cblx0ZnVuY3Rpb24gX2dldFJlYWNoKCkge1xuXHRcdHJldHVybiBfcmVhY2g7XG5cdH1cblxuXHQvKipcblx0ICogRGVmaW5lcyBhIG5ldyB3ZWJydGMgbm9kZVxuXHQgKiBAcGFyYW0gcF93ZWJydGMgLSBBIG5vZGUgY29udGFpbmluZyBhbGwgdGhlIGRhdGEgYWJvdXQgdGhlIFdlYlJUQyBmZWF0dXJlXG5cdCAqL1xuXHRmdW5jdGlvbiBfc2V0V2VicnRjKHBfd2VicnRjKSB7XG5cdFx0X3dlYnJ0Yz1wX3dlYnJ0Yztcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRoZSBXZWJSVEMgbm9kZVxuXHQgKiBAcmV0dXJuIC0gVGhlIG5vZGUgY29udGFpbmlnIGFsbCB0aGUgZGF0YSBhYm91dCB0aGUgV2ViUlRDIGZlYXR1cmVcblx0ICovXG5cdGZ1bmN0aW9uIF9nZXRXZWJydGMoKSB7XG5cdFx0cmV0dXJuIF93ZWJydGM7XG5cdH1cblxuXHQvKipcblx0ICogRGVmaW5lcyBhIG5vZGUgY29udGFpbmluZyB0aGUgU0lQIHBob25lIG51bWJlcnNcblx0ICogQHBhcmFtIHBfc2lwUGhvbmVOdW1iZXJzIC0gVGhlIHJvb3Qgbm9kZSBjb250YWluaW5nIHRoZSBTSVAgcGhvbmUgbnVtYmVyc1xuXHQgKi9cblx0ZnVuY3Rpb24gX3NldFNpcFBob25lTnVtYmVycyhwX3NpcFBob25lTnVtYmVycykge1xuXHRcdF9zaXBQaG9uZU51bWJlcnM9cF9zaXBQaG9uZU51bWJlcnM7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyB0aGUgcm9vdCBub2RlIGNvbnRhaW5pbmcgdGhlIFNJUCBwaG9uZSBudW1iZXJzXG5cdCAqIEByZXR1cm4gLSBUaGUgcm9vdCBub2RlIHdpdGggdGhlIFNJUCBudW1iZXJzXG5cdCAqL1xuXHRmdW5jdGlvbiBfZ2V0U2lwUGhvbmVOdW1iZXJzKCkge1xuXHRcdHJldHVybiBfc2lwUGhvbmVOdW1iZXJzO1xuXHR9XG5cblx0X2luaXQoKTtcblxuXHRyZXR1cm4ge1xuXHRcdC8qKlxuXHRcdCAqIERlZmluZXMgdGhlIFdlYmNvbSBVUkwgYW5kIHJlaW5pdCB0aGUgY2hpbGRyZW4uXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IHBfd2ViY29tYmFzZV91cmwgLSBUaGUgVVJMIG9mIHRoZSBXZWJjb21cblx0XHQgKi9cblx0XHRzZXRXZWJjb21CYXNlVXJsIDogX3NldFdlYmNvbUJhc2VVcmwsXG5cdFx0LyoqXG5cdFx0ICogcmV0dXJuIHRoZSBXZWJjb20gVVJMLlxuXG5cdFx0ICovXG5cdFx0Z2V0V2ViY29tQmFzZVVybCA6IF9nZXRXZWJjb21CYXNlVXJsLFxuXHRcdC8qKlxuXHRcdCAqIERlZmluZXMgdGhlIGRhdGFzdG9yZSBhbmQgcmVpbml0IHRoZSBjaGlsZHJlbi5cblx0XHQgKiBAcGFyYW0ge1dlYmNvbX0gcF9kYXRhc3RvcmUgLSBBIFdlYmNvbSBvYmplY3Qgd2hpY2ggaXMgdGhlIG5ldyBkYXRhIHN0b3JlXG5cdFx0ICovXG5cdFx0c2V0RGF0YXN0b3JlIDogX3NldERhdGFzdG9yZSxcblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIHRoZSBkYXRhc3RvcmVcblx0XHQgKiBAcmV0dXJuIHtXZWJjb219IC0gVGhlIGRhdGEgc3RvcmUgYXMgYSBXZWJjb21cblx0XHQgKi9cblx0XHRnZXREYXRhc3RvcmUgOiBfZ2V0RGF0YXN0b3JlLFxuXHRcdC8qKlxuXHRcdCAqIERlZmluZXMgYSBuZXcgcm9vbXMgbm9kZVxuXHRcdCAqIEBwYXJhbSBwX3Jvb21zIC0gQSBub2RlIGNvbnRhaW5pbmcgYWxsIHRoZSByb29tc1xuXHRcdCAqL1xuXHRcdHNldFJvb21zIDogX3NldFJvb21zLFxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgdGhlIHJvb3Qgbm9kZSBvZiB0aGUgcm9vbXMuXG5cdFx0ICogQHJldHVybiAtIFRoZSBub2RlIGNvbnRhaW5pbmcgYWxsIHRoZSByb29tcyBsaXN0XG5cdFx0ICovXG5cdFx0Z2V0Um9vbXMgOiBfZ2V0Um9vbXMsXG5cdFx0LyoqXG5cdFx0ICogRGVmaW5lcyBhIG5ldyByZWFjaCBub2RlXG5cdFx0ICogQHBhcmFtIHBfcmVhY2ggLSBBIG5vZGUgY29udGFpbmluZyBhbGwgdGhlIGRhdGEgYWJvdXQgdGhlIHJlYWNoIHNlcnZpY2Vcblx0XHQgKi9cblx0XHRzZXRSZWFjaCA6IF9zZXRSZWFjaCxcblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIHRoZSByZWFjaCBub2RlIG9mIHRoZSByb29tcy5cblx0XHQgKiBAcmV0dXJuIC0gVGhlIG5vZGUgY29udGFpbmluZyBhbGwgdGhlIGluZm9ybWF0aW9uIGFib3V0IHRoZSByZWFjaCBzZXJ2aWNlXG5cdFx0ICovXG5cdFx0Z2V0UmVhY2ggOiBfZ2V0UmVhY2gsXG5cdFx0LyoqXG5cdFx0ICogRGVmaW5lcyBhIG5ldyB3ZWJydGMgbm9kZVxuXHRcdCAqIEBwYXJhbSBwX3dlYnJ0YyAtIEEgbm9kZSBjb250YWluaW5nIGFsbCB0aGUgZGF0YSBhYm91dCB0aGUgV2ViUlRDIGZlYXR1cmVcblx0XHQgKi9cblx0XHRzZXRXZWJydGMgOiBfc2V0V2VicnRjLFxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgdGhlIFdlYlJUQyBub2RlXG5cdFx0ICogQHJldHVybiAtIFRoZSBub2RlIGNvbnRhaW5pZyBhbGwgdGhlIGRhdGEgYWJvdXQgdGhlIFdlYlJUQyBmZWF0dXJlXG5cdFx0ICovXG5cdFx0Z2V0V2VicnRjIDogX2dldFdlYnJ0Yyxcblx0XHQvKipcblx0XHQgKiBEZWZpbmVzIGEgbm9kZSBjb250YWluaW5nIHRoZSBTSVAgcGhvbmUgbnVtYmVyc1xuXHRcdCAqIEBwYXJhbSBwX3NpcFBob25lTnVtYmVycyAtIFRoZSByb290IG5vZGUgY29udGFpbmluZyB0aGUgU0lQIHBob25lIG51bWJlcnNcblx0XHQgKi9cblx0XHRzZXRTaXBQaG9uZU51bWJlcnMgOiBfc2V0U2lwUGhvbmVOdW1iZXJzLFxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgdGhlIHJvb3Qgbm9kZSBjb250YWluaW5nIHRoZSBTSVAgcGhvbmUgbnVtYmVyc1xuXHRcdCAqIEByZXR1cm4gLSBUaGUgcm9vdCBub2RlIHdpdGggdGhlIFNJUCBudW1iZXJzXG5cdFx0ICovXG5cdFx0Z2V0U2lwUGhvbmVOdW1iZXJzIDogX2dldFNpcFBob25lTnVtYmVyc1xuXHR9O1xufVxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2RhdGFyZWZzLmpzXG4gKiovIiwiLyoqXG4gKiBAZmlsZSByZWFjaC5qcyAtIEpTIGZpbGUgdG8gdXNlIGZvciB0aGUgcmVhY2ggc2VydmljZS4gVGhpcyBzZXJ2aWNlIGFsbG93cyB0byBjcmVhdGUgYSBkZWRpY2F0ZWQgcm9vbSBmb3IgdXNlcnMgc28gYXMgdG8gcHJvdmlkZSB0aGVtIGEgY29tbXVuaWNhdGlvbiBzdWl0ZS5cbiAqIEBhdXRob3IgV2ViY29tXG4gKi9cblxuLyplc2xpbnQgY29tcGxleGl0eToxLCBtYXgtc3RhdGVtZW50czogMSwgbWF4LWxlbjogMSovXG5cbmltcG9ydCB1dGlscyBmcm9tICcuL3V0aWxzJztcblxuLyoqXG4gKiBJTlZJVEUgc3RhdHVzIDogb25nb2luZyBzdGF0dXNcbiAqIEBjb25zdGFudFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuY29uc3QgSU5WSVRBVElPTl9PTkdPSU5HID0gJ09OR09JTkcnO1xuXG4vKipcbiAqIElOVklURSBzdGF0dXMgOiBhY2NlcHRlZCBzdGF0dXNcbiAqIEBjb25zdGFudFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuY29uc3QgSU5WSVRBVElPTl9BQ0NFUFRFRCA9ICdBQ0NFUFRFRCc7XG5cbi8qKlxuICogSU5WSVRFIHN0YXR1cyA6IHJlZnVzZWQgc3RhdHVzXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmNvbnN0IElOVklUQVRJT05fUkVKRUNURUQgPSAnUkVKRUNURUQnO1xuXG4vKipcbiAqIElOVklURSBzdGF0dXMgOiBjYW5jZWxlZCBzdGF0dXNcbiAqIEBjb25zdGFudFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuY29uc3QgSU5WSVRBVElPTl9DQU5DRUxFRCA9ICdDQU5DRUxFRCc7XG5cbi8qKlxuICogREVWSUNFX1NUQVRVU19DT05ORVRFRCBzdGF0dXMgOiBjb25uZWN0ZWQgc3RhdHVzXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmNvbnN0IERFVklDRV9TVEFUVVNfQ09OTkVDVEVEID0gJ0NPTk5FQ1RFRCc7XG5cbi8qKlxuICogUk9PTV9TVEFUVVNfT1BFTiBzdGF0dXMgOiByb29tIGlzIG9wZW4gLyBhY3RpdmVcbiAqIEBjb25zdGFudFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuY29uc3QgUk9PTV9TVEFUVVNfT1BFTiA9ICdPUEVOJztcblxuXG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZGVzY3JpcHRpb24gVGhlIHJlYWNoIG9iamVjdCB3aXRoIGl0cyBzdHJlYW1zLCBmbGFncyBhbmQgY2FsbGJhY2tzLlxuICogVGhpcyBvYmplY3QgaXMgdXNlZCBzbyBhcyB0byBtYWtlIGluIGNvbm5lY3Rpb24gc2V2ZXJhbCB1c2Vycy4gVGhlIHJvb20gSW52aXRlcyBtYW5hZ2VtZW50IChhY2NlcHQgLyByZWZ1c2UgLyBjYW5jZWwpLCB0aGUgdXNlciBtYW5hZ2VtZW50IChhZGQgLyByZW1vdmUpIGFuZFxuICogdGhlIEludml0ZSBhcmUgaGFuZGxlZCBoZXJlLlxuICogQHBhcmFtIHtzdHJpbmd9IHBfbWUgLSBUaGUgdXNlciBpZGVudGlmaWVyXG4gKi9cbmNvbnN0IHJlYWNoID0gZnVuY3Rpb24gKHBfbWUsIGRhdGFyZWZzKSB7XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBUaGUgdXNlciBpZGVudGlmaWVyLiBUaGlzIGlkZW50aWZpZXIgd2lsbCBiZSB1c2UgdG8gY3JlYXRlIGEgZGVkaWNhdGVkIG5vZGUgaW4gdGhlIGRhdGFiYXNlIGZvciB0aGlzIHVzZXIuXG5cdCAqL1xuXHRjb25zdCBtZSA9IHBfbWU7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gVGhlIGRhdGEgcmVmIHBvaW50ZXIgZm9yIHRoZSByZWFjaCBwYXJ0LiBJdCBjYW4gYmUgY29uc2lkZXJlZCBhcyBhIHBvaW50ZXIgdG8gdGhlIGRhdGFiYXNlIHRvIHVzZSB0byBuYXZpZ2F0ZSBpbnRvIGl0IGFuZCBtb2RpZnkgaXRzIGNvbnRlbnQuXG5cdCAqL1xuXHRjb25zdCBkYXRhcmVmID0gZGF0YXJlZnMuZ2V0UmVhY2goKTtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBDYWxsYmFjayBoYW5kbGluZyB0aGUgdXNlciBhZGRpbmdcblx0ICovXG5cdGxldCBvblVzZXJBZGRlZENiID0gbnVsbDtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBDYWxsYmFjayBoYW5kbGluZyB0aGUgdXNlciBjaGFuZ2VzXG5cdCAqL1xuXHRsZXQgb25Vc2VyQ2hhbmdlZENiID0gbnVsbDtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBDYWxsYmFjayBoYW5kbGluZyB0aGUgdXNlciByZW1vdmFsXG5cdCAqL1xuXHRsZXQgb25Vc2VyUmVtb3ZlZENiID0gbnVsbDtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBDYWxsYmFjayBmb3IgbmV3IEludml0ZSByZWNlaXZlZFxuXHQgKi9cblx0bGV0IG5ld0ludml0ZUNiID0gbnVsbDtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBDYWxsYmFjayBmb3IgSW52aXRlIHJlY2VpdmVkIGNoYW5nZXNcblx0ICovXG5cdGxldCBvblJvb21JbnZpdGVDaGFuZ2VkQ2IgPSBudWxsO1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQW4gYXJyYXkgY29udGFpbmluZyBhbGwgb3V0Z29pbmcgSW52aXRlXG5cdCAqL1xuXHRsZXQgbU91dGdvaW5nSW52aXRlcyA9IFtdO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIEFuIGFycmF5IGNvbnRhaW5pbmcgYWxsIGluY29taW5nIEludml0YXRpb25cblx0ICovXG5cdGxldCBtSW5jb21pbmdJbnZpdGF0aW9uID0gW107XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gdGhlIHRpbWVvdXQgdG8gcmVqZWN0IGF1dG9tYXRpY2FsbHkgdGhlIEludml0ZVxuXHQgKi9cblx0bGV0IGF1dG9tYXRpY1JlamVjdFRpbWVPdXQgPSBudWxsO1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gdGhlIHJlYXNvbiB0byByZWplY3QgYXV0b21hdGljYWxseSB0aGUgSW52aXRlXG5cdCAqL1xuXHRsZXQgYXV0b21hdGljUmVqZWN0UmVhc29uID0gbnVsbDtcblxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIHRoZSBjdXJyZW50IGRldmljZSBJZFxuXHQgKi9cblx0bGV0IG1EZXZpY2VJZCA9IG51bGw7XG5cblx0LyoqXG5cdCogSW5pdGlhbGlzYXRpb24gZnVuY3Rpb24uIFVwZGF0ZXMgdGhlIGRhdGFyZWYgYWJvdXQgdGhlIHVzZXIgaWRlbnRpZmllciBpbiB0aGUgdXNlciBsaXN0IDpcblx0KiBpdCB3aWxsIGRpc2Nvbm5lY3QgYW5kIHJlY29ubmVjdCBpdC5cblx0Ki9cblx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0XHRtRGV2aWNlSWQgPSBkYXRhcmVmLmNoaWxkKGB1c2VyTGlzdC8ke21lfS9jb25uZWN0ZWRMaXN0LyR7dXRpbHMuYXBwSW5zdGFuY2VJZH1gKTtcblx0XHRtRGV2aWNlSWQub25EaXNjb25uZWN0KCkucmVtb3ZlKCk7XG5cdFx0bURldmljZUlkLmNoaWxkKCdzdGF0dXMnKS5zZXQoREVWSUNFX1NUQVRVU19DT05ORUNURUQpO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBkZXNjcmlwdGlvbiA9IG1EZXZpY2VJZC5jaGlsZCgnZGVzY3JpcHRpb24nKTtcblx0XHRcdGlmICh1dGlscy5hcHBJbnN0YW5jZUlkKSB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uLmNoaWxkKCdhcHBJbnN0YW5jZUlkJykuc2V0KHV0aWxzLmFwcEluc3RhbmNlSWQpO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdFxuXHRcdFx0XHRuYXZpZ2F0b3JEYXRhID0ge30sXG5cdFx0XHRcdHByb3BlcnRpZXMgPSBbXG5cdFx0XHRcdFx0J2FwcENvZGVOYW1lJyxcblx0XHRcdFx0XHQnYXBwTmFtZScsXG5cdFx0XHRcdFx0J2FwcFZlcnNpb24nLFxuXHRcdFx0XHRcdCdidWlsZElEJyxcblx0XHRcdFx0XHQnY29va2llRW5hYmxlZCcsXG5cdFx0XHRcdFx0J2xhbmd1YWdlJyxcblx0XHRcdFx0XHQnb25MaW5lJyxcblx0XHRcdFx0XHQnb3NjcHUnLFxuXHRcdFx0XHRcdCdwbGF0Zm9ybScsXG5cdFx0XHRcdFx0J3Byb2R1Y3QnLFxuXHRcdFx0XHRcdCdwcm9kdWN0U3ViJyxcblx0XHRcdFx0XHQnc2VjdXJpdHlQb2xpY3knLFxuXHRcdFx0XHRcdCd1c2VyQWdlbnQnLFxuXHRcdFx0XHRcdCd2ZW5kb3InLFxuXHRcdFx0XHRcdCd2ZW5kb3JTdWInXG5cdFx0XHRcdF07XG5cdFx0XHRwcm9wZXJ0aWVzLmZvckVhY2goKHByb3BlcnR5KSA9PiB7XG5cdFx0XHRcdGlmKG5hdmlnYXRvcltwcm9wZXJ0eV0pIHtcblx0XHRcdFx0XHRuYXZpZ2F0b3JEYXRhW3Byb3BlcnR5XSA9IG5hdmlnYXRvcltwcm9wZXJ0eV07XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0ZGVzY3JpcHRpb24uY2hpbGQoJ25hdmlnYXRvcicpLnNldChuYXZpZ2F0b3JEYXRhKTtcblxuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoYChSZWFjaFNESzo6cmVhY2g6OmluaXQpZmFpbGVkIHRvIGdldCBpbmZvcm1hdGlvbiBhYm91dCBkZXZpY2UuIGVycm9yPSR7ZX1gKTtcblx0XHR9XG5cdFx0ZGF0YXJlZi5jaGlsZChgdXNlckxpc3QvJHttZX0vd2FzSW5zaWRlUmVhY2hgKS5zZXQodHJ1ZSk7XG5cdH1cblxuXHQvKipcblx0ICogY2hlY2sgaWYgYSB1c2VyIGlzIGNvbm5lY3RlZFxuXHQgKiBAcGFyYW0ge3N0cmluZ30gcF91c2VySWQgLSB0aGUgdXNlciBJZFxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwX2NiIC0gdGhlIGNhbGxiYWNrIHRyaWdnZXJzIHRvIHJldHVybiB0aGUgcmVzdWx0LiBUaGUgcmVzdWx0IHdpbGwgYmUgcGFzc2VkIGluIHBhcmFtZXRlciBhcyBib29sZWFuIDogdHJ1ZSA9IGNvbm5lY3RlZCAvIGZhbHNlID0gbm90IGNvbm5lY3RlZFxuXHQgKi9cblx0ZnVuY3Rpb24gX2lzQ29ubmVjdGVkKHBfdXNlcklkLHBfY2IpIHtcblx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyZWFjaDo6X2lzQ29ubmVjdGVkKXVzZXJJZDogJHtwX3VzZXJJZH1gKTtcblx0XHRkYXRhcmVmLmNoaWxkKGB1c2VyTGlzdC8ke3BfdXNlcklkfS9jb25uZWN0ZWRMaXN0YCkub25jZSgndmFsdWUnLCAoc25hcHNob3QpID0+IHtcblx0XHRcdC8vIG9uVXNlckNvbm5lY3RlZENiLiBVc2VyIGlzIGNvbm5lY3RlZCBpZiBzbmFwc2hvdCB2YWx1ZSBpcyBub3QgbnVsbFxuXHRcdFx0aWYgKHBfY2IgJiYgdHlwZW9mIHBfY2IgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRwX2NiKHNuYXBzaG90LnZhbCgpICE9PSBudWxsKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBjaGVjayBpZiBhIHVzZXIgaXMgcmVnaXN0ZXJcblx0ICogQHBhcmFtIHtzdHJpbmd9IHBfdXNlcklkIC0gdGhlIHVzZXIgSWRcblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gcF9jYiAtIHRoZSBjYWxsYmFjayB0cmlnZ2VycyB0byByZXR1cm4gdGhlIHJlc3VsdC4gVGhlIHJlc3VsdCB3aWxsIGJlIHBhc3NlZCBpbiBwYXJhbWV0ZXIgYXMgYm9vbGVhbiA6IHRydWUgPSByZWdpc3RlcmVkIC8gZmFsc2UgPSBub3QgcmVnaXN0ZXJlZFxuXHQgKi9cblx0ZnVuY3Rpb24gX2lzUmVnaXN0ZXJlZChwX3VzZXJJZCxwX2NiKSB7XG5cdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cmVhY2g6Ol9pc1JlZ2lzdGVyZWQpdXNlcklkOiAke3BfdXNlcklkfWApO1xuXHRcdGRhdGFyZWYuY2hpbGQoYHVzZXJMaXN0LyR7cF91c2VySWR9L3dhc0luc2lkZVJlYWNoYCkub25jZSgndmFsdWUnLCAoc25hcHNob3QpID0+IHtcblx0XHRcdC8vIG9uVXNlclJlZ2lzdGVyZWRDYi4gVXNlciBpcyByZWdpc3RlcmVkIGlmIHNuYXBzaG90IHZhbHVlIGlzIG5vdCBudWxsXG5cdFx0XHRpZiAocF9jYiAmJiB0eXBlb2YgcF9jYiA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdHBfY2Ioc25hcHNob3QudmFsKCkgIT09IG51bGwpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIHNldCB0aGUgZGV2aWNlIHN0YXR1cyAoREVWSUNFX1NUQVRVU19DT05ORUNURUQpXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBwX3N0YXR1cyAtIHRoZSBuZXcgc3RhdHVzXG5cdCAqL1xuXHRmdW5jdGlvbiBfc2V0Q29ubmVjdGVkU3RhdHVzKHBfc3RhdHVzKSB7XG5cdFx0aWYgKG1EZXZpY2VJZCkge1xuXHRcdFx0bURldmljZUlkLmNoaWxkKCdzdGF0dXMnKS5zZXQocF9zdGF0dXMpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBEZWZpbmVzIHRoZSBjYWxsYmFjayB0byB0cmlnZ2VyIHdoZW4gYSBuZXcgdXNlciBpcyBhZGRlZFxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwX2NiIC0gVGhlIGNhbGxiYWNrIHRvIHVzZVxuXHQgKi9cblx0ZnVuY3Rpb24gX3NldE9uVXNlckFkZGVkKHBfY2IpIHtcblx0XHRpZiAob25Vc2VyQWRkZWRDYikge1xuXHRcdFx0ZGF0YXJlZi5jaGlsZCgndXNlckxpc3QnKS5vZmYoJ2NoaWxkX2FkZGVkJywgb25Vc2VyQWRkZWRDYik7XG5cdFx0XHRvblVzZXJBZGRlZENiID0gbnVsbDtcblx0XHR9XG5cdFx0aWYgKHBfY2IgJiYgdHlwZW9mIHBfY2IgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0b25Vc2VyQWRkZWRDYiA9IGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJlYWNoOjpvblVzZXJBZGRlZENiKSAke3NuYXBzaG90Lm5hbWUoKX09JHtKU09OLnN0cmluZ2lmeShzbmFwc2hvdC52YWwoKSl9YCk7XG5cdFx0XHRcdGNvbnN0IG9iaiA9IHt9O1xuXHRcdFx0XHRvYmpbc25hcHNob3QubmFtZSgpXSA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0XHRwX2NiKG9iaik7XG5cdFx0XHR9O1xuXHRcdFx0ZGF0YXJlZi5jaGlsZCgndXNlckxpc3QnKS5vbignY2hpbGRfYWRkZWQnLCBvblVzZXJBZGRlZENiKTtcblx0XHR9XG5cdH1cblx0LyoqXG5cdCAqIERlZmluZXMgdGhlIGNhbGxiYWNrIHRvIHRyaWdnZXIgd2hlbiB0aGUgdXNlciBoYXMgY2hhbmdlZFxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwX2NiIC0gVGhlIGNhbGxiYWNrIHRvIHVzZVxuXHQgKi9cblx0ZnVuY3Rpb24gX3NldE9uVXNlckNoYW5nZWQocF9jYikge1xuXHRcdGlmIChvblVzZXJDaGFuZ2VkQ2IpIHtcblx0XHRcdGRhdGFyZWYuY2hpbGQoJ3VzZXJMaXN0Jykub2ZmKCdjaGlsZF9jaGFuZ2VkJywgb25Vc2VyQ2hhbmdlZENiKTtcblx0XHRcdG9uVXNlckNoYW5nZWRDYiA9IG51bGw7XG5cdFx0fVxuXHRcdGlmIChwX2NiICYmIHR5cGVvZiBwX2NiID09ICdmdW5jdGlvbicpIHtcblx0XHRcdG9uVXNlckNoYW5nZWRDYiA9IGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJlYWNoOjpvblVzZXJDaGFuZ2VkQ2IpICR7c25hcHNob3QubmFtZSgpfT0ke0pTT04uc3RyaW5naWZ5KHNuYXBzaG90LnZhbCgpKX1gKTtcblx0XHRcdFx0Y29uc3Qgb2JqID0ge307XG5cdFx0XHRcdG9ialtzbmFwc2hvdC5uYW1lKCldPXNuYXBzaG90LnZhbCgpO1xuXHRcdFx0XHRwX2NiKG9iaik7XG5cdFx0XHR9O1xuXHRcdFx0ZGF0YXJlZi5jaGlsZCgndXNlckxpc3QnKS5vbignY2hpbGRfY2hhbmdlZCcsIG9uVXNlckNoYW5nZWRDYik7XG5cdFx0fVxuXG5cdH1cblx0LyoqXG5cdCAqIERlZmluZXMgdGhlIGNhbGxiYWNrIHRvIHRyaWdnZXIgd2hlbiBhIHVzZXIgaGFzIGJlZW4gcmVtb3ZlZC5cblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gcF9jYiAtIFRoZSBjYWxsYmFjayB0byB1c2Vcblx0ICovXG5cdGZ1bmN0aW9uIF9zZXRPblVzZXJSZW1vdmVkKHBfY2IpIHtcblx0XHRpZiAob25Vc2VyUmVtb3ZlZENiKSB7XG5cdFx0XHRkYXRhcmVmLmNoaWxkKCd1c2VyTGlzdCcpLm9mZignY2hpbGRfcmVtb3ZlZCcsb25Vc2VyUmVtb3ZlZENiKTtcblx0XHRcdG9uVXNlclJlbW92ZWRDYiA9IG51bGw7XG5cdFx0fVxuXHRcdGlmIChwX2NiICYmIHR5cGVvZiBwX2NiID09ICdmdW5jdGlvbicpIHtcblx0XHRcdG9uVXNlclJlbW92ZWRDYiA9IGZ1bmN0aW9uKHNuYXBzaG90KSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJlYWNoOjpvblVzZXJSZW1vdmVkQ2IpICR7c25hcHNob3QubmFtZSgpfT0ke0pTT04uc3RyaW5naWZ5KHNuYXBzaG90LnZhbCgpKX1gKTtcblx0XHRcdFx0Y29uc3Qgb2JqID0ge307XG5cdFx0XHRcdG9ialtzbmFwc2hvdC5uYW1lKCldPXNuYXBzaG90LnZhbCgpO1xuXHRcdFx0XHRwX2NiKG9iaik7XG5cdFx0XHR9O1xuXHRcdFx0ZGF0YXJlZi5jaGlsZCgndXNlckxpc3QnKS5vbignY2hpbGRfcmVtb3ZlZCcsb25Vc2VyUmVtb3ZlZENiKTtcblx0XHR9XG5cblx0fVxuXG5cdC8qKlxuXHQgKiBEZWZpbmVzIHRoZSBjYWxsYmFjayB0byB0cmlnZ2VyIHdoZW4gYSByb29tIEludml0ZSBoYXMgYmVlbiByZWNlaXZlZC5cblx0ICogT3RoZXIgY2FsbGJhY2tzIHdpbGwgYmUgdHJpZ2dlcmVkIGFib3V0IEludml0ZSBsaXN0cy5cblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gcF9vbk5ld1Jvb21JbnZpdGVDYiAtIFRoZSBjYWxsYmFjayB0cmlnZ2VycyB3aGVuIGEgSW52aXRlIGlzIHJlY2VpdmVkIChzdGF0dXMgPSBvbiBnb2luZylcblx0ICovXG5cdGZ1bmN0aW9uIF9zZXRPbk5ld1Jvb21JbnZpdGF0aW9uKHBfb25OZXdSb29tSW52aXRlQ2IpIHtcblxuXHRcdGlmIChuZXdJbnZpdGVDYikge1xuXHRcdFx0ZGF0YXJlZi5jaGlsZChgaW52aXRhdGlvbkxpc3QvJHttZX1gKS5vZmYoJ2NoaWxkX2FkZGVkJyxuZXdJbnZpdGVDYik7XG5cdFx0XHRuZXdJbnZpdGVDYiA9IG51bGw7XG5cdFx0fVxuXG5cdFx0aWYgKHBfb25OZXdSb29tSW52aXRlQ2IgJiYgdHlwZW9mIHBfb25OZXdSb29tSW52aXRlQ2IgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0bmV3SW52aXRlQ2IgPSAoc25hcHNob3QpID0+IHtcblx0XHRcdFx0aWYgKHNuYXBzaG90LnZhbCgpLnN0YXR1cz09PSBJTlZJVEFUSU9OX09OR09JTkcpIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyZWFjaDo6X3NldE9uTmV3Um9vbUludml0YXRpb24pbmV3IEludml0ZSByZWNlaXZlZCxpZCkgJHtzbmFwc2hvdC5uYW1lKCl9LGNvbnRlbnQ9JHtKU09OLnN0cmluZ2lmeShzbmFwc2hvdC52YWwoKSl9YCk7XG5cdFx0XHRcdFx0Y29uc3QgaW52aXRhdGlvbklkID0gc25hcHNob3QubmFtZSgpO1xuXHRcdFx0XHRcdGlmICghbUluY29taW5nSW52aXRhdGlvbikge1xuXHRcdFx0XHRcdFx0bUluY29taW5nSW52aXRhdGlvbiA9IFtdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAobUluY29taW5nSW52aXRhdGlvbltpbnZpdGF0aW9uSWRdKSB7XG5cdFx0XHRcdFx0XHRpZiAobUluY29taW5nSW52aXRhdGlvbltpbnZpdGF0aW9uSWRdLnRpbWVvdXQpIHtcblx0XHRcdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KG1JbmNvbWluZ0ludml0YXRpb25baW52aXRhdGlvbklkXS50aW1lb3V0KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGRlbGV0ZSBtSW5jb21pbmdJbnZpdGF0aW9uW2ludml0YXRpb25JZF07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdG1JbmNvbWluZ0ludml0YXRpb25baW52aXRhdGlvbklkXT17fTtcblxuXHRcdFx0XHRcdGNvbnN0IG9iaiA9IHt9O1xuXHRcdFx0XHRcdG9ialtpbnZpdGF0aW9uSWRdID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcdFx0cF9vbk5ld1Jvb21JbnZpdGVDYihvYmopO1xuXG5cdFx0XHRcdFx0Y29uc3QgaW52aXRhdGlvblJlZiA9IGRhdGFyZWYuY2hpbGQoYGludml0YXRpb25MaXN0LyR7bWV9LyR7aW52aXRhdGlvbklkfWApO1xuXG5cdFx0XHRcdFx0aWYgKGF1dG9tYXRpY1JlamVjdFRpbWVPdXQpIHtcblx0XHRcdFx0XHRcdG1JbmNvbWluZ0ludml0YXRpb25baW52aXRhdGlvbklkXS50aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGlmIChhdXRvbWF0aWNSZWplY3RUaW1lT3V0KSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cmVhY2g6Ol9zZXRPbk5ld1Jvb21JbnZpdGF0aW9uKWF1dG9tYXRpYyByZWplY3Qgb2YgSW52aXRlIHJlY2VpdmVkPSR7SlNPTi5zdHJpbmdpZnkoc25hcHNob3QudmFsKCkpfWApO1xuXHRcdFx0XHRcdFx0XHRcdGludml0YXRpb25SZWYub25EaXNjb25uZWN0KCkuY2FuY2VsKCk7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGF1dG9tYXRpY1JlamVjdFJlYXNvbikge1xuXHRcdFx0XHRcdFx0XHRcdFx0aW52aXRhdGlvblJlZi51cGRhdGUoe1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aW1lc3RhbXBfZW5kOiBXZWJjb20uU2VydmVyVmFsdWUuVElNRVNUQU1QLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzdGF0dXM6IElOVklUQVRJT05fUkVKRUNURUQsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHN0YXR1c19pbmZvOiBhdXRvbWF0aWNSZWplY3RSZWFzb25cblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpbnZpdGF0aW9uUmVmLnVwZGF0ZSh7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRpbWVzdGFtcF9lbmQ6IFdlYmNvbS5TZXJ2ZXJWYWx1ZS5USU1FU1RBTVAsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHN0YXR1czogSU5WSVRBVElPTl9SRUpFQ1RFRFxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9LCBhdXRvbWF0aWNSZWplY3RUaW1lT3V0KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpbnZpdGF0aW9uUmVmLm9uY2UoJ2NoaWxkX2NoYW5nZWQnLCAoc25hcHNob3QpID0+IHtcblx0XHRcdFx0XHRcdGlmKHNuYXBzaG90ICYmIHNuYXBzaG90Lm5hbWUoKSA9PT0gJ3N0YXR1cycpIHtcblx0XHRcdFx0XHRcdFx0c25hcHNob3QucmVmKCkucGFyZW50KCkub25jZSgndmFsdWUnLCAoc25hcHNob3QyKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0bGV0IGNiX2ludml0YXRpb25JZCxjYl9vYmpfY29udGVudDtcblx0XHRcdFx0XHRcdFx0XHRpZiAoc25hcHNob3QyKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjYl9pbnZpdGF0aW9uSWQgPSBzbmFwc2hvdC5yZWYoKS5wYXJlbnQoKS5uYW1lKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRjYl9vYmpfY29udGVudD0gc25hcHNob3QyLnZhbCgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgY2Jfb2JqID0ge307XG5cdFx0XHRcdFx0XHRcdFx0XHRjYl9vYmpbY2JfaW52aXRhdGlvbklkXSA9IGNiX29ial9jb250ZW50O1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKG1JbmNvbWluZ0ludml0YXRpb24gJiYgbUluY29taW5nSW52aXRhdGlvbltjYl9pbnZpdGF0aW9uSWRdICYmIG1JbmNvbWluZ0ludml0YXRpb25bY2JfaW52aXRhdGlvbklkXS50aW1lb3V0KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNsZWFyVGltZW91dChtSW5jb21pbmdJbnZpdGF0aW9uW2NiX2ludml0YXRpb25JZF0udGltZW91dCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyZWFjaDo6X3NldE9uTmV3Um9vbUludml0YXRpb24pSW52aXRlIGNoYW5nZWQsaWQ9KSAke2NiX2ludml0YXRpb25JZH0sIG5ldyBjb250ZW50PSR7SlNPTi5zdHJpbmdpZnkoY2Jfb2JqX2NvbnRlbnQpfWApO1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNiX29iaiAmJiBvblJvb21JbnZpdGVDaGFuZ2VkQ2IgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG9uUm9vbUludml0ZUNoYW5nZWRDYihjYl9vYmopO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0ZGVsZXRlIG1JbmNvbWluZ0ludml0YXRpb25bY2JfaW52aXRhdGlvbklkXTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRkYXRhcmVmLmNoaWxkKGBpbnZpdGF0aW9uTGlzdC8ke21lfWApLm9uKCdjaGlsZF9hZGRlZCcsIG5ld0ludml0ZUNiKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogRGVmaW5lcyB0aGUgY2FsbGJhY2sgdG8gdHJpZ2dlciB3aGVuIGEgcm9vbSBJbnZpdGUgaGFzIGJlZW4gY2hhbmdlZC5cblx0ICogT3RoZXIgY2FsbGJhY2tzIHdpbGwgYmUgdHJpZ2dlcmVkIGFib3V0IEludml0ZSBsaXN0cy5cblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gcF9vblJvb21JbnZpdGVDaGFuZ2VkQ2IgLSBUaGUgY2FsbGJhY2sgdHJpZ2dlcnMgd2hlbiB0aGUgc2F0dXMgb24gdGhlIEludml0ZSByZWNlaXZlZCBoYXMgY2hhbmdlZCAoc3RhdHVzID0gYWNjZXB0ZWQvcmVqZWN0ZWQvY2FuY2VsZWQpXG5cdCAqL1xuXHRmdW5jdGlvbiBfc2V0T25Sb29tSW52aXRhdGlvbkNoYW5nZWQocF9vblJvb21JbnZpdGVDaGFuZ2VkQ2IpIHtcblxuXHRcdGlmIChvblJvb21JbnZpdGVDaGFuZ2VkQ2IpIHtcblx0XHRcdG9uUm9vbUludml0ZUNoYW5nZWRDYiA9IG51bGw7XG5cdFx0fVxuXG5cdFx0aWYgKHBfb25Sb29tSW52aXRlQ2hhbmdlZENiICYmIHR5cGVvZiBwX29uUm9vbUludml0ZUNoYW5nZWRDYiA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRvblJvb21JbnZpdGVDaGFuZ2VkQ2IgPSBwX29uUm9vbUludml0ZUNoYW5nZWRDYjtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogRGVmaW5lcyBhIHRpbWVvdXQgdG8gcmVqZWN0IGF1dG9tYXRpY2FsbHkgdGhlIGluY29taW5nIEludml0ZVxuXHQgKiBAcGFyYW0ge2ludGVnZXJ9IHBfdGltZW91dCAtIFRoZSBkZWxheVxuXHQgKiBAcGFyYW0ge3N0cmluZ30gcF9yZWFzb24gLSBvcHRpb25hbCBpbmZvIGFib3V0IHRoZSByZWplY3Rcblx0ICovXG5cdGZ1bmN0aW9uIF9zZXROZXdSb29tSW52aXRhdGlvblRpbWVvdXQocF90aW1lb3V0LHBfcmVhc29uKSB7XG5cdFx0aWYgKGF1dG9tYXRpY1JlamVjdFRpbWVPdXQpIHtcblx0XHRcdGF1dG9tYXRpY1JlamVjdFRpbWVPdXQgPSBudWxsO1xuXHRcdH1cblx0XHRpZiAoYXV0b21hdGljUmVqZWN0UmVhc29uKSB7XG5cdFx0XHRhdXRvbWF0aWNSZWplY3RSZWFzb24gPSBudWxsO1xuXHRcdH1cblxuXHRcdGlmIChwX3RpbWVvdXRcdCYmIHBfdGltZW91dCA9PT0gcGFyc2VJbnQocF90aW1lb3V0LCAxMCkgJiYgcF90aW1lb3V0PjApIHtcblx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJlYWNoOjpfc2V0TmV3Um9vbUludml0YXRpb25UaW1lb3V0KXRpbWVvdXQ9JHtwX3RpbWVvdXR9YCk7XG5cdFx0XHRhdXRvbWF0aWNSZWplY3RUaW1lT3V0PXBfdGltZW91dDtcblx0XHR9XG5cdFx0aWYgKHBfcmVhc29uKSB7XG5cdFx0XHRhdXRvbWF0aWNSZWplY3RSZWFzb249cF9yZWFzb247XG5cdFx0fVxuXHR9XG5cblxuXHQvKipcblx0ICogdGVzdCBpZiBwX3VzZXIgIGlzIGFscmVhZHkgcHJlc2VudCBpbiB0aGUgcGFydGljaXBhbnQgbGlzdCBvZiB0aGUgcm9vbSBwX3Jvb21JZFxuXHQgKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gcF9yb29tSWQgLSBUaGUgcm9vbSB1c2VkIGFzIHRoZSBuYW1lIG9mIGEgYnJhbmNoIGlzIHRoZSBkYXRhYmFzZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30gcF91c2VyIC0gVGhlIHVzZXIgSWRcblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gcF9jYiAtIHRoZSBjYWxsYmFjayBmdW5jdGlvbiB0byB0aWdnZXIgdG8gZ2V0IHRoZSByZXN1bHQuIEl0IHdpbGwgY29udGFpbnRzIGEgcGFyYW1ldGVyID0gdHJ1ZSBpcyBhbHJlYWR5IHByZXNlbnQsIGZhbHNlIGVpdGhlci5cblx0ICovXG5cdGZ1bmN0aW9uIF9pc1VzZXJQcmVzZW50SW5Sb29tKHBfcm9vbUlkLHBfdXNlcixwX2NiKSB7XG5cdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cmVhY2g6Ol9pc1VzZXJQcmVzZW50SW5Sb29tKXBfcm9vbUlkPSR7cF9yb29tSWR9IHBfdXNlcj0ke3BfdXNlcn1gKTtcblx0XHRpZiAoIShwX3Jvb21JZCAmJiB0eXBlb2YgcF9yb29tSWQgPT0gJ3N0cmluZycpKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCcoUmVhY2hTREs6OnJlYWNoOjpfaXNVc2VyUHJlc2VudEluUm9vbSlwYXJhbWV0ZXIgcF9yb29taWQgaXMgaW5jb3JyZWN0LiBFeHBlY3Rpbmcgbm9uIGVtcHR5IHN0cmluZycpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZiAoIShwX3VzZXIgJiYgdHlwZW9mIHBfdXNlciA9PSAnc3RyaW5nJykpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJyhSZWFjaFNESzo6cmVhY2g6Ol9pc1VzZXJQcmVzZW50SW5Sb29tKXBhcmFtZXRlciBwX3VzZXIgaXMgaW5jb3JyZWN0LiBFeHBlY3Rpbmcgbm9uIGVtcHR5IHN0cmluZycpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZiAoIShwX2NiICYmIHR5cGVvZiBwX2NiID09ICdmdW5jdGlvbicpKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCcoUmVhY2hTREs6OnJlYWNoOjpfaXNVc2VyUHJlc2VudEluUm9vbSlwYXJhbWV0ZXIgcF9jYiBpcyBpbmNvcnJlY3QuIGlmIGRlZmluZWQsIGV4cGVjdGluZyBhIGZ1bmN0aW9uJyk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGRhdGFyZWZzLmdldFJvb21zKCkuY2hpbGQoYCR7cF9yb29tSWR9L3BhcnRpY2lwYW50TGlzdC8ke3BfdXNlcn0vd2FzSW5zaWRlUm9vbWApLm9uY2UoJ3ZhbHVlJywgKHNuYXBzaG90KSA9PiB7XG5cdFx0XHRjb25zdCB3YXNQcmVzZW50ID0gKHNuYXBzaG90LnZhbCgpICE9PSBudWxsKTtcblx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJlYWNoOjpfaXNVc2VyUHJlc2VudEluUm9vbSlwX3Jvb21JZD0ke3Bfcm9vbUlkfSxwX3VzZXI9JHtwX3VzZXJ9LHJlc3VsdD0ke3dhc1ByZXNlbnR9YCk7XG5cdFx0XHRwX2NiKHdhc1ByZXNlbnQsIHBfcm9vbUlkLCBwX3VzZXIpO1xuXHRcdH0pO1xuXG5cdH1cblxuXG5cdC8qKlxuXHQgKiBDYW5jZWxzIHRoZSBJbnZpdGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IHBfcm9vbUlkIC0gVGhlIHJvb20gSWQgb2YgdGhlIEludml0ZVxuXHQgKiBAcGFyYW0ge2FycmF5W3N0aW5nXX0gcF9ndWVzdElkcyAtIG9wdGlvbmFsIDogQW4gYXJyYXkgcG9zc2Vzc2luZyB0aGUgaWRlbnRpZmllcnMgb2YgdGhlIGludml0ZWVzLiAoaWYgdW5kZWZpbmVkICwgIGFsbCBpbnZpdGVlIHdpbGwgaGF2ZSB0aGVpciBJbnZpdGUgY2FuY2VsZWQpXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBpbnZpdGVJZCAtIFRoZSBpbnZpdGUgaWRlbnRpZmllclxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwX2NiIC0gVGhlIGNhbGxiYWNrIHRyaWdnZXJlZCB3aGVuIHRoZSBvcGVyYXRpb24gaXMgY29tcGxldGUgLiB0aGlzIGNhbGxiYWNrIHdpbGwgY29udGFpbnQgYXMgcGFyYW1ldGVyIHRoZSByZWxhdGVkIGd1ZXN0SWRcblx0ICovXG5cdGZ1bmN0aW9uIF9jYW5jZWxJbnZpdGF0aW9uKHBfcm9vbUlkLCBwX2d1ZXN0SWRzLCBwX2NiKSB7XG5cdFx0aWYgKCEocF9yb29tSWQgJiYgdHlwZW9mIHBfcm9vbUlkID09ICdzdHJpbmcnKSkge1xuXHRcdFx0Y29uc29sZS5lcnJvcignKFJlYWNoU0RLOjpyZWFjaDo6X2NhbmNlbEludml0YXRpb24pcGFyYW1ldGVyIHBfcm9vbWlkIGlzIGluY29ycmVjdC4gRXhwZWN0aW5nIG5vbiBlbXB0eSBzdHJpbmcnKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0aWYgKHBfZ3Vlc3RJZHMgJiYgISBwX2d1ZXN0SWRzIGluc3RhbmNlb2YgQXJyYXkgKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCcoUmVhY2hTREs6OnJlYWNoOjpfY2FuY2VsSW52aXRhdGlvbilwYXJhbWV0ZXIgcF9ndWVzdElkcyBpcyBpbmNvcnJlY3QuIEV4cGVjdGluZyBhbiBBcnJheScpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRjb25zb2xlLmxvZyhgIChSZWFjaFNESzo6cmVhY2g6Ol9jYW5jZWxJbnZpdGF0aW9uKXBfcm9vbUlkPSR7cF9yb29tSWR9LCBwX2d1ZXN0SWRzPSR7SlNPTi5zdHJpbmdpZnkocF9ndWVzdElkcyl9YCk7XG5cdFx0aWYgKG1PdXRnb2luZ0ludml0ZXMgJiYgbU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF0pIHtcblx0XHRcdGlmIChwX2d1ZXN0SWRzKSB7XG5cdFx0XHRcdHBfZ3Vlc3RJZHMuZm9yRWFjaCgoZ3Vlc3RJZCwgaSkgPT4ge1xuXHRcdFx0XHRcdGlmICghKGd1ZXN0SWQgJiYgdHlwZW9mIGd1ZXN0SWQgPT0gJ3N0cmluZycpKSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGAoUmVhY2hTREs6OnJlYWNoOjppbnZpdGVUb1Jvb20pcGFyYW1ldGVyIHBfZ3Vlc3RJZHNbJHtpfV0gaXMgaW5jb3JyZWN0LiBFeHBlY3Rpbmcgbm9uIGVtcHR5IHN0cmluZ2ApO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAobU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bZ3Vlc3RJZF0pIHtcblx0XHRcdFx0XHRcdGlmIChtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVtndWVzdElkXS5JbnZpdGVEYXRhcmVmKSB7XG5cdFx0XHRcdFx0XHRcdG1PdXRnb2luZ0ludml0ZXNbcF9yb29tSWRdW2d1ZXN0SWRdLkludml0ZURhdGFyZWYub25EaXNjb25uZWN0KCkuY2FuY2VsKCk7XG5cdFx0XHRcdFx0XHRcdGlmIChtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVtndWVzdElkXS5JbnZpdGVDaGFuZ2VkQ2IgJiYgdHlwZW9mIG1PdXRnb2luZ0ludml0ZXNbcF9yb29tSWRdW2d1ZXN0SWRdLkludml0ZUNoYW5nZWRDYiA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRcdFx0bU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bZ3Vlc3RJZF0uSW52aXRlRGF0YXJlZi5vZmYoJ2NoaWxkX2NoYW5nZWQnLCBtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVtndWVzdElkXS5JbnZpdGVDaGFuZ2VkQ2IpO1xuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0bU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bZ3Vlc3RJZF0uSW52aXRlRGF0YXJlZi5vbmNlKCd2YWx1ZScsIChkYXRhU25hcHNob3QpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRsZXQgY2Jfc3RhdHVzLCBjYl9ndWVzdElkLCBjYl9yb29tSWQ7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGRhdGFTbmFwc2hvdCAmJiBkYXRhU25hcHNob3QudmFsKCkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNiX3N0YXR1cz0gZGF0YVNuYXBzaG90LnZhbCgpLnN0YXR1cztcblx0XHRcdFx0XHRcdFx0XHRcdGNiX3Jvb21JZD0gZGF0YVNuYXBzaG90LnZhbCgpLnJvb207XG5cdFx0XHRcdFx0XHRcdFx0XHRjYl9ndWVzdElkPSBkYXRhU25hcHNob3QucmVmKCkucGFyZW50KCkubmFtZSgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNiX3N0YXR1cyAmJiBjYl9zdGF0dXM9PT1JTlZJVEFUSU9OX09OR09JTkcpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0bU91dGdvaW5nSW52aXRlc1tjYl9yb29tSWRdW2NiX2d1ZXN0SWRdLkludml0ZURhdGFyZWYudXBkYXRlKHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aW1lc3RhbXBfZW5kOiBXZWJjb20uU2VydmVyVmFsdWUuVElNRVNUQU1QLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHN0YXR1czogSU5WSVRBVElPTl9DQU5DRUxFRFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKG1PdXRnb2luZ0ludml0ZXNbY2Jfcm9vbUlkXVtjYl9ndWVzdElkXS5zdGF0dXNDaGFuZ2VkQ2IgJiYgdHlwZW9mIG1PdXRnb2luZ0ludml0ZXNbY2Jfcm9vbUlkXVtjYl9ndWVzdElkXS5zdGF0dXNDaGFuZ2VkQ2IgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG1PdXRnb2luZ0ludml0ZXNbY2Jfcm9vbUlkXVtjYl9ndWVzdElkXS5zdGF0dXNDaGFuZ2VkQ2IoY2Jfcm9vbUlkLCBjYl9ndWVzdElkLCBJTlZJVEFUSU9OX0NBTkNFTEVEKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyZWFjaDo6X2NhbmNlbEludml0YXRpb24pZGVsZXRpbmcgSW52aXRlIHRvIHJvb20gJHtjYl9yb29tSWR9IGZvciBpbnZpdGVlICR7Y2JfZ3Vlc3RJZH1gKTtcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUud2FybihgKFJlYWNoU0RLOjpyZWFjaDo6X2NhbmNlbEludml0YXRpb24pY2Fubm90IGRlbGV0ZSBpbnRpdmF0aW9uIHRvIHJvb20gJHtjYl9yb29tSWR9IGZvciBndWVzdCAke2NiX2d1ZXN0SWR9IEludml0YXRpb24gaGFzIGJlZW4gcmVtb3ZlZC9yZWplY3RlZC9hY2NlcHRlZGApO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRkZWxldGUgbU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bZ3Vlc3RJZF07XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHBfY2IgJiYgdHlwZW9mIHBfY2I9PSdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHBfY2IoZ3Vlc3RJZCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0ZGVsZXRlIG1PdXRnb2luZ0ludml0ZXNbcF9yb29tSWRdW2d1ZXN0SWRdO1xuXHRcdFx0XHRcdFx0XHRpZiAocF9jYiAmJiB0eXBlb2YgcF9jYj09J2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdFx0XHRcdHBfY2IoZ3Vlc3RJZCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRpZiAocF9jYiAmJiB0eXBlb2YgcF9jYj09J2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdFx0XHRwX2NiKGd1ZXN0SWQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdE9iamVjdC5rZXlzKG1PdXRnb2luZ0ludml0ZXNbcF9yb29tSWRdKS5mb3JFYWNoKChpbnZpdGVlKSA9PiB7XG5cdFx0XHRcdFx0X2NhbmNlbEludml0YXRpb24ocF9yb29tSWQsIFtpbnZpdGVlXSwgcF9jYik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLndhcm4oYChSZWFjaFNESzo6cmVhY2g6Ol9jYW5jZWxJbnZpdGF0aW9uKSBJbnZpdGUgdG8gcm9vbSAke3Bfcm9vbUlkfSBub3QgZm91bmRgKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogR2F0aGVyIHRoZSBpbnZpdGVlcyB0byB0aGUgcm9vbS5cblx0ICogRGVmaW5lcyBhIGNhbGxiYWNrIHRvIHRyaWdnZXIgZm9yIEludml0ZSBjaGFuZ2VzLCBhbmQgY2FsbHMgY2FsbGJhY2tzIGZvciByb29tIGludml0ZSBhY2NlcHRhdGlvbiBvciByZWZ1c2UuXG5cdCAqIEZvciBlYWNoIGludml0ZWUgYSBub2RlIGlzIGNyZWF0ZWQgaW4gdGhlIGRhdGFiYXNlIGFib3V0IHRoZSBJbnZpdGUgbGlzdC5cblx0ICogSW4gYWRkdGlvbiwgYSBub2RlIGlzIGNyZWF0ZWQgdG9vIGZvciBlYWNoIGludml0ZWUgYWJvdXQgdGhlIHBhcnRpY2lwYW50TGlzdC5cblx0ICogQHBhcmFtIHtzdHJpbmd9IHBfcm9vbUlkIC0gVGhlIHJvb20gdXNlZCBhcyB0aGUgbmFtZSBvZiBhIGJyYW5jaCBpcyB0aGUgZGF0YWJhc2Vcblx0ICogQHBhcmFtIHthcnJheVtzdGluZ119IHBfZ3Vlc3RJZHMgLSBBbiBhcnJheSBwb3NzZXNzaW5nIHRoZSBpZGVudGlmaWVycyBvZiB0aGUgaW52aXRlZXNcblx0ICogQHBhcmFtIHtzdHJpbmd9IHBfdG9waWMgLSBjdXN0b20gbWVzc2FnZSBmb3IgaW52aXRhdGlvblxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwX3N0YXR1c0NoYW5nZWRDYiAtIG9wdGlvbmFsIDogY2FsbGJhY2sgZnVuY3Rpb24gd2hlbiBhbiBpbnZpdGVlIGFjY2VwdHMvcmVqZWN0ZWQvY2FuY2VsZWQgdGhlIEludml0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gX2ludml0ZVRvUm9vbShwX3Jvb21JZCwgcF9ndWVzdElkcywgcF90b3BpYyxwX3N0YXR1c0NoYW5nZWRDYikge1xuXHRcdGlmICghKHBfcm9vbUlkICYmIHR5cGVvZiBwX3Jvb21JZCA9PSAnc3RyaW5nJykpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJyhSZWFjaFNESzo6cmVhY2g6Omludml0ZVRvUm9vbSlwYXJhbWV0ZXIgcF9yb29taWQgaXMgaW5jb3JyZWN0LiBFeHBlY3Rpbmcgbm9uIGVtcHR5IHN0cmluZycpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZiAoIShwX3RvcGljICYmIHR5cGVvZiBwX3RvcGljID09ICdzdHJpbmcnKSkge1xuXHRcdFx0Y29uc29sZS5lcnJvcignKFJlYWNoU0RLOjpyZWFjaDo6aW52aXRlVG9Sb29tKXBhcmFtZXRlciBwX3RvcGljIGlzIGluY29ycmVjdC4gRXhwZWN0aW5nIG5vbiBlbXB0eSBzdHJpbmcnKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0aWYgKHBfc3RhdHVzQ2hhbmdlZENiICYmIHR5cGVvZiBwX3N0YXR1c0NoYW5nZWRDYiAhPSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRjb25zb2xlLndhcm4oJyhSZWFjaFNESzo6cmVhY2g6Omludml0ZVRvUm9vbSlwYXJhbWV0ZXIgcF9zdGF0dXNDaGFuZ2VkQ2IgaXMgaW5jb3JyZWN0LiBpZiBkZWZpbmVkLCBleHBlY3RpbmcgYSBmdW5jdGlvbicpO1xuXHRcdH1cblx0XHRpZiAoIShwX2d1ZXN0SWRzICYmIHBfZ3Vlc3RJZHMgaW5zdGFuY2VvZiBBcnJheSApKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCcoUmVhY2hTREs6OnJlYWNoOjppbnZpdGVUb1Jvb20pcGFyYW1ldGVyIHBfZ3Vlc3RJZHMgaXMgaW5jb3JyZWN0LiBFeHBlY3RpbmcgYW4gQXJyYXknKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0ZGF0YXJlZnMuZ2V0Um9vbXMoKS5jaGlsZChwX3Jvb21JZCkuY2hpbGQoJ2NvbW1vbkRhdGFMaXN0JykudXBkYXRlKHtcblx0XHRcdHN0YXR1czpST09NX1NUQVRVU19PUEVOLFxuXHRcdFx0b3duZXI6bWVcblx0XHR9KTtcblxuXG5cdFx0Y29uc3QgX2lzVXNlclByZXNlbnRJblJvb21DYiA9IChpc0FscmVhZHlQcmVzZW50LCBwX3Jvb21JZDIsIHBfZ3Vlc3RJZDIpID0+IHtcblx0XHRcdGlmICghaXNBbHJlYWR5UHJlc2VudCkge1xuXHRcdFx0XHRkYXRhcmVmcy5nZXRSb29tcygpLmNoaWxkKGAke3Bfcm9vbUlkMn0vcGFydGljaXBhbnRMaXN0LyR7cF9ndWVzdElkMn1gKS51cGRhdGUoe1xuXHRcdFx0XHRcdGNvbm5lY3RlZDogZmFsc2UsXG5cdFx0XHRcdFx0d2FzSW5zaWRlUm9vbTogZmFsc2Vcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnN0IF9JbnZpdGVDaGFuZ2VkQ2IgPSAoc25hcHNob3QpID0+IHtcblx0XHRcdGNvbnNvbGUubG9nKCcoUmVhY2hTREs6OnJlYWNoOjppbnZpdGVUb1Jvb206Ol9JbnZpdGVDaGFuZ2VkQ2IpJyk7XG5cdFx0XHRpZihzbmFwc2hvdCAmJiBzbmFwc2hvdC5uYW1lKCk9PT0nc3RhdHVzJykge1xuXHRcdFx0XHRjb25zdCBjYl9ndWVzdElkMiA9IHNuYXBzaG90LnJlZigpLnBhcmVudCgpLnBhcmVudCgpLm5hbWUoKTtcblx0XHRcdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cmVhY2g6Omludml0ZVRvUm9vbTo6X0ludml0ZUNoYW5nZWRDYiljYl9ndWVzdElkMj0ke2NiX2d1ZXN0SWQyfWApO1xuXHRcdFx0XHRpZiAobU91dGdvaW5nSW52aXRlcyAmJiBtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXSAmJiBtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVtjYl9ndWVzdElkMl0gJiYgbU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bY2JfZ3Vlc3RJZDJdLkludml0ZUNoYW5nZWRDYiApIHtcblx0XHRcdFx0XHRtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVtjYl9ndWVzdElkMl0uSW52aXRlRGF0YXJlZi5vZmYoJ2NoaWxkX2NoYW5nZWQnLCBtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVtjYl9ndWVzdElkMl0uSW52aXRlQ2hhbmdlZENiKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzbmFwc2hvdC5yZWYoKS5wYXJlbnQoKS5vbmNlKCd2YWx1ZScsKHNuYXBzaG90MikgPT4ge1xuXHRcdFx0XHRcdGxldCBjYl9zdGF0dXMsIGNiX2d1ZXN0SWQsIGNiX3Jvb21JZCwgY2Jfc3RhdHVzX2luZm87XG5cdFx0XHRcdFx0aWYgKHNuYXBzaG90Mikge1xuXHRcdFx0XHRcdFx0Y2Jfc3RhdHVzPSBzbmFwc2hvdDIudmFsKCkuc3RhdHVzO1xuXHRcdFx0XHRcdFx0Y2Jfcm9vbUlkPSBzbmFwc2hvdDIudmFsKCkucm9vbTtcblx0XHRcdFx0XHRcdGNiX3N0YXR1c19pbmZvPSBzbmFwc2hvdDIudmFsKCkuc3RhdHVzX2luZm87XG5cdFx0XHRcdFx0XHRjYl9ndWVzdElkPSBzbmFwc2hvdDIucmVmKCkucGFyZW50KCkubmFtZSgpO1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cmVhY2g6Omludml0ZVRvUm9vbTo6X0ludml0ZUNoYW5nZWRDYilyb29tSWQ9JHtjYl9yb29tSWR9IGludml0ZWU9JHtjYl9ndWVzdElkfSBuZXcgaW52aXRhdGlvbiBzdGF0dXM9JHtjYl9zdGF0dXN9IHN0YXR1cyBpbmZvPSR7Y2Jfc3RhdHVzX2luZm99YCk7XG5cdFx0XHRcdFx0XHRpZiAobU91dGdvaW5nSW52aXRlcyAmJiBtT3V0Z29pbmdJbnZpdGVzW2NiX3Jvb21JZF0gJiYgbU91dGdvaW5nSW52aXRlc1tjYl9yb29tSWRdW2NiX2d1ZXN0SWRdICYmIG1PdXRnb2luZ0ludml0ZXNbY2Jfcm9vbUlkXVtjYl9ndWVzdElkXS5JbnZpdGVEYXRhcmVmKSB7XG5cdFx0XHRcdFx0XHRcdG1PdXRnb2luZ0ludml0ZXNbY2Jfcm9vbUlkXVtjYl9ndWVzdElkXS5JbnZpdGVEYXRhcmVmLm9uRGlzY29ubmVjdCgpLmNhbmNlbCgpO1xuXHRcdFx0XHRcdFx0XHQvL2lmIChtT3V0Z29pbmdJbnZpdGVzW2NiX3Jvb21JZF1bY2JfZ3Vlc3RJZF0uSW52aXRlUmVtb3ZlQ2IpXG5cdFx0XHRcdFx0XHRcdC8vXHRtT3V0Z29pbmdJbnZpdGVzW2NiX3Jvb21JZF1bY2JfZ3Vlc3RJZF0uSW52aXRlRGF0YXJlZi5wYXJlbnQoKS5vZmYoXCJjaGlsZF9yZW1vdmVkXCIsbU91dGdvaW5nSW52aXRlc1tjYl9yb29tSWRdW2NiX2d1ZXN0SWRdLkludml0ZVJlbW92ZUNiKTtcblx0XHRcdFx0XHRcdFx0aWYgKG1PdXRnb2luZ0ludml0ZXNbY2Jfcm9vbUlkXVtjYl9ndWVzdElkXS5zdGF0dXNDaGFuZ2VkQ2IgJiYgdHlwZW9mIG1PdXRnb2luZ0ludml0ZXNbY2Jfcm9vbUlkXVtjYl9ndWVzdElkXS5zdGF0dXNDaGFuZ2VkQ2IgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdFx0XHRcdG1PdXRnb2luZ0ludml0ZXNbY2Jfcm9vbUlkXVtjYl9ndWVzdElkXS5zdGF0dXNDaGFuZ2VkQ2IoY2Jfcm9vbUlkLGNiX2d1ZXN0SWQsY2Jfc3RhdHVzLGNiX3N0YXR1c19pbmZvKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oJyhSZWFjaFNESzo6cmVhY2g6Omludml0ZVRvUm9vbTo6X0ludml0ZUNoYW5nZWRDYiljYW5ub3QgcmV0cmlldmUgbWF0aGluZyBwX3N0YXR1c0NoYW5nZWRDYicpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGRlbGV0ZSBtT3V0Z29pbmdJbnZpdGVzW2NiX3Jvb21JZF1bY2JfZ3Vlc3RJZF07XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oJyhSZWFjaFNESzo6cmVhY2g6Omludml0ZVRvUm9vbTo6X0ludml0ZUNoYW5nZWRDYiljYW5ub3QgcmV0cmlldmUgbWF0aGluZyBtT3V0Z29pbmdJbnZpdGUnKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKCcoUmVhY2hTREs6OnJlYWNoOjppbnZpdGVUb1Jvb206Ol9JbnZpdGVDaGFuZ2VkQ2IpY2Fubm90IHJldHJpZXZlIGludml0YXRpb24nKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRwX2d1ZXN0SWRzLmZvckVhY2goKG1HdWVzdElkLCBpKSA9PiB7XG5cdFx0XHRpZiAoIShtR3Vlc3RJZCAmJiB0eXBlb2YgbUd1ZXN0SWQgPT0gJ3N0cmluZycpKSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoYChSZWFjaFNESzo6cmVhY2g6Omludml0ZVRvUm9vbSlwYXJhbWV0ZXIgcF9ndWVzdElkc1ske2l9XSBpcyBpbmNvcnJlY3QuIEV4cGVjdGluZyBub24gZW1wdHkgc3RyaW5nYCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyZWFjaDo6aW52aXRlVG9Sb29tKXJvb21JZD0ke3Bfcm9vbUlkfSBpbnZpdGVlPSR7bUd1ZXN0SWQudG9TdHJpbmcoKX1gKTtcblxuXHRcdFx0XHRpZiAobU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF0gJiYgbU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bbUd1ZXN0SWRdKSB7XG5cdFx0XHRcdFx0Ly9pbnZpdGF0aW9uIGlzIGFscmVhZHkgZXhpc3RpbmcgLT4gY2FuY2VsIGl0XG5cdFx0XHRcdFx0Ly9pZiAobU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bbUd1ZXN0SWRdLkludml0ZURhdGFyZWYgJiYgbU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bbUd1ZXN0SWRdLkludml0ZVJlbW92ZUNiKSAgbU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bbUd1ZXN0SWRdLkludml0ZURhdGFyZWYub2ZmKFwiY2hpbGRfcmVtb3ZlZFwiLG1PdXRnb2luZ0ludml0ZXNbcF9yb29tSWRdW21HdWVzdElkXS5JbnZpdGVSZW1vdmVDYik7XG5cdFx0XHRcdFx0Ly9pZiAobU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bbUd1ZXN0SWRdLkludml0ZURhdGFyZWYgJiYgbU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bbUd1ZXN0SWRdLkludml0ZUNoYW5nZWRDYikgbU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bbUd1ZXN0SWRdLkludml0ZURhdGFyZWYub2ZmKFwiY2hpbGRfY2hhbmdlZFwiLG1PdXRnb2luZ0ludml0ZXNbcF9yb29tSWRdW21HdWVzdElkXS5JbnZpdGVDaGFuZ2VkQ2IpO1xuXHRcdFx0XHRcdF9jYW5jZWxJbnZpdGF0aW9uKHBfcm9vbUlkLCBbbUd1ZXN0SWRdLCAocF9ndWVzdElkKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAocF9ndWVzdElkICYmIHBfZ3Vlc3RJZCA9PT0gbUd1ZXN0SWQpIHtcblx0XHRcdFx0XHRcdFx0X2ludml0ZVRvUm9vbShwX3Jvb21JZCwgW3BfZ3Vlc3RJZF0sIHBfdG9waWMscF9zdGF0dXNDaGFuZ2VkQ2IpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICghbU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF0pIHtcblx0XHRcdFx0XHRtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXSA9IFtdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vaWYgKCFtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVttR3Vlc3RJZF0pIHtcblx0XHRcdFx0bU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bbUd1ZXN0SWRdID0ge307XG5cdFx0XHRcdC8vfVxuXG5cdFx0XHRcdF9pc1VzZXJQcmVzZW50SW5Sb29tKHBfcm9vbUlkLCBtR3Vlc3RJZCwgX2lzVXNlclByZXNlbnRJblJvb21DYik7XG5cblx0XHRcdFx0bU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bbUd1ZXN0SWRdLkludml0ZURhdGFyZWYgPSBkYXRhcmVmLmNoaWxkKCdpbnZpdGF0aW9uTGlzdCcpLmNoaWxkKG1HdWVzdElkKS5wdXNoKHtcblx0XHRcdFx0XHRmcm9tOm1lLFxuXHRcdFx0XHRcdHJvb206cF9yb29tSWQsXG5cdFx0XHRcdFx0dGltZXN0YW1wX2NyZWF0aW9uOldlYmNvbS5TZXJ2ZXJWYWx1ZS5USU1FU1RBTVAsXG5cdFx0XHRcdFx0dG9waWM6cF90b3BpYyxcblx0XHRcdFx0XHRzdGF0dXM6SU5WSVRBVElPTl9PTkdPSU5HXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyZWFjaDo6aW52aXRlVG9Sb29tKUludml0ZURhdGFyZWY9JHttT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVttR3Vlc3RJZF0uSW52aXRlRGF0YXJlZi50b1N0cmluZygpfWApO1xuXG5cdFx0XHRcdC8vbU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bbUd1ZXN0SWRdLkludml0ZVJlbW92ZUNiID0gX0ludml0YXRpb25SZW1vdmVDYjtcblx0XHRcdFx0bU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bbUd1ZXN0SWRdLkludml0ZUNoYW5nZWRDYiA9IF9JbnZpdGVDaGFuZ2VkQ2I7XG5cdFx0XHRcdG1PdXRnb2luZ0ludml0ZXNbcF9yb29tSWRdW21HdWVzdElkXS5JbnZpdGVEYXRhcmVmLm9uKCdjaGlsZF9jaGFuZ2VkJywgbU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bbUd1ZXN0SWRdLkludml0ZUNoYW5nZWRDYik7XG5cdFx0XHRcdC8vbU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bbUd1ZXN0SWRdLkludml0ZURhdGFyZWYucGFyZW50KCkub24oXCJjaGlsZF9yZW1vdmVkXCIsbU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bbUd1ZXN0SWRdLkludml0ZVJlbW92ZUNiKTtcblx0XHRcdFx0bU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bbUd1ZXN0SWRdLnN0YXR1c0NoYW5nZWRDYiA9IHBfc3RhdHVzQ2hhbmdlZENiO1xuXG5cdFx0XHRcdC8vIGNhbmNlbGVkIEludml0ZSBvbiBkaXNjb25uZWN0aW9uXG5cdFx0XHRcdG1PdXRnb2luZ0ludml0ZXNbcF9yb29tSWRdW21HdWVzdElkXS5JbnZpdGVEYXRhcmVmLm9uRGlzY29ubmVjdCgpLnVwZGF0ZSh7XG5cdFx0XHRcdFx0dGltZXN0YW1wX2VuZDogV2ViY29tLlNlcnZlclZhbHVlLlRJTUVTVEFNUCxcblx0XHRcdFx0XHRzdGF0dXM6IElOVklUQVRJT05fQ0FOQ0VMRURcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXG5cdC8qKlxuXHQgKiBNYWtlcyBhbiBpbnZpdGUgYWNjZXB0ZWQsIGFuZCBkZWZpbmVzIHRoZSBcImFjY2VwdGVkXCIgZmxhZyBvZiB0aGlzIGludml0ZSBhdCB0cnVlIGluIHRoZSBkYXRhYmFzZS5cblx0ICogQHBhcmFtIHBfaW52aXRhdGlvbiAtXG5cdCAqL1xuXHRmdW5jdGlvbiBfYWNjZXB0SW52aXRhdGlvbihwX2ludml0YXRpb24pIHtcblx0XHRjb25zdCBpbnZpdGVJZCA9IE9iamVjdC5rZXlzKHBfaW52aXRhdGlvbilbMF07XG5cdFx0aWYgKCFpbnZpdGVJZCkge1xuXHRcdFx0Y29uc29sZS5lcnJvcignKFJlYWNoU0RLOjpyZWFjaDo6X2FjY2VwdEludml0YXRpb24pcGFyYW1ldGVyIHBfaW52aXRhdGlvbiBpcyBpbmNvcnJlY3QuIGNhbm5vdCBnZXQgaW52aXRhdGlvbiBJZCcpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZiAoIXBfaW52aXRhdGlvbltpbnZpdGVJZF0pIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJyhSZWFjaFNESzo6cmVhY2g6Ol9hY2NlcHRJbnZpdGF0aW9uKXBhcmFtZXRlciBwX2ludml0YXRpb24gaXMgaW5jb3JyZWN0LiBjYW5ub3QgZ2V0IGludml0YXRpb24gZGF0YScpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGRhdGFyZWYuY2hpbGQoYGludml0YXRpb25MaXN0LyR7bWV9LyR7aW52aXRlSWR9YCkub25jZSgndmFsdWUnLCAoZGF0YVNuYXBzaG90KSA9PiB7XG5cdFx0XHRsZXQgY2Jfc3RhdHVzLFxuXHRcdFx0XHRjYl9ndWVzdElkLFxuXHRcdFx0XHRjYl9pbnZpdGF0aW9uSWQ7XG5cblx0XHRcdGlmIChkYXRhU25hcHNob3QgJiYgZGF0YVNuYXBzaG90LnZhbCgpKSB7XG5cdFx0XHRcdGNiX2ludml0YXRpb25JZCA9IGRhdGFTbmFwc2hvdC5uYW1lKCk7XG5cdFx0XHRcdGNiX3N0YXR1cyA9IGRhdGFTbmFwc2hvdC52YWwoKS5zdGF0dXM7XG5cdFx0XHRcdGNiX2d1ZXN0SWQgPSBkYXRhU25hcHNob3QucmVmKCkucGFyZW50KCkubmFtZSgpO1xuXHRcdFx0XHRpZiAoY2Jfc3RhdHVzICYmIGNiX3N0YXR1cz09PUlOVklUQVRJT05fT05HT0lORykge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJlYWNoOjpfYWNjZXB0SW52aXRhdGlvbilpbnZpdGVJZD0ke2ludml0ZUlkfSxkYXRhPSR7SlNPTi5zdHJpbmdpZnkocF9pbnZpdGF0aW9uW2ludml0ZUlkXSl9YCk7XG5cdFx0XHRcdFx0ZGF0YXJlZi5jaGlsZChgaW52aXRhdGlvbkxpc3QvJHtjYl9ndWVzdElkfS8ke2NiX2ludml0YXRpb25JZH1gKS51cGRhdGUoe1xuXHRcdFx0XHRcdFx0dGltZXN0YW1wX2VuZDogV2ViY29tLlNlcnZlclZhbHVlLlRJTUVTVEFNUCxcblx0XHRcdFx0XHRcdHN0YXR1czogSU5WSVRBVElPTl9BQ0NFUFRFRFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnNvbGUud2FybihgKFJlYWNoU0RLOjpyZWFjaDo6X2FjY2VwdEludml0YXRpb24paW52aXRlSWQ9JHtjYl9pbnZpdGF0aW9uSWR9LGRhdGE9JHtKU09OLnN0cmluZ2lmeShwX2ludml0YXRpb25baW52aXRlSWRdKX0sIGNhbm5vdCBiZSBhY2NlcHRlZC4gSXQgaGFzIGJlZW4gcmVtb3ZlZCBvciBjYW5jZWxlZGApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogUmVmdXNlcyB0aGUgaW52aXRlIGFuZCBzZXQgdGhlIFwiYWNjZXB0ZWRcIiBmbGFnIG9mIHRoaXMgaW52aXRlIGluIHRoZSBkYXRhYmFzZSB0byBmYWxzZVxuXHQgKiBAcGFyYW0gcF9pbnZpdGF0aW9uIC0gVGhlIGludml0ZSBkYXRhXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBwX3JlYXNvbiAtIG9wdGlvbmFsIGluZm8gYWJvdXQgdGhlIHJlamVjdFxuXHQgKi9cblx0ZnVuY3Rpb24gX3JlamVjdEludml0YXRpb24ocF9pbnZpdGF0aW9uLHBfcmVhc29uKSB7XG5cdFx0Y29uc3QgaW52aXRlSWQgPSBPYmplY3Qua2V5cyhwX2ludml0YXRpb24pWzBdO1xuXHRcdGlmICghaW52aXRlSWQpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJyhSZWFjaFNESzo6cmVhY2g6Ol9yZWplY3RJbnZpdGF0aW9uKXBhcmFtZXRlciBwX2ludml0YXRpb24gaXMgaW5jb3JyZWN0LiBjYW5ub3QgZ2V0IGludml0YXRpb24gSWQnKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0aWYgKCFwX2ludml0YXRpb25baW52aXRlSWRdKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCcoUmVhY2hTREs6OnJlYWNoOjpfcmVqZWN0SW52aXRhdGlvbilwYXJhbWV0ZXIgcF9pbnZpdGF0aW9uIGlzIGluY29ycmVjdC4gY2Fubm90IGdldCBpbnZpdGF0aW9uIGRhdGEnKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0ZGF0YXJlZi5jaGlsZChgaW52aXRhdGlvbkxpc3QvJHttZX0vJHtpbnZpdGVJZH1gKS5vbmNlKCd2YWx1ZScsIChkYXRhU25hcHNob3QpID0+IHtcblx0XHRcdGxldCBjYl9zdGF0dXMsY2JfZ3Vlc3RJZCxjYl9pbnZpdGF0aW9uSWQ7XG5cdFx0XHRpZiAoZGF0YVNuYXBzaG90ICYmIGRhdGFTbmFwc2hvdC52YWwoKSkge1xuXHRcdFx0XHRjYl9pbnZpdGF0aW9uSWQgPSBkYXRhU25hcHNob3QubmFtZSgpO1xuXHRcdFx0XHRjYl9zdGF0dXMgPSBkYXRhU25hcHNob3QudmFsKCkuc3RhdHVzO1xuXHRcdFx0XHRjYl9ndWVzdElkID0gZGF0YVNuYXBzaG90LnJlZigpLnBhcmVudCgpLm5hbWUoKTtcblx0XHRcdFx0aWYgKGNiX3N0YXR1cyAmJiBjYl9zdGF0dXMgPT09IElOVklUQVRJT05fT05HT0lORykge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJlYWNoOjpfcmVqZWN0SW52aXRhdGlvbilpbnZpdGVJZD0ke2ludml0ZUlkfSxkYXRhPSR7SlNPTi5zdHJpbmdpZnkocF9pbnZpdGF0aW9uW2ludml0ZUlkXSl9YCk7XG5cdFx0XHRcdFx0aWYgKHBfcmVhc29uKSB7XG5cdFx0XHRcdFx0XHRkYXRhcmVmLmNoaWxkKGBpbnZpdGF0aW9uTGlzdC8ke2NiX2d1ZXN0SWR9LyR7Y2JfaW52aXRhdGlvbklkfWApLnVwZGF0ZSh7XG5cdFx0XHRcdFx0XHRcdHRpbWVzdGFtcF9lbmQ6IFdlYmNvbS5TZXJ2ZXJWYWx1ZS5USU1FU1RBTVAsXG5cdFx0XHRcdFx0XHRcdHN0YXR1c19pbmZvOiBwX3JlYXNvbixcblx0XHRcdFx0XHRcdFx0c3RhdHVzOiBJTlZJVEFUSU9OX1JFSkVDVEVEXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0ZGF0YXJlZi5jaGlsZChgaW52aXRhdGlvbkxpc3QvJHtjYl9ndWVzdElkfS8ke2NiX2ludml0YXRpb25JZH1gKS51cGRhdGUoe1xuXHRcdFx0XHRcdFx0XHR0aW1lc3RhbXBfZW5kOiBXZWJjb20uU2VydmVyVmFsdWUuVElNRVNUQU1QLFxuXHRcdFx0XHRcdFx0XHRzdGF0dXM6IElOVklUQVRJT05fUkVKRUNURURcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb25zb2xlLndhcm4oYChSZWFjaFNESzo6cmVhY2g6Ol9yZWplY3RJbnZpdGF0aW9uKWludml0ZUlkPSR7Y2JfaW52aXRhdGlvbklkfSxkYXRhPSR7SlNPTi5zdHJpbmdpZnkocF9pbnZpdGF0aW9uW2ludml0ZUlkXSl9LCBjYW5ub3QgYmUgcmVqZWN0ZWQuIEl0IGhhcyBiZWVuIHJlbW92ZWQgb3IgY2FuY2VsZWRgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIGNoZWNrIGlmIHRoZSByb29tIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGludml0YXRpb24gaXMgYWN0aXZlXG5cdCAqIEBwYXJhbSBwX2ludml0YXRpb24gLSBUaGUgaW52aXRhdGlvbiBEYXRhXG5cdCAqIEBwYXJhbSBwX2NiIC0gVGhlIGNhbGxiYWNrIHRvIHRyaWdnZXIgdG8gZ2V0IHRoZSByZXN1bHQuIHRoaXMgY2FsbGJhY2sgd2lsbCBjb250YWlucyB0aGUgcGFyYW1ldGVyIHRydWUgaXMgdGhlIHJvb20gaXMgYWN0aXZlXG5cdCAqL1xuXHRmdW5jdGlvbiBfaXNSb29tQWN0aXZlKHBfaW52aXRhdGlvbixwX2NiKSB7XG5cdFx0aWYgKHBfaW52aXRhdGlvbiAmJiBwX2NiICYmIHR5cGVvZiBwX2NiID09ICdmdW5jdGlvbicpIHtcblx0XHRcdGNvbnN0IGludml0ZUlkID0gT2JqZWN0LmtleXMocF9pbnZpdGF0aW9uKVswXTtcblx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJlYWNoOjpfaXNSb29tQWN0aXZlKWludml0ZUlkPSR7aW52aXRlSWR9YCk7XG5cdFx0XHRjb25zdCByb29tSWQgPSBwX2ludml0YXRpb25baW52aXRlSWRdLnJvb207XG5cblx0XHRcdGRhdGFyZWZzLmdldFJvb21zKCkuY2hpbGQoYCR7cm9vbUlkfS9jb21tb25EYXRhTGlzdC9zdGF0dXNgKS5vbmNlKCd2YWx1ZScsIChzbmFwc2hvdCkgPT4ge1xuXHRcdFx0XHRjb25zdCBvcGVuZWQgPSBzbmFwc2hvdCAmJiBzbmFwc2hvdC52YWwoKSAmJiBzbmFwc2hvdC52YWwoKSA9PT0gUk9PTV9TVEFUVVNfT1BFTjtcblx0XHRcdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cmVhY2g6Ol9pc1Jvb21BY3RpdmUpaW52aXRlSWQ9JHtpbnZpdGVJZH0gcmVzdWx0PSR7b3BlbmVkfWApO1xuXHRcdFx0XHRwX2NiKG9wZW5lZCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogbW92ZSBhbGwgdGhlIG5vbiBhY3RpdmUgaW52aXRhdGlvbnMgcHJvY2Vzc2VkIG9mIGFuIHVzZXIgdG8gdGhlIGludml0YXRpb24gTGlzdCBIaXN0b3J5OlxuXHQgKiBBbGwgaW52aXRhdGlvbnMgd2l0aCBzdGF0dXMgQ2FuY2VsZWQgb3IgUmVqZWN0ZWQgd2lsbCBiZSBhcmNoaXZlZFxuXHQgKiBBbGwgaW52aXRhdGlvbiB3aXRoIHN0YXR1cyBPbmdvaW5nIG9yIEFjY2VwdGVkIFdpbGwgYmUgYXJjaGl2ZWQgaWYgdGhlIGNvcnJlc3BvbmRpbmcgcm9vbSBpcyBjbG9zZWRcblx0ICogSWYgYW4gaW52aXRhdGlvbiB3aXRoIHN0YXR1cyBcIk9uZ29pbmdcIiBpcyBhcmNoaXZlZCwgaXRzIHN0YXR1cyB3aWxsIGJlIHNldCB0byBjYW5jZWxlZFxuXHQgKiBAcGFyYW0gcF91c2VySWQgLSBUaGUgdXNlciBJZFxuXHQgKiBAcGFyYW0gcF9jYiAtIFRoaXMgY2FsbGJhY2sgaXMgdHJpZ2dlciB3aGVuIGFyY2hpdmUgaXMgY29tcGxldGVcblx0ICovXG5cdGZ1bmN0aW9uIF9hcmNoaXZlSW52aXRhdGlvbnMocF91c2VySWQsIHBfY2IpIHtcblx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyZWFjaDo6X2FyY2hpdmVJbnZpdGF0aW9ucyl1c2VySWQ9JHtwX3VzZXJJZH1gKTtcblx0XHRkYXRhcmVmLmNoaWxkKGBpbnZpdGF0aW9uTGlzdC8ke21lfWApLm9uY2UoJ3ZhbHVlJywgKHNuYXBzaG90KSA9PiB7XG5cdFx0XHRpZiAoc25hcHNob3QgJiYgc25hcHNob3QuaGFzQ2hpbGRyZW4oKSkge1xuXHRcdFx0XHRjb25zdCBuYkNoaWxkcmVuID0gc25hcHNob3QubnVtQ2hpbGRyZW4oKTtcblx0XHRcdFx0bGV0IG5iQ2hpbGRyZW5Qcm9jZXNzZWQgPSAwO1xuXHRcdFx0XHRzbmFwc2hvdC5mb3JFYWNoKChjaGlsZFNuYXBzaG90KSA9PiB7XG5cdFx0XHRcdFx0aWYgKGNoaWxkU25hcHNob3QgJiYgY2hpbGRTbmFwc2hvdC52YWwoKSkge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cmVhY2g6Ol9hcmNoaXZlSW52aXRhdGlvbnMpdXNlcklkPSR7cF91c2VySWR9IGludml0ZUlkPSR7Y2hpbGRTbmFwc2hvdC5uYW1lKCl9YCk7XG5cdFx0XHRcdFx0XHRpZiAoY2hpbGRTbmFwc2hvdC52YWwoKS5zdGF0dXMgPT09IElOVklUQVRJT05fUkVKRUNURUQgfHwgY2hpbGRTbmFwc2hvdC52YWwoKS5zdGF0dXMgPT09IElOVklUQVRJT05fQ0FOQ0VMRUQgKSB7XG5cdFx0XHRcdFx0XHRcdGRhdGFyZWYuY2hpbGQoYGludml0YXRpb25MaXN0SGlzdG9yeS8ke3BfdXNlcklkfS8ke2NoaWxkU25hcHNob3QubmFtZSgpfWApLnVwZGF0ZShjaGlsZFNuYXBzaG90LnZhbCgpKTtcblx0XHRcdFx0XHRcdFx0Y2hpbGRTbmFwc2hvdC5yZWYoKS5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdFx0bmJDaGlsZHJlblByb2Nlc3NlZCsrO1xuXHRcdFx0XHRcdFx0XHRpZiAobmJDaGlsZHJlblByb2Nlc3NlZD49bmJDaGlsZHJlbiAmJiBwX2NiICYmIHR5cGVvZiBwX2NiID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdFx0XHRwX2NiKCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGludml0ZURhdGEgPSB7fTtcblx0XHRcdFx0XHRcdFx0aW52aXRlRGF0YVtjaGlsZFNuYXBzaG90Lm5hbWUoKV0gPSBjaGlsZFNuYXBzaG90LnZhbCgpO1xuXHRcdFx0XHRcdFx0XHRfaXNSb29tQWN0aXZlKGludml0ZURhdGEsIChpc0FjdGl2ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChpc0FjdGl2ZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0bmJDaGlsZHJlblByb2Nlc3NlZCsrO1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKG5iQ2hpbGRyZW5Qcm9jZXNzZWQ+PW5iQ2hpbGRyZW4gJiYgcF9jYiAmJiB0eXBlb2YgcF9jYiA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHBfY2IoKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNoaWxkU25hcHNob3QudmFsKCkuc3RhdHVzPT09SU5WSVRBVElPTl9PTkdPSU5HKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IG5ld1ZhbHVlID0gY2hpbGRTbmFwc2hvdC52YWwoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0bmV3VmFsdWUuc3RhdHVzID0gSU5WSVRBVElPTl9DQU5DRUxFRDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0YXJlZi5jaGlsZChgaW52aXRhdGlvbkxpc3RIaXN0b3J5LyR7cF91c2VySWR9LyR7Y2hpbGRTbmFwc2hvdC5uYW1lKCl9YCkuc2V0KG5ld1ZhbHVlKTtcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRhdGFyZWYuY2hpbGQoYGludml0YXRpb25MaXN0SGlzdG9yeS8ke3BfdXNlcklkfS8ke2NoaWxkU25hcHNob3QubmFtZSgpfWApLnNldChjaGlsZFNuYXBzaG90LnZhbCgpKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdGNoaWxkU25hcHNob3QucmVmKCkucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRuYkNoaWxkcmVuUHJvY2Vzc2VkKys7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAobmJDaGlsZHJlblByb2Nlc3NlZD49bmJDaGlsZHJlbiAmJiBwX2NiICYmIHR5cGVvZiBwX2NiID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cF9jYigpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGlmIChwX2NiICYmIHR5cGVvZiBwX2NiID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdFx0cF9jYigpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmIChwX2NiICYmIHR5cGVvZiBwX2NiID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRwX2NiKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdH0pO1xuXHR9XG5cblxuXG5cblxuXHQvKipcblx0ICogQ2xvc2UgdGhlIHJlYWNoIHNlcnZpY2UsXG5cdCAqIGRpc2FibGVzIGFuZCBkZWxldGVzIGFueSBsaXN0ZW5lcnMvY2FsbGJhY2sgZGVmaW5lZC5cblx0ICogY2FuY2VsIGFsbCBvdXRnb2luZyBpbnZpdGUgbm90IGFscmVhZHkgcHJvY2Vzc2VkXG5cdCAqIGRvIG5vdCBpbXBhY3QgaW5jb21pbmcgaW52aXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBfY2xvc2UoKSB7XG5cdFx0Y29uc29sZS5sb2coJyhSZWFjaFNESzo6cmVhY2g6Ol9jbG9zZSknKTtcblxuXHRcdGlmIChuZXdJbnZpdGVDYikge1xuXHRcdFx0ZGF0YXJlZi5jaGlsZCgnaW52aXRhdGlvbkxpc3QnKS5jaGlsZChtZSkub2ZmKCdjaGlsZF9hZGRlZCcsbmV3SW52aXRlQ2IpO1xuXHRcdFx0bmV3SW52aXRlQ2IgPSBudWxsO1xuXHRcdH1cbi8vXHRcdGlmIChvblJvb21JbnZpdGVDaGFuZ2VkQ2IpIHtcbi8vXHRcdFx0ZGF0YXJlZi5jaGlsZChcImludml0YXRpb25MaXN0XCIpLmNoaWxkKG1lKS5vZmYoXCJjaGlsZF9jaGFuZ2VkXCIsSW52aXRlQ2hhbmdlZENiKTtcbi8vXHRcdFx0b25Sb29tSW52aXRlQ2hhbmdlZENiID0gbnVsbDtcbi8vXHRcdH1cbi8vXG4vL1x0XHRpZiAobVRpbWVvdXRPbk5ld0ludml0ZUNiKSB7XG4vL1x0XHRcdGRhdGFyZWYuY2hpbGQoXCJpbnZpdGF0aW9uTGlzdFwiKS5jaGlsZChtZSkub2ZmKFwiY2hpbGRfYWRkZWRcIixtVGltZW91dE9uTmV3SW52aXRlQ2IpO1xuLy9cdFx0XHRtVGltZW91dE9uTmV3SW52aXRlQ2IgPSBudWxsO1xuLy9cdFx0fVxuLy9cdFx0aWYgKG1UaW1lb3V0T25JbnZpdGVDaGFuZ2VkQ2IpIHtcbi8vXHRcdFx0ZGF0YXJlZi5jaGlsZChcImludml0YXRpb25MaXN0XCIpLmNoaWxkKG1lKS5vZmYoXCJjaGlsZF9jaGFuZ2VkXCIsbVRpbWVvdXRPbkludml0ZUNoYW5nZWRDYik7XG4vL1x0XHRcdG1UaW1lb3V0T25JbnZpdGVDaGFuZ2VkQ2IgPSBudWxsO1xuLy9cdFx0fVxuXG5cdFx0aWYgKG9uVXNlckFkZGVkQ2IpIHtcblx0XHRcdGRhdGFyZWYuY2hpbGQoJ3VzZXJMaXN0Jykub2ZmKCdjaGlsZF9hZGRlZCcsIG9uVXNlckFkZGVkQ2IpO1xuXHRcdFx0b25Vc2VyQWRkZWRDYiA9IG51bGw7XG5cdFx0fVxuXHRcdGlmIChvblVzZXJDaGFuZ2VkQ2IpIHtcblx0XHRcdGRhdGFyZWYuY2hpbGQoJ3VzZXJMaXN0Jykub2ZmKCdjaGlsZF9jaGFuZ2VkJywgb25Vc2VyQ2hhbmdlZENiKTtcblx0XHRcdG9uVXNlckNoYW5nZWRDYiA9IG51bGw7XG5cdFx0fVxuXHRcdGlmIChvblVzZXJSZW1vdmVkQ2IpIHtcblx0XHRcdGRhdGFyZWYuY2hpbGQoJ3VzZXJMaXN0Jykub2ZmKCdjaGlsZF9yZW1vdmVkJywgb25Vc2VyUmVtb3ZlZENiKTtcblx0XHRcdG9uVXNlclJlbW92ZWRDYiA9IG51bGw7XG5cdFx0fVxuXG5cdFx0aWYgKG1PdXRnb2luZ0ludml0ZXMpIHtcblx0XHRcdG1PdXRnb2luZ0ludml0ZXMuZm9yRWFjaCgocm9vbUlkKSA9PiB7XG5cdFx0XHRcdG1PdXRnb2luZ0ludml0ZXNbcm9vbUlkXS5mb3JFYWNoKChpbnZpdGVlKSA9PiB7XG5cdFx0XHRcdFx0aWYgKGludml0ZWUuSW52aXRlRGF0YXJlZikge1xuXHRcdFx0XHRcdFx0aW52aXRlZS5JbnZpdGVEYXRhcmVmLm9uRGlzY29ubmVjdCgpLmNhbmNlbCgpO1xuXHRcdFx0XHRcdFx0aW52aXRlZS5JbnZpdGVEYXRhcmVmLnVwZGF0ZSh7XG5cdFx0XHRcdFx0XHRcdHN0YXR1czogSU5WSVRBVElPTl9DQU5DRUxFRCxcblx0XHRcdFx0XHRcdFx0dGltZXN0YW1wX2VuZDogV2ViY29tLlNlcnZlclZhbHVlLlRJTUVTVEFNUFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdFx0bU91dGdvaW5nSW52aXRlcyA9IFtdO1xuXHRcdH1cblxuXHRcdGlmIChhdXRvbWF0aWNSZWplY3RUaW1lT3V0KSB7XG5cdFx0XHRhdXRvbWF0aWNSZWplY3RUaW1lT3V0ID0gbnVsbDtcblx0XHR9XG5cdFx0aWYgKGF1dG9tYXRpY1JlamVjdFJlYXNvbikge1xuXHRcdFx0YXV0b21hdGljUmVqZWN0UmVhc29uID0gbnVsbDtcblx0XHR9XG5cblx0XHRpZiAobURldmljZUlkKSB7XG5cdFx0XHRtRGV2aWNlSWQucmVtb3ZlKCk7XG5cdFx0XHRtRGV2aWNlSWQgPSBudWxsO1xuXHRcdH1cblxuXHR9XG5cblx0aW5pdCgpO1xuXHRyZXR1cm4ge1xuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgdGhlIHVzZXIgaWRlbnRpZmllciB1c2VkIGluIHRoZSBkYXRhYmFzZS4gVGhpcyB2YWx1ZVxuXHRcdCAqIGlkZW50aWZpZXMgdGhlIHVzZXIgaWYgdGhlIFdlYmNvbWJhc2UuXG5cdFx0ICogQHJldHVybiB7c3RyaW5nfSAtIFRoZSB1c2VyIElEXG5cdFx0ICovXG5cdFx0Z2V0TWU6ICgpID0+IHtcblx0XHRcdHJldHVybiBtZTtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIGNoZWNrIGlmIGEgdXNlciBpcyBjb25uZWN0ZWRcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gcF91c2VySWQgLSB0aGUgdXNlciBJZFxuXHRcdCAqIEBwYXJhbSB7ZnVuY3Rpb259IHBfY2IgLSB0aGUgY2FsbGJhY2sgdHJpZ2dlcnMgdG8gcmV0dXJuIHRoZSByZXN1bHQuIFRoZSByZXN1bHQgd2lsbCBiZSBwYXNzZWQgaW4gcGFyYW1ldGVyIGFzIGJvb2xlYW4gOiB0cnVlID0gY29ubmVjdGVkIC8gZmFsc2UgPSBub3QgY29ubmVjdGVkXG5cdFx0ICovXG5cdFx0aXNDb25uZWN0ZWQ6IF9pc0Nvbm5lY3RlZCxcblx0XHQvKipcblx0XHQgKiBjaGVjayBpZiBhIHVzZXIgaXMgcmVnaXN0ZXJcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gcF91c2VySWQgLSB0aGUgdXNlciBJZFxuXHRcdCAqIEBwYXJhbSB7ZnVuY3Rpb259IHBfY2IgLSB0aGUgY2FsbGJhY2sgdHJpZ2dlcnMgdG8gcmV0dXJuIHRoZSByZXN1bHQuIFRoZSByZXN1bHQgd2lsbCBiZSBwYXNzZWQgaW4gcGFyYW1ldGVyIGFzIGJvb2xlYW4gOiB0cnVlID0gcmVnaXN0ZXJlZCAvIGZhbHNlID0gbm90IHJlZ2lzdGVyZWRcblx0XHQgKi9cblx0XHRpc1JlZ2lzdGVyZWQ6IF9pc1JlZ2lzdGVyZWQsXG5cdFx0LyoqXG5cdFx0ICogc2V0IHRoZSBkZXZpY2Ugc3RhdHVzIChERVZJQ0VfU1RBVFVTX0NPTk5FQ1RFRClcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gc3RhdHVzIC0gdGhlIG5ldyBzdGF0dXNcblx0XHQgKi9cblx0XHRzZXRDb25uZWN0ZWRTdGF0dXM6IF9zZXRDb25uZWN0ZWRTdGF0dXMsXG5cdFx0LyoqXG5cdFx0ICogRGVmaW5lcyB0aGUgY2FsbGJhY2sgdG8gdHJpZ2dlciB3aGVuIGEgbmV3IHVzZXIgaXMgYWRkZWRcblx0XHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwX2NiIC0gVGhlIGNhbGxiYWNrIHRvIHVzZVxuXHRcdCAqL1xuXHRcdHNldE9uVXNlckFkZGVkOiBfc2V0T25Vc2VyQWRkZWQsXG5cdFx0LyoqXG5cdFx0ICogRGVmaW5lcyB0aGUgY2FsbGJhY2sgdG8gdHJpZ2dlciB3aGVuIHRoZSB1c2VyIGhhcyBjaGFuZ2VkXG5cdFx0ICogQHBhcmFtIHtmdW5jdGlvbn0gcF9jYiAtIFRoZSBjYWxsYmFjayB0byB1c2Vcblx0XHQgKi9cblx0XHRzZXRPblVzZXJDaGFuZ2VkOiBfc2V0T25Vc2VyQ2hhbmdlZCxcblx0XHQvKipcblx0XHQgKiBEZWZpbmVzIHRoZSBjYWxsYmFjayB0byB0cmlnZ2VyIHdoZW4gYSB1c2VyIGhhcyBiZWVuIHJlbW92ZWQuXG5cdFx0ICogQHBhcmFtIHtmdW5jdGlvbn0gcF9jYiAtIFRoZSBjYWxsYmFjayB0byB1c2Vcblx0XHQgKi9cblx0XHRzZXRPblVzZXJSZW1vdmVkOiBfc2V0T25Vc2VyUmVtb3ZlZCxcblx0XHQvKipcblx0XHQgKiBHYXRoZXIgdGhlIGludml0ZWVzIHRvIHRoZSByb29tLlxuXHRcdCAqIERlZmluZXMgYSBjYWxsYmFjayB0byB0cmlnZ2VyIGZvciBJbnZpdGUgY2hhbmdlcywgYW5kIGNhbGxzIGNhbGxiYWNrcyBmb3Igcm9vbSBpbnZpdGUgYWNjZXB0YXRpb24gb3IgcmVmdXNlLlxuXHRcdCAqIEZvciBlYWNoIGludml0ZWUgYSBub2RlIGlzIGNyZWF0ZWQgaW4gdGhlIGRhdGFiYXNlIGFib3V0IHRoZSBJbnZpdGUgbGlzdC5cblx0XHQgKiBJbiBhZGR0aW9uLCBhIG5vZGUgaXMgY3JlYXRlZCB0b28gZm9yIGVhY2ggaW52aXRlZSBhYm91dCB0aGUgcGFydGljaXBhbnRMaXN0LlxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSBwX3Jvb21JZCAtIFRoZSByb29tIHVzZWQgYXMgdGhlIG5hbWUgb2YgYSBicmFuY2ggaXMgdGhlIGRhdGFiYXNlXG5cdFx0ICogQHBhcmFtIHthcnJheX0gcF9ndWVzdElkcyAtIEFuIGFycmF5IHBvc3Nlc3NpbmcgdGhlIGlkZW50aWZpZXJzIG9mIHRoZSBpbnZpdGVlc1xuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSBwX3RvcGljIC0gY3VzdG9tIG1lc3NhZ2UgZm9yIHRoZSBpbnZpdGF0aW9uXG5cdFx0ICogQHBhcmFtIHtmdW5jdGlvbn0gcF9zdGF0dXNDaGFuZ2VkQ2IgLSBvcHRpb25hbCA6IGNhbGxiYWNrIGZ1bmN0aW9uIHdoZW4gYW4gaW52aXRlZSBhY2NlcHRzL3JlamVjdGVkL2NhbmNlbGVkIHRoZSBJbnZpdGVcblx0XHQgKi9cblx0XHRpbnZpdGVUb1Jvb206IF9pbnZpdGVUb1Jvb20sXG5cdFx0LyoqXG5cdFx0ICogQ2FuY2VscyB0aGUgSW52aXRlXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IHBfcm9vbUlkIC0gVGhlIHJvb20gSWQgb2YgdGhlIEludml0ZVxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSBwX2d1ZXN0SWRzIC0gb3B0aW9uYWwgOiBBbiBhcnJheSBwb3NzZXNzaW5nIHRoZSBpZGVudGlmaWVycyBvZiB0aGUgaW52aXRlZXMuIChpZiB1bmRlZmluZWQgLCAgYWxsIGludml0ZWUgd2lsbCBoYXZlIHRoZWlyIEludml0ZSBjYW5jZWxlZClcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gaW52aXRlSWQgLSBUaGUgaW52aXRlIGlkZW50aWZpZXJcblx0XHQgKi9cblx0XHRjYW5jZWxJbnZpdGF0aW9uOiBfY2FuY2VsSW52aXRhdGlvbixcblx0XHQvKipcblx0XHQgKiBEZWZpbmVzIHRoZSBjYWxsYmFjayB0byB0cmlnZ2VyIHdoZW4gYSByb29tIGludml0ZSBoYXMgYmVlbiByZWNlaXZlZC5cblx0XHQgKiBPdGhlciBjYWxsYmFja3Mgd2lsbCBiZSB0cmlnZ2VyZWQgYWJvdXQgSW52aXRlIGxpc3RzLlxuXHRcdCAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uTmV3Um9vbUludml0YXRpb25DYiAtIFRoZSBjYWxsYmFjayB0cmlnZ2VycyB3aGVuIGEgSW52aXRlIGlzIHJlY2VpdmVkIChzdGF0dXMgPSBvbiBnb2luZylcblx0XHQgKi9cblx0XHRzZXRPbk5ld1Jvb21JbnZpdGF0aW9uOiBfc2V0T25OZXdSb29tSW52aXRhdGlvbixcblx0XHQvKipcblx0XHQgKiBEZWZpbmVzIHRoZSBjYWxsYmFjayB0byB0cmlnZ2VyIHdoZW4gYSByb29tIGludml0ZSBoYXMgYmVlbiByZWNlaXZlZC5cblx0XHQgKiBPdGhlciBjYWxsYmFja3Mgd2lsbCBiZSB0cmlnZ2VyZWQgYWJvdXQgSW52aXRlIGxpc3RzLlxuXHRcdCAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uUm9vbUludml0YXRpb25DaGFuZ2VkQ2IgLSBUaGUgY2FsbGJhY2sgdHJpZ2dlcnMgd2hlbiB0aGUgc2F0dXMgb24gdGhlIEludml0ZSByZWNlaXZlZCBoYXMgY2hhbmdlZCAoc3RhdHVzID0gYWNjZXB0ZWQvcmVqZWN0ZWQvY2FuY2VsZWQpXG5cdFx0ICovXG5cdFx0c2V0T25Sb29tSW52aXRhdGlvbkNoYW5nZWQ6IF9zZXRPblJvb21JbnZpdGF0aW9uQ2hhbmdlZCxcblx0XHQvKipcblx0XHQgKiBEZWZpbmVzIGEgdGltZW91dCB0byByZWplY3QgYXV0b21hdGljYWxseSB0aGUgSW52aXRlXG5cdFx0ICogT3RoZXIgY2FsbGJhY2tzIHdpbGwgYmUgdHJpZ2dlcmVkIGFib3V0IEludml0ZSBsaXN0cy5cblx0XHQgKiBAcGFyYW0ge2ludGVnZXJ9IHBfdGltZW91dCAtIFRoZSBkZWxheVxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSBwX3JlYXNvbiAtIG9wdGlvbmFsIGluZm8gYWJvdXQgdGhlIHJlamVjdFxuXHRcdCAqL1xuXHRcdHNldE5ld1Jvb21JbnZpdGF0aW9uVGltZW91dDogX3NldE5ld1Jvb21JbnZpdGF0aW9uVGltZW91dCxcblxuXHRcdC8qKlxuXHRcdCAqIG1vdmUgYWxsIHRoZSBub24gYWN0aXZlIGludml0YXRpb25zIHByb2Nlc3NlZCBvZiBhbiB1c2VyIHRvIHRoZSBpbnZpdGF0aW9uIExpc3QgSGlzdG9yeTpcblx0XHQgKiBBbGwgaW52aXRhdGlvbnMgd2l0aCBzdGF0dXMgQ2FuY2VsZWQgb3IgUmVqZWN0ZWQgd2lsbCBiZSBhcmNoaXZlZFxuXHRcdCAqIEFsbCBpbnZpdGF0aW9uIHdpdGggc3RhdHVzIE9uZ29pbmcgb3IgQWNjZXB0ZWQgV2lsbCBiZSBhcmNoaXZlZCBpZiB0aGUgY29ycmVzcG9uZGluZyByb29tIGlzIGNsb3NlZFxuXHRcdCAqIElmIGFuIGludml0YXRpb24gd2l0aCBzdGF0dXMgXCJPbmdvaW5nXCIgaXMgYXJjaGl2ZWQsIGl0cyBzdGF0dXMgd2lsbCBiZSBzZXQgdG8gY2FuY2VsZWRcblx0XHQgKiBAcGFyYW0gcF9jYiAtIFRoaXMgY2FsbGJhY2sgaXMgdHJpZ2dlciB3aGVuIGFyY2hpdmUgaXMgY29tcGxldGVcblx0XHQgKi9cblx0XHRhcmNoaXZlTXlJbnZpdGF0aW9uczogKHBfY2IpID0+IHtcblx0XHRcdHJldHVybiBfYXJjaGl2ZUludml0YXRpb25zKG1lLCBwX2NiKTtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIE1ha2VzIGFuIGludml0ZSBhY2NlcHRlZCwgYW5kIGRlZmluZXMgdGhlIFwiYWNjZXB0ZWRcIiBmbGFnIG9mIHRoaXMgaW52aXRlIGF0IHRydWUgaW4gdGhlIGRhdGFiYXNlLlxuXHRcdCAqIEBwYXJhbSBwX2ludml0YXRpb25EYXRhIC1cblx0XHQgKi9cblx0XHRhY2NlcHRJbnZpdGF0aW9uOiBfYWNjZXB0SW52aXRhdGlvbixcblxuXHRcdC8qKlxuXHRcdCAqIFJlZnVzZXMgdGhlIGludml0ZSBhbmQgc2V0IHRoZSBcImFjY2VwdGVkXCIgZmxhZyBvZiB0aGlzIGludml0ZSBpbiB0aGUgZGF0YWJhc2UgdG8gZmFsc2Vcblx0XHQgKiBAcGFyYW0gcF9pbnZpdGF0aW9uRGF0YSAtIFRoZSBpbnZpdGUgZGF0YVxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSBwX3JlYXNvbiAtIG9wdGlvbmFsIGluZm8gYWJvdXQgdGhlIHJlamVjdFxuXHRcdCAqL1xuXHRcdHJlamVjdEludml0YXRpb246IF9yZWplY3RJbnZpdGF0aW9uLFxuXG5cdFx0LyoqXG5cdFx0ICogRGVmaW5lcyBhIGNhbGxiYWNrIGZvciBhIHBhcnRpY3VsYXIgZXZlbnRcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gcF9ldnQgLSBUbyBjaG9vc2UgYmV0d2VlbiBcInJvb21JbnZpdGVcIiwgXCJyb29tSW52aXRlQWNjZXB0ZWRcIiwgXCJyb29tSW52aXRlQ2FuY2VsZWRcIiwgXCJ1c2VyXCIgYW5kIFwidXNlclJlbW92YWxcIlxuXHRcdCAqIEBwYXJhbSB7ZnVuY3Rpb259IHBfY2IgLSBUaGUgY2FsbGJhY2sgdG8gcmlzZVxuXHRcdCAqL1xuXHRcdG9uOiAocF9ldnQsIHBfY2IpID0+IHtcblx0XHRcdHN3aXRjaCAocF9ldnQpIHtcblx0XHRcdGNhc2UgJ25ld1Jvb21JbnZpdGF0aW9uJzpcblx0XHRcdFx0dGhpcy5zZXRPbk5ld1Jvb21JbnZpdGF0aW9uKHBfY2IpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ3Jvb21JbnZpdGF0aW9uQ2hhbmdlZCc6XG5cdFx0XHRcdHRoaXMuc2V0T25Sb29tSW52aXRhdGlvbkNoYW5nZWQocF9jYik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAndXNlckFkZGVkJzpcblx0XHRcdFx0dGhpcy5zZXRPblVzZXJBZGRlZChwX2NiKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICd1c2VyQ2hhbmdlZCc6XG5cdFx0XHRcdHRoaXMuc2V0T25Vc2VyQ2hhbmdlZChwX2NiKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICd1c2VyUmVtb3ZlZCc6XG5cdFx0XHRcdHRoaXMuc2V0T25Vc2VyUmVtb3ZlZChwX2NiKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdyZWFjaC5zZXQ6IG5vIHN1Y2ggZXZlbnQnKTtcblx0XHRcdFx0cmV0dXJuIC0xO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogQ2xvc2VzIGFuZCByZW1vdmVzIGNhbGxiYWNrc1xuXHRcdCAqL1xuXHRcdGNsb3NlOiBfY2xvc2Vcblx0fTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHJlYWNoO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL3JlYWNoLmpzXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzXCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzLmpzXG4gKiogbW9kdWxlIGlkID0gMTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4uLy4uL21vZHVsZXMvJC5jb3JlJykuT2JqZWN0LmtleXM7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYmFiZWwtcnVudGltZS9+L2NvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cy5qc1xuICoqIG1vZHVsZSBpZCA9IDExXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyAxOS4xLjIuMTQgT2JqZWN0LmtleXMoTylcbnZhciB0b09iamVjdCA9IHJlcXVpcmUoJy4vJC50by1vYmplY3QnKTtcblxucmVxdWlyZSgnLi8kLm9iamVjdC1zYXAnKSgna2V5cycsIGZ1bmN0aW9uKCRrZXlzKXtcbiAgcmV0dXJuIGZ1bmN0aW9uIGtleXMoaXQpe1xuICAgIHJldHVybiAka2V5cyh0b09iamVjdChpdCkpO1xuICB9O1xufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYmFiZWwtcnVudGltZS9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cy5qc1xuICoqIG1vZHVsZSBpZCA9IDEyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyA3LjEuMTMgVG9PYmplY3QoYXJndW1lbnQpXG52YXIgZGVmaW5lZCA9IHJlcXVpcmUoJy4vJC5kZWZpbmVkJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXtcbiAgcmV0dXJuIE9iamVjdChkZWZpbmVkKGl0KSk7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2JhYmVsLXJ1bnRpbWUvfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLnRvLW9iamVjdC5qc1xuICoqIG1vZHVsZSBpZCA9IDEzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyA3LjIuMSBSZXF1aXJlT2JqZWN0Q29lcmNpYmxlKGFyZ3VtZW50KVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIGlmKGl0ID09IHVuZGVmaW5lZCl0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAgXCIgKyBpdCk7XG4gIHJldHVybiBpdDtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYmFiZWwtcnVudGltZS9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuZGVmaW5lZC5qc1xuICoqIG1vZHVsZSBpZCA9IDE0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBtb3N0IE9iamVjdCBtZXRob2RzIGJ5IEVTNiBzaG91bGQgYWNjZXB0IHByaW1pdGl2ZXNcbnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi8kLmV4cG9ydCcpXG4gICwgY29yZSAgICA9IHJlcXVpcmUoJy4vJC5jb3JlJylcbiAgLCBmYWlscyAgID0gcmVxdWlyZSgnLi8kLmZhaWxzJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKEtFWSwgZXhlYyl7XG4gIHZhciBmbiAgPSAoY29yZS5PYmplY3QgfHwge30pW0tFWV0gfHwgT2JqZWN0W0tFWV1cbiAgICAsIGV4cCA9IHt9O1xuICBleHBbS0VZXSA9IGV4ZWMoZm4pO1xuICAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqIGZhaWxzKGZ1bmN0aW9uKCl7IGZuKDEpOyB9KSwgJ09iamVjdCcsIGV4cCk7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2JhYmVsLXJ1bnRpbWUvfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLm9iamVjdC1zYXAuanNcbiAqKiBtb2R1bGUgaWQgPSAxNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGdsb2JhbCAgICA9IHJlcXVpcmUoJy4vJC5nbG9iYWwnKVxuICAsIGNvcmUgICAgICA9IHJlcXVpcmUoJy4vJC5jb3JlJylcbiAgLCBjdHggICAgICAgPSByZXF1aXJlKCcuLyQuY3R4JylcbiAgLCBQUk9UT1RZUEUgPSAncHJvdG90eXBlJztcblxudmFyICRleHBvcnQgPSBmdW5jdGlvbih0eXBlLCBuYW1lLCBzb3VyY2Upe1xuICB2YXIgSVNfRk9SQ0VEID0gdHlwZSAmICRleHBvcnQuRlxuICAgICwgSVNfR0xPQkFMID0gdHlwZSAmICRleHBvcnQuR1xuICAgICwgSVNfU1RBVElDID0gdHlwZSAmICRleHBvcnQuU1xuICAgICwgSVNfUFJPVE8gID0gdHlwZSAmICRleHBvcnQuUFxuICAgICwgSVNfQklORCAgID0gdHlwZSAmICRleHBvcnQuQlxuICAgICwgSVNfV1JBUCAgID0gdHlwZSAmICRleHBvcnQuV1xuICAgICwgZXhwb3J0cyAgID0gSVNfR0xPQkFMID8gY29yZSA6IGNvcmVbbmFtZV0gfHwgKGNvcmVbbmFtZV0gPSB7fSlcbiAgICAsIHRhcmdldCAgICA9IElTX0dMT0JBTCA/IGdsb2JhbCA6IElTX1NUQVRJQyA/IGdsb2JhbFtuYW1lXSA6IChnbG9iYWxbbmFtZV0gfHwge30pW1BST1RPVFlQRV1cbiAgICAsIGtleSwgb3duLCBvdXQ7XG4gIGlmKElTX0dMT0JBTClzb3VyY2UgPSBuYW1lO1xuICBmb3Ioa2V5IGluIHNvdXJjZSl7XG4gICAgLy8gY29udGFpbnMgaW4gbmF0aXZlXG4gICAgb3duID0gIUlTX0ZPUkNFRCAmJiB0YXJnZXQgJiYga2V5IGluIHRhcmdldDtcbiAgICBpZihvd24gJiYga2V5IGluIGV4cG9ydHMpY29udGludWU7XG4gICAgLy8gZXhwb3J0IG5hdGl2ZSBvciBwYXNzZWRcbiAgICBvdXQgPSBvd24gPyB0YXJnZXRba2V5XSA6IHNvdXJjZVtrZXldO1xuICAgIC8vIHByZXZlbnQgZ2xvYmFsIHBvbGx1dGlvbiBmb3IgbmFtZXNwYWNlc1xuICAgIGV4cG9ydHNba2V5XSA9IElTX0dMT0JBTCAmJiB0eXBlb2YgdGFyZ2V0W2tleV0gIT0gJ2Z1bmN0aW9uJyA/IHNvdXJjZVtrZXldXG4gICAgLy8gYmluZCB0aW1lcnMgdG8gZ2xvYmFsIGZvciBjYWxsIGZyb20gZXhwb3J0IGNvbnRleHRcbiAgICA6IElTX0JJTkQgJiYgb3duID8gY3R4KG91dCwgZ2xvYmFsKVxuICAgIC8vIHdyYXAgZ2xvYmFsIGNvbnN0cnVjdG9ycyBmb3IgcHJldmVudCBjaGFuZ2UgdGhlbSBpbiBsaWJyYXJ5XG4gICAgOiBJU19XUkFQICYmIHRhcmdldFtrZXldID09IG91dCA/IChmdW5jdGlvbihDKXtcbiAgICAgIHZhciBGID0gZnVuY3Rpb24ocGFyYW0pe1xuICAgICAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIEMgPyBuZXcgQyhwYXJhbSkgOiBDKHBhcmFtKTtcbiAgICAgIH07XG4gICAgICBGW1BST1RPVFlQRV0gPSBDW1BST1RPVFlQRV07XG4gICAgICByZXR1cm4gRjtcbiAgICAvLyBtYWtlIHN0YXRpYyB2ZXJzaW9ucyBmb3IgcHJvdG90eXBlIG1ldGhvZHNcbiAgICB9KShvdXQpIDogSVNfUFJPVE8gJiYgdHlwZW9mIG91dCA9PSAnZnVuY3Rpb24nID8gY3R4KEZ1bmN0aW9uLmNhbGwsIG91dCkgOiBvdXQ7XG4gICAgaWYoSVNfUFJPVE8pKGV4cG9ydHNbUFJPVE9UWVBFXSB8fCAoZXhwb3J0c1tQUk9UT1RZUEVdID0ge30pKVtrZXldID0gb3V0O1xuICB9XG59O1xuLy8gdHlwZSBiaXRtYXBcbiRleHBvcnQuRiA9IDE7ICAvLyBmb3JjZWRcbiRleHBvcnQuRyA9IDI7ICAvLyBnbG9iYWxcbiRleHBvcnQuUyA9IDQ7ICAvLyBzdGF0aWNcbiRleHBvcnQuUCA9IDg7ICAvLyBwcm90b1xuJGV4cG9ydC5CID0gMTY7IC8vIGJpbmRcbiRleHBvcnQuVyA9IDMyOyAvLyB3cmFwXG5tb2R1bGUuZXhwb3J0cyA9ICRleHBvcnQ7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYmFiZWwtcnVudGltZS9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuZXhwb3J0LmpzXG4gKiogbW9kdWxlIGlkID0gMTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy84NiNpc3N1ZWNvbW1lbnQtMTE1NzU5MDI4XG52YXIgZ2xvYmFsID0gbW9kdWxlLmV4cG9ydHMgPSB0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnICYmIHdpbmRvdy5NYXRoID09IE1hdGhcbiAgPyB3aW5kb3cgOiB0eXBlb2Ygc2VsZiAhPSAndW5kZWZpbmVkJyAmJiBzZWxmLk1hdGggPT0gTWF0aCA/IHNlbGYgOiBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuaWYodHlwZW9mIF9fZyA9PSAnbnVtYmVyJylfX2cgPSBnbG9iYWw7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWZcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9iYWJlbC1ydW50aW1lL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5nbG9iYWwuanNcbiAqKiBtb2R1bGUgaWQgPSAxN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGNvcmUgPSBtb2R1bGUuZXhwb3J0cyA9IHt2ZXJzaW9uOiAnMS4yLjYnfTtcbmlmKHR5cGVvZiBfX2UgPT0gJ251bWJlcicpX19lID0gY29yZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2JhYmVsLXJ1bnRpbWUvfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmNvcmUuanNcbiAqKiBtb2R1bGUgaWQgPSAxOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gb3B0aW9uYWwgLyBzaW1wbGUgY29udGV4dCBiaW5kaW5nXG52YXIgYUZ1bmN0aW9uID0gcmVxdWlyZSgnLi8kLmEtZnVuY3Rpb24nKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZm4sIHRoYXQsIGxlbmd0aCl7XG4gIGFGdW5jdGlvbihmbik7XG4gIGlmKHRoYXQgPT09IHVuZGVmaW5lZClyZXR1cm4gZm47XG4gIHN3aXRjaChsZW5ndGgpe1xuICAgIGNhc2UgMTogcmV0dXJuIGZ1bmN0aW9uKGEpe1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSk7XG4gICAgfTtcbiAgICBjYXNlIDI6IHJldHVybiBmdW5jdGlvbihhLCBiKXtcbiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEsIGIpO1xuICAgIH07XG4gICAgY2FzZSAzOiByZXR1cm4gZnVuY3Rpb24oYSwgYiwgYyl7XG4gICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiLCBjKTtcbiAgICB9O1xuICB9XG4gIHJldHVybiBmdW5jdGlvbigvKiAuLi5hcmdzICovKXtcbiAgICByZXR1cm4gZm4uYXBwbHkodGhhdCwgYXJndW1lbnRzKTtcbiAgfTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYmFiZWwtcnVudGltZS9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuY3R4LmpzXG4gKiogbW9kdWxlIGlkID0gMTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICBpZih0eXBlb2YgaXQgIT0gJ2Z1bmN0aW9uJyl0aHJvdyBUeXBlRXJyb3IoaXQgKyAnIGlzIG5vdCBhIGZ1bmN0aW9uIScpO1xuICByZXR1cm4gaXQ7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2JhYmVsLXJ1bnRpbWUvfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmEtZnVuY3Rpb24uanNcbiAqKiBtb2R1bGUgaWQgPSAyMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihleGVjKXtcbiAgdHJ5IHtcbiAgICByZXR1cm4gISFleGVjKCk7XG4gIH0gY2F0Y2goZSl7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYmFiZWwtcnVudGltZS9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuZmFpbHMuanNcbiAqKiBtb2R1bGUgaWQgPSAyMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5XCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5LmpzXG4gKiogbW9kdWxlIGlkID0gMjJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBjb3JlID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy8kLmNvcmUnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc3RyaW5naWZ5KGl0KXsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICByZXR1cm4gKGNvcmUuSlNPTiAmJiBjb3JlLkpTT04uc3RyaW5naWZ5IHx8IEpTT04uc3RyaW5naWZ5KS5hcHBseShKU09OLCBhcmd1bWVudHMpO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9iYWJlbC1ydW50aW1lL34vY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5LmpzXG4gKiogbW9kdWxlIGlkID0gMjNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlxuLyoqXG4gKiBAZmlsZSB1dGlscy5qcyAtIEpTIGZpbGUgZm9yIHV0aWxzIG1ldGhvZHMuXG4gKiBAYXV0aG9yIFdlYmNvbVxuICovXG5cblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBkZXNjcmlwdGlvbiBUaGUgdXRpbHMgY2xhc3NcbiAqL1xuY29uc3QgdXRpbHMgPSBmdW5jdGlvbigpIHtcblx0LyoqXG5cdCAqXG5cdCAqL1xuXHRmdW5jdGlvbiBzNCgpIHtcblx0XHRyZXR1cm4gTWF0aC5mbG9vcigoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMCkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygxKTtcblx0fVxuXHQvKipcblx0ICogR2VuZXJhdGVzIGFuIGlkZW50aWZpZXIuIFR3byBjYWxscyBvZiB0aGlzIG1ldGhvZGUgbWF5IG5vdCByZXR1cm4gdGhlIHNhbWUgaWRlbnRpZmllclxuXHQgKiBAcmV0dXJuIHtzdHJpbmd9IC0gVGhlIGlkZW50aWZpZXJcblx0ICovXG5cdGZ1bmN0aW9uIF9ndWlkKCkge1xuXHRcdHJldHVybiBgJHtzNCgpfSR7czQoKX0tJHtzNCgpfS0ke3M0KCl9LSR7czQoKX0tJHtzNCgpfSR7czQoKX0ke3M0KCl9YDtcblx0fVxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFRoZSBhcHBsaWNhdGlvbiBpbnN0YW5jZSBpbmRlbnRpZmllclxuXHQgKi9cblx0Y29uc3QgX2FwcEluc3RhbmNlSWQgPSBfZ3VpZCgpO1xuXG5cdHJldHVybiB7XG5cdFx0YXBwSW5zdGFuY2VJZDogX2FwcEluc3RhbmNlSWRcblx0fTtcbn0oKTtcblxuZXhwb3J0IGRlZmF1bHQgdXRpbHM7XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvdXRpbHMuanNcbiAqKi8iLCIvKipcbiAqIEBmaWxlIHJvb20uanMgLSBKUyBmaWxlIHRvIHVzZSBmb3IgdGhlIHJvb20gc2VydmljZS5cbiAqIEBhdXRob3IgV2ViY29tXG4gKi9cblxuLyplc2xpbnQgY29tcGxleGl0eToxLCBtYXgtc3RhdGVtZW50czogMSwgbWF4LWxlbjogMSovXG5cbmltcG9ydCBhY3Rpb25zIGZyb20gJy4vYWN0aW9ucyc7XG5pbXBvcnQgbG9jYWxzdHJlYW0gZnJvbSAnLi9sb2NhbHN0cmVhbSc7XG5pbXBvcnQgdXRpbHMgZnJvbSAnLi91dGlscyc7XG5cbi8qKlxuICogUk9PTV9TVEFUVVNfQ0xPU0Ugc3RhdHVzIDogcm9vbSBpcyBDTE9TRSAvIGluYWN0aXZlXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmNvbnN0IFJPT01fU1RBVFVTX0NMT1NFID0gJ0NMT1NFJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBkZXNjcmlwdGlvbiBUaGUgcm9vbSBvYmplY3Qgd2l0aCBpdHMgc3RyZWFtcywgbWVzc2FnZXMsIGZsYWdzIGFuZCBjYWxsYmFja3MuIFRoZSBwdWJsaXNoZWQgbWVkaWEgc3RyZWFtcywgdGhlIFdlYlJUQyBzdGFja3MsIHRoZSBpbnN0YW50IG1lc3NhZ2VzLCBhbmQgdGhlIHBhcnRpY2lwYW50IGxpc3RzXG4gKiBhcmUgbWFuYWdlZCBpbiB0aGlzIGRhdGEgc3RydWN0dXJlLlxuICogQHBhcmFtIHBfbWUgLSBUaGUgdXNlciBpZGVudGlmaWVyLCBpZGVudGlmeWluZyB0aGUgY3VycmVudCB1c2VyIGluIHRoZSBkYXRhYmFzZVxuICogQHBhcmFtIHBfcm9vbUlkIC0gVGhlIHJvb20gaWRlbnRpZmllciwgaWRlbnRpZnlpbmcgaW4gdGhlIGRhdGFiYXNlIHRoZSByb29tIGluIHVzZVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAocF9tZSwgcF9yb29tSWQsIGRhdGFyZWZzLCB3ZWJydGNtbmdyKSB7XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBUaGUgcm9vbSBpZGVudGlmaWVyLCBpZGVudGlmeWluZyBhIHJvb20gaW4gdGhlIGRhdGFiYXNlXG5cdCAqL1xuXHRjb25zdCByb29tSWQgPSBwX3Jvb21JZDtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBUaGUgdXNlciBpZGVudGlmaWVyXG5cdCAqL1xuXHRjb25zdCBtZSA9IHBfbWU7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQSBkYXRhcmVmIHBvaW50ZXIgcG9pbnRpbmcgdG8gYSBub2RlIGlkZW50aWZpZWQgYnkgdGhlIHJvb20gaWRlbnRpZmllciB1bmRlciB0aGUgcm9vbXMgbm9kZVxuXHQgKi9cblx0Y29uc3QgZGF0YXJlZiA9IGRhdGFyZWZzLmdldFJvb21zKCkuY2hpbGQocm9vbUlkKTtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBUaGUgV2ViUlRDIHN0YWNrcyB1c2VkIGluIHRoaXMgcm9vbVxuXHQgKi9cblx0bGV0IHJvb21XZWJydGNTdGFja3MgPSB7fTtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBUaGUgYXZhaWxhYmxlIHN0cmVhbXNcblx0ICovXG5cdGxldCBtQXZhaWxhYmxlU3RyZWFtcyA9IFtdO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIEFuIGFycmF5IGNvbnRhaW5pbmcgZGF0YSBzdHJ1Y3R1cmVzIGZvciBzdHJlYW1zIHdoaWNoIHBvc3Nlc3MgY2FsbGJhY2tzIHRvIHRyaWdnZXIgaW4gSlNPTiBmb3JtYXQuXG5cdCAqIFRoZXNlIGNhbGxiYWNrcyBhcmUgYWRkU3Vic2NyaWJlckxpc3RDYiBhbmQgcmVtb3ZlU3Vic2NyaWJlcnNMaXN0Q2IuXG5cdCAqL1xuXHRsZXQgbVN0cmVhbXMgPSBbXTtcblxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIEFuIGFycmF5IGNvbnRhaW5pbmcgYWxsIHRoZSBzdHJlYW0gbWFya2VkIGFzIG11dGVkXG5cdCAqL1xuXHRsZXQgbU11dGVkU3RyZWFtcyA9IFtdO1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQSBjYWxsYmFjayB0byB0cmlnZ2VyIGZvciB1bnB1Ymxpc2hlZCByZW1vdGUgb2JqZWN0c1xuXHQgKi9cblx0bGV0IHJlbW90ZVVucHVibGlzaGVkQ2IgPSBudWxsO1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQ2FsbGJhY2sgdHJpZ2dlcmVkIHdoZW4gYSBsaXN0IG9mIGluc3RhbnQgbWVzc2FnZXMgaGFzIGJlZW4gcmVjZWl2ZWRcblx0ICovXG5cdGxldCBpbnN0YW50TWVzc2FnZUxpc3RDYiA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gVXNlcidzIGNhbGxiYWNrIHRyaWdnZXJlZCB3aGVuIGEgbGlzdCBvZiBtZWRpYXMgaGFzIGJlZW4gcHVibGlzaGVkXG5cdCAqL1xuXHRsZXQgcHVibGlzaGVkTWVkaWFMaXN0Q2IgPSBudWxsO1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gcm9vbSdzIGNhbGxiYWNrIHRyaWdnZXJlZCB3aGVuIGEgbGlzdCBvZiBtZWRpYXMgaGFzIGJlZW4gcHVibGlzaGVkXG5cdCAqL1xuXHRsZXQgcHVibGlzaGVkTWVkaWFMaXN0Q2JGb3JBdmFpbGFibGVTdHJlYW0gPSBudWxsO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIHVzZXIncyBjYWxsYmFjayB0cmlnZ2VyZWQgd2hlbiBhIGxpc3Qgb2YgbWVkaWFzIGhhcyBiZWVuIHVucHVibGlzaGVkXG5cdCAqL1xuXHRsZXQgdW5QdWJsaXNoZWRNZWRpYUxpc3RDYiA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gcm9vbSdzIGNhbGxiYWNrIHRyaWdnZXJlZCB3aGVuIGEgbGlzdCBvZiBtZWRpYXMgaGFzIGJlZW4gcHVibGlzaGVkXG5cdCAqL1xuXHRsZXQgdW5QdWJsaXNoZWRNZWRpYUxpc3RDYkZvckF2YWlsYWJsZVN0cmVhbSA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQ2FsbGJhY2sgdHJpZ2dlcmVkIHdoZW4gYSBsaXN0IG9mIHBhcnRpY2lwYW50cyBqb2lucyB0aGUgcm9vbSAoYWRkZWQpXG5cdCAqL1xuXHRsZXQgcGFydGljaXBhbnRMaXN0Sm9pbkFkZGVkQ2IgPSBudWxsO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIENhbGxiYWNrIHRyaWdnZXJlZCB3aGVuIGEgbGlzdCBvZiBwYXJ0aWNpcGFudHMgam9pbnMgdGhlIHJvb20gKGNoYW5nZWQpXG5cdCAqL1xuXHRsZXQgcGFydGljaXBhbnRMaXN0Sm9pbkNoYW5nZWRDYiA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQ2FsbGJhY2sgdHJpZ2dlcmVkIHdoZW4gYSBsaXN0IG9mIHBhcnRpY2lwYW50cyBsZWF2ZXMgdGhlIHJvb21cblx0ICovXG5cdGxldCBwYXJ0aWNpcGFudExpc3RMZWF2ZUNiID0gbnVsbDtcblxuXHQvKipcblx0ICogQWRkcyBhbiBhdmFpbGFibGUgc3RyZWFtXG5cdCAqIEBwYXJhbSBkYXRhIC0gVGhlIHN0cmVhbSB0byBhZGRcblx0ICovXG5cdGZ1bmN0aW9uIF9hZGRBdmFpbGFibGVTdHJlYW0oZGF0YSkge1xuXHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJvb21bJHtyb29tSWR9XTo6X2FkZEF2YWlsYWJsZVN0cmVhbSlkYXRhPSR7SlNPTi5zdHJpbmdpZnkoZGF0YSl9YCk7XG5cdFx0bUF2YWlsYWJsZVN0cmVhbXMucHVzaChkYXRhKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZW1vdmVzIGFuIGF2YWlsYWJsZSBzdHJlYW1cblx0ICogQHBhcmFtIHN0cmVhbSAtIFRoZSBzdHJlYW1JZCB0byByZW1vdmVcblx0ICovXG5cdGZ1bmN0aW9uIF9yZW1vdmVBdmFpbGFibGVTdHJlYW0oc3RyZWFtSWQpIHtcblx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyb29tWyR7cm9vbUlkfV06Ol9yZW1vdmVBdmFpbGFibGVTdHJlYW0pc3RyZWFtSWQ9JHtzdHJlYW1JZH1gKTtcblx0XHRpZiAobUF2YWlsYWJsZVN0cmVhbXMgJiYgc3RyZWFtSWQpIHtcblx0XHRcdGZvciAobGV0IGkgPSBtQXZhaWxhYmxlU3RyZWFtcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0XHRpZiAobUF2YWlsYWJsZVN0cmVhbXNbaV0gJiYgT2JqZWN0LmtleXMobUF2YWlsYWJsZVN0cmVhbXNbaV0pWzBdICYmIE9iamVjdC5rZXlzKG1BdmFpbGFibGVTdHJlYW1zW2ldKVswXSA9PT0gc3RyZWFtSWQpIHtcblx0XHRcdFx0XHRkZWxldGUgbUF2YWlsYWJsZVN0cmVhbXNbaV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogSW5pdGlhbGl6ZXMgYSBXZWJjb20gbGlzdGVuZXIuXG5cdCAqIERlZmluZXMgY2FsbGJhY2tzIChpZiBub3QgYWxyZWFkeSBkZWZpbmVkKSBmb3IgOiBpbnN0YW50IG1lc3NhZ2VzLCBtZWRpYSBsaXN0IGFuZCBwYXJ0aWNpcGFudHMuXG5cdCAqIFRoZXNlIGNhbGxiYWNrcyBhcmUgY2FsbGVkIGlmIGEgbmV3IHZhbHVlIGlzIGFkZGVkIG9yIGlmIGEgdmFsdWUgaGFzIGJlZW4gcmVtb3ZlZCBpbiB0aGUgZGF0YWJhc2UuXG5cdCAqL1xuXHRmdW5jdGlvbiBpbml0V2ViY29tTGlzdGVuZXIoKSB7XG5cdFx0aWYgKCFwdWJsaXNoZWRNZWRpYUxpc3RDYkZvckF2YWlsYWJsZVN0cmVhbSkge1xuXHRcdFx0cHVibGlzaGVkTWVkaWFMaXN0Q2JGb3JBdmFpbGFibGVTdHJlYW0gPSBmdW5jdGlvbiAoc25hcHNob3QpIHtcblx0XHRcdFx0Y29uc3Rcblx0XHRcdFx0XHRvYmogPSB7fSxcblx0XHRcdFx0XHRuYW1lID0gc25hcHNob3QubmFtZSgpLFxuXHRcdFx0XHRcdHZhbHVlID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJvb21bJHtyb29tSWR9XTo6b25QdWJsaXNoZWRTdHJlYW1Gb3JBdmFpbGFibGVTdHJlYW0pc3RyZWFtPSR7SlNPTi5zdHJpbmdpZnkodmFsdWUpfWApO1xuXHRcdFx0XHRvYmpbbmFtZV0gPSB2YWx1ZTtcblx0XHRcdFx0b2JqW25hbWVdLnJvb21JZCA9IHJvb21JZDtcblx0XHRcdFx0X2FkZEF2YWlsYWJsZVN0cmVhbShvYmopO1xuXHRcdFx0fTtcblx0XHRcdGRhdGFyZWYuY2hpbGQoJ3B1Ymxpc2hlZE1lZGlhTGlzdCcpLm9uKCdjaGlsZF9hZGRlZCcsIHB1Ymxpc2hlZE1lZGlhTGlzdENiRm9yQXZhaWxhYmxlU3RyZWFtKTtcblx0XHR9XG5cblx0XHRpZiAoIXVuUHVibGlzaGVkTWVkaWFMaXN0Q2JGb3JBdmFpbGFibGVTdHJlYW0pIHtcblx0XHRcdHVuUHVibGlzaGVkTWVkaWFMaXN0Q2JGb3JBdmFpbGFibGVTdHJlYW0gPSBmdW5jdGlvbiAoc25hcHNob3QpIHtcblx0XHRcdFx0Y29uc3Qgc3RyZWFtSWQgPSBzbmFwc2hvdC5uYW1lKCk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJvb21bJHtyb29tSWR9XTo6b25VblB1Ymxpc2hlZFN0cmVhbUZvckF2YWlsYWJsZVN0cmVhbSlzdHJlYW09JHtzdHJlYW1JZH1gKTtcblx0XHRcdFx0X3JlbW92ZUF2YWlsYWJsZVN0cmVhbShzdHJlYW1JZCk7XG5cdFx0XHR9O1xuXHRcdFx0ZGF0YXJlZi5jaGlsZCgncHVibGlzaGVkTWVkaWFMaXN0Jykub24oJ2NoaWxkX3JlbW92ZWQnLCB1blB1Ymxpc2hlZE1lZGlhTGlzdENiRm9yQXZhaWxhYmxlU3RyZWFtKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogSW5pdGlhbGl6ZXMgdGhlIHJvb20gb2JqZWN0IGJ5IGFkZGluZyBhIG5ldyB2YWx1ZSBpbiBhIGNoaWxkIGlkZW50aWZpZWQgYnkgdGhlIHVzZXIgaWRlbnRpZmllciB1bmRlclxuXHQgKiB0aGUgcGFydGljaXBhbnRMaXN0IG5vZGVcblx0ICovXG5cdGZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0ZGF0YXJlZi5jaGlsZChgcGFydGljaXBhbnRMaXN0LyR7bWV9YCkudXBkYXRlKHtcblx0XHRcdGNvbm5lY3RlZDogdHJ1ZSxcblx0XHRcdHdhc0luc2lkZVJvb206IHRydWVcblx0XHR9KTtcblx0XHRkYXRhcmVmLmNoaWxkKGBwYXJ0aWNpcGFudExpc3QvJHttZX0vY29ubmVjdGVkYCkub25EaXNjb25uZWN0KCkuc2V0KGZhbHNlKTtcblx0XHRpbml0V2ViY29tTGlzdGVuZXIoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm4gdGhlIHJvb20gaWRlbnRpZmllclxuXHQgKiBAcmV0dXJuIHtzdHJpbmd9IC0gVGhlIHJvb20gaWRlbnRpZmllclxuXHQgKi9cblx0ZnVuY3Rpb24gX2dldFJvb21JZCgpIHtcblx0XHRyZXR1cm4gcm9vbUlkO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIHVzZXIgaWRlbnRpZmllclxuXHQgKiBAcmV0dXJuIHtzdHJpbmd9IC0gVGhlIHVzZXIgaWRlbnRpZmllclxuXHQgKi9cblx0ZnVuY3Rpb24gX2dldE1lKCkge1xuXHRcdHJldHVybiBtZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBJbml0aWFsaXplcyB0aGUgUGFydGljaXBhbnRzIGFkZGVkIGxpc3RlbmVyLlxuXHQgKiBEZWZpbmVzIGNhbGxiYWNrIChyZW1vdmUgYW55IGV4aXN0aW5nIG9uZSkgZm9yIHRoZSBwYXJ0aWNpcGFudHMuXG5cdCAqIFRoaXMgY2FsbGJhY2sgaXMgY2FsbGVkLCBmaXJzdCBmb3IgYW55IGV4aXN0aW5nIGNvbm5lY3RlZCBwYXJ0aWNpcGFudHMsIHRoZW4gd2hlbiBhIG5ldyBwYXJ0aWNpcGFudCBpcyBhZGRlZC5cblx0ICovXG5cdGZ1bmN0aW9uIF9zZXRPblBhcnRpY2lwYW50Sm9pbihwX2NiKSB7XG5cdFx0Y29uc3QgcGFydGljaXBhbnRMaXN0UmVmID0gZGF0YXJlZi5jaGlsZCgncGFydGljaXBhbnRMaXN0Jyk7XG5cblx0XHRpZiAocGFydGljaXBhbnRMaXN0Sm9pbkFkZGVkQ2IpIHtcblx0XHRcdHBhcnRpY2lwYW50TGlzdFJlZi5vZmYoJ2NoaWxkX2FkZGVkJywgcGFydGljaXBhbnRMaXN0Sm9pbkFkZGVkQ2IpO1xuXHRcdFx0cGFydGljaXBhbnRMaXN0Sm9pbkFkZGVkQ2IgPSBudWxsO1xuXHRcdH1cblxuXHRcdGlmIChwYXJ0aWNpcGFudExpc3RKb2luQ2hhbmdlZENiKSB7XG5cdFx0XHRwYXJ0aWNpcGFudExpc3RSZWYub2ZmKCdjaGlsZF9jaGFuZ2VkJywgcGFydGljaXBhbnRMaXN0Sm9pbkNoYW5nZWRDYik7XG5cdFx0XHRwYXJ0aWNpcGFudExpc3RKb2luQ2hhbmdlZENiID0gbnVsbDtcblx0XHR9XG5cblx0XHRpZiAocF9jYiAmJiB0eXBlb2YgcF9jYiA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRwYXJ0aWNpcGFudExpc3RKb2luQWRkZWRDYiA9IChzbmFwc2hvdCkgPT4ge1xuXHRcdFx0XHRjb25zdCB1c2VyID0gc25hcHNob3QubmFtZSgpO1xuXHRcdFx0XHRpZiAoc25hcHNob3QudmFsKCkgJiYgc25hcHNob3QudmFsKCkuY29ubmVjdGVkICYmIHNuYXBzaG90LnZhbCgpLndhc0luc2lkZVJvb20pIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyb29tWyR7cm9vbUlkfV06Ol9zZXRPblBhcnRpY2lwYW50Sm9pbikgdXNlciBoYXMgam9pbmVkOiAke3VzZXJ9YCk7XG5cdFx0XHRcdFx0cF9jYih1c2VyKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdHBhcnRpY2lwYW50TGlzdFJlZi5vbignY2hpbGRfYWRkZWQnLCBwYXJ0aWNpcGFudExpc3RKb2luQWRkZWRDYik7XG5cblx0XHRcdHBhcnRpY2lwYW50TGlzdEpvaW5DaGFuZ2VkQ2IgPSBmdW5jdGlvbiAoc25hcHNob3QpIHtcblx0XHRcdFx0Y29uc3QgdXNlciA9IHNuYXBzaG90Lm5hbWUoKTtcblx0XHRcdFx0aWYgKHNuYXBzaG90LnZhbCgpICYmIChzbmFwc2hvdC52YWwoKS5jb25uZWN0ZWQgJiYgc25hcHNob3QudmFsKCkud2FzSW5zaWRlUm9vbSkpIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyb29tWyR7cm9vbUlkfV06Ol9zZXRPblBhcnRpY2lwYW50Sm9pbikgdXNlciBoYXMgam9pbmVkOiAke3VzZXJ9YCk7XG5cdFx0XHRcdFx0cF9jYih1c2VyKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdHBhcnRpY2lwYW50TGlzdFJlZi5vbignY2hpbGRfY2hhbmdlZCcsIHBhcnRpY2lwYW50TGlzdEpvaW5DaGFuZ2VkQ2IpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKGAoUmVhY2hTREs6OnJvb21bJHtyb29tSWR9XTo6X3NldE9uUGFydGljaXBhbnRKb2luKXBhcmFtZXRlciBpbmNvcnJlY3QuIEV4cGVjdGVkIGZ1bmN0aW9uYCk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEluaXRpYWxpemVzIHRoZSBQYXJ0aWNpcGFudHMgbGVmdCBsaXN0ZW5lci5cblx0ICogRGVmaW5lcyBjYWxsYmFjayAocmVtb3ZlIGFueSBleGlzdGluZyBvbmUpIGZvciB0aGUgcGFydGljaXBhbnRzLlxuXHQgKiBUaGlzIGNhbGxiYWNrIGlzIGNhbGxlZCB3aGVuIGEgbmV3IHBhcnRpY2lwYW50IGlzIHJlbW92ZWQuXG5cdCAqL1xuXHRmdW5jdGlvbiBfc2V0T25QYXJ0aWNpcGFudExlYXZlKHBfY2IpIHtcblxuXHRcdGlmIChwYXJ0aWNpcGFudExpc3RMZWF2ZUNiKSB7XG5cdFx0XHRkYXRhcmVmLmNoaWxkKCdwYXJ0aWNpcGFudExpc3QnKS5vZmYoJ2NoaWxkX2NoYW5nZWQnLCBwYXJ0aWNpcGFudExpc3RMZWF2ZUNiKTtcblx0XHRcdHBhcnRpY2lwYW50TGlzdExlYXZlQ2IgPSBudWxsO1xuXHRcdH1cblxuXHRcdGlmIChwX2NiICYmIHR5cGVvZiBwX2NiID09ICdmdW5jdGlvbicpIHtcblx0XHRcdHBhcnRpY2lwYW50TGlzdExlYXZlQ2IgPSAoc25hcHNob3QpID0+IHtcblx0XHRcdFx0Y29uc3QgdXNlciA9IHNuYXBzaG90Lm5hbWUoKTtcblx0XHRcdFx0aWYgKHNuYXBzaG90LnZhbCgpICYmICghc25hcHNob3QudmFsKCkuY29ubmVjdGVkICYmIHNuYXBzaG90LnZhbCgpLndhc0luc2lkZVJvb20pKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cm9vbVske3Jvb21JZH1dOjpfc2V0T25QYXJ0aWNpcGFudExlYXZlKSB1c2VyIGhhcyBsZWZ0OiAke3VzZXJ9YCk7XG5cdFx0XHRcdFx0cF9jYih1c2VyKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdGRhdGFyZWYuY2hpbGQoJ3BhcnRpY2lwYW50TGlzdCcpLm9uKCdjaGlsZF9jaGFuZ2VkJywgcGFydGljaXBhbnRMaXN0TGVhdmVDYik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoYChSZWFjaFNESzo6cm9vbVske3Jvb21JZH1dOjpfc2V0T25QYXJ0aWNpcGFudExlYXZlKXBhcmFtZXRlciBpbmNvcnJlY3QuIEV4cGVjdGVkIGZ1bmN0aW9uYCk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFNlbmRzIGFuIGluc3RhbnQgbWVzc2FnZSBieSBwdXNoaW5nIGFuIG5ldyBlbGVtZW50IGluIHRoZSBkYXRhYmFzZSB3aXRoIGEgdGltZXN0YW1wLCB0aGUgbWVzc2FnZSBhbmQgaXRzIGF1dGhvciAoaS5lLiB0aGUgY3VycmVudCB1c2VyKVxuXHQgKiBAcGFyYW0ge3N0cmluZ31wX21lc3NhZ2UgLSBUaGUgbWVzc2FnZSB0byBzZW5kXG5cdCAqL1xuXHRmdW5jdGlvbiBfc2VuZEluc3RhbnRNZXNzYWdlKHBfbWVzc2FnZSkge1xuXHRcdGlmIChwX21lc3NhZ2UgIT09ICcnKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyb29tWyR7cm9vbUlkfV06OnNlbmRJbnN0YW50TWVzc2FnZSltZXNzYWdlPSR7cF9tZXNzYWdlfWApO1xuXHRcdFx0ZGF0YXJlZi5jaGlsZCgnaW5zdGFudE1lc3NhZ2VMaXN0JykucHVzaCh7XG5cdFx0XHRcdGZyb206IG1lLFxuXHRcdFx0XHRtZXNzYWdlOiBwX21lc3NhZ2UsXG5cdFx0XHRcdHRpbWVzdGFtcDogV2ViY29tLlNlcnZlclZhbHVlLlRJTUVTVEFNUFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEluaXRpYWxpemVzIHRoZSBpbnN0YW50IG1lc3NhZ2UgbGlzdGVuZXIuXG5cdCAqIERlZmluZXMgY2FsbGJhY2sgKHJlbW92ZSBhbnkgZXhpc3Rpbmcgb25lKSBmb3IgOiBpbnN0YW50IG1lc3NhZ2VzLlxuXHQgKiBUaGlzIGNhbGxiYWNrIGlzIGNhbGxlZCwgZmlyc3QgZm9yIGFueSBleGlzdGluZyBpbnN0YW50IG1lc3NhZ2VzLCB0aGVuIHdoZW4gYSBuZXcgdmFsdWUgaXMgYWRkZWQgaW4gdGhlIGRhdGFiYXNlLlxuXHQgKi9cblx0ZnVuY3Rpb24gX3NldE9uSW5zdGFudE1lc3NhZ2UocF9jYikge1xuXHRcdGlmIChpbnN0YW50TWVzc2FnZUxpc3RDYikge1xuXHRcdFx0ZGF0YXJlZi5jaGlsZCgnaW5zdGFudE1lc3NhZ2VMaXN0Jykub2ZmKCdjaGlsZF9hZGRlZCcsIGluc3RhbnRNZXNzYWdlTGlzdENiKTtcblx0XHRcdGluc3RhbnRNZXNzYWdlTGlzdENiID0gbnVsbDtcblx0XHR9XG5cdFx0aWYgKHBfY2IgJiYgdHlwZW9mIHBfY2IgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0aW5zdGFudE1lc3NhZ2VMaXN0Q2IgPSBmdW5jdGlvbiAoc25hcHNob3QpIHtcblx0XHRcdFx0Y29uc3Qgb2JqID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJvb21bJHtyb29tSWR9XTo6X3NldE9uSW5zdGFudE1lc3NhZ2UpcmVjZWl2ZSBJbnN0YW50TWVzc2FnZT0ke0pTT04uc3RyaW5naWZ5KG9iail9YCk7XG5cdFx0XHRcdHBfY2Iob2JqKTtcblx0XHRcdH07XG5cdFx0XHRkYXRhcmVmLmNoaWxkKCdpbnN0YW50TWVzc2FnZUxpc3QnKS5vbignY2hpbGRfYWRkZWQnLCBpbnN0YW50TWVzc2FnZUxpc3RDYik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoYChSZWFjaFNESzo6cm9vbVske3Jvb21JZH1dOjpfc2V0T25JbnN0YW50TWVzc2FnZSlwYXJhbWV0ZXIgaW5jb3JyZWN0LiBFeHBlY3RlZCBmdW5jdGlvbmApO1xuXHRcdH1cblx0fVxuXG5cblx0LyoqXG5cdCAqIFB1Ymxpc2hlcyB0aGUgc3RyZWFtXG5cdCAqIEBwYXJhbSBzdHJlYW1JZCAtIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBzdHJlYW0gdG8gcHVibGlzaFxuXHQgKiBAcGFyYW0gbG9jYWxWaWQgLSBUaGUgbG9jYWwgdmlkZW9cblx0ICogQHBhcmFtIHBfYWN0aW9uVHlwZSAtIEEgdmFsdWUgZGV0ZXJtaW5pbmcgdGhlIHR5cGUgb2Ygc3RyZWFtIGluIHVzZSAodmlkZW8sIGF1ZGlvLCB2aWRlbyBhbmQgYXVkaW8sIHNjcmVlbi1zaGFyaW5nKS5cblx0ICogQHBhcmFtIGdldExvY2FsU3RyZWFtQ2IgLSBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHJldHJpZXZlIHRoZSBtZWRpYXN0cmVhbSBvYmplY3Rcblx0ICovXG5cdGZ1bmN0aW9uIF9wdWJsaXNoU3RyZWFtKHN0cmVhbUlkLCBsb2NhbFZpZCwgcF9hY3Rpb25UeXBlLCBnZXRMb2NhbFN0cmVhbUNiKSB7XG5cdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cm9vbVske3Jvb21JZH1dOjpwdWJsaXNoU3RyZWFtKXJvb21JZD0ke3Jvb21JZH0sc3RyZWFtSWQ9JHtzdHJlYW1JZH0sbWU9JHttZX0sYWN0aW9uVHlwZT0ke3BfYWN0aW9uVHlwZX1gKTtcblx0XHRpZiAoIShzdHJlYW1JZCAmJiB0eXBlb2Ygc3RyZWFtSWQgPT0gJ3N0cmluZycpKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCcoUmVhY2hTREs6OnJlYWNoOjppbnZpdGVUb1Jvb20pcGFyYW1ldGVyIHN0cmVhbUlkIGlzIGluY29ycmVjdC4gRXhwZWN0aW5nIG5vbiBlbXB0eSBzdHJpbmcnKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Y29uc3QgbG9jYWxEYXRhUmVmID0gZGF0YXJlZi5jaGlsZCgncHVibGlzaGVkTWVkaWFMaXN0JykuY2hpbGQoc3RyZWFtSWQpO1xuXHRcdGNvbnN0IHJlbW90ZURhdGFSZWYgPSBsb2NhbERhdGFSZWYuY2hpbGQoJ3N1YnNjcmliZXJzTGlzdCcpO1xuXG5cdFx0Y29uc3QgcHViQW5kU3Vic2NyaWJlID0gKCkgPT4ge1xuXHRcdFx0Ly8gcHVibGlzaCB0aGUgc3RyZWFtXG5cdFx0XHRsb2NhbERhdGFSZWYuc2V0KHtcblx0XHRcdFx0ZnJvbTogbWUsXG5cdFx0XHRcdGFwcEluc3RhbmNlSWQ6IHV0aWxzLmFwcEluc3RhbmNlSWQsXG5cdFx0XHRcdGFjdGlvblR5cGU6IHBfYWN0aW9uVHlwZVxuXHRcdFx0fSk7XG5cdFx0XHRsb2NhbERhdGFSZWYub25EaXNjb25uZWN0KCkucmVtb3ZlKCk7XG5cblx0XHRcdC8vIHN1YnNjcmliZSB0byBzdHJlYW0gdXBkYXRlcyBmb3IgYWRkXG5cdFx0XHRjb25zdCBhZGRTdWJzY3JpYmVyc0xpc3RDYiA9IChzbmFwc2hvdCkgPT4ge1xuXHRcdFx0XHRjb25zdFxuXHRcdFx0XHRcdHJlbW90ZUFwcEluc3RhbmNlSWQgPSBzbmFwc2hvdC5uYW1lKCksXG5cdFx0XHRcdFx0ZGF0YSA9IHNuYXBzaG90LnZhbCgpLFxuXHRcdFx0XHRcdF9zdWJzY3JpYmVySWQgPSBkYXRhLnVzZXJJZCxcblx0XHRcdFx0XHRfcGVlcmNvSWQgPSBkYXRhLnBlZXJjb0lkLFxuXHRcdFx0XHRcdF9wZWVyY29SZWYgPSBkYXRhLnBlZXJjb1JlZixcblx0XHRcdFx0XHRpc0F1ZGlvTXV0ZSA9IG1NdXRlZFN0cmVhbXNbc3RyZWFtSWRdICYmIG1NdXRlZFN0cmVhbXNbc3RyZWFtSWRdLmF1ZGlvLFxuXHRcdFx0XHRcdGlzVmlkZW9NdXRlID0gbU11dGVkU3RyZWFtc1tzdHJlYW1JZF0gJiYgbU11dGVkU3RyZWFtc1tzdHJlYW1JZF0udmlkZW8sXG5cdFx0XHRcdFx0c3RyZWFtU3RhY2tJZCA9IGAke3N0cmVhbUlkfV9wdWJgO1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJvb21bJHtyb29tSWR9XTo6cHVibGlzaFN0cmVhbTo6YWRkU3Vic2NyaWJlcnNMaXN0Q2Ipc3Vic2NyaWJlciAke19zdWJzY3JpYmVySWR9IHRvIHN0cmVhbSAke3N0cmVhbUlkfSBhZGRlZCAke0pTT04uc3RyaW5naWZ5KGRhdGEpfWApO1xuXG5cdFx0XHRcdGlmICghcm9vbVdlYnJ0Y1N0YWNrc1tzdHJlYW1TdGFja0lkXSkge1xuXHRcdFx0XHRcdHJvb21XZWJydGNTdGFja3Nbc3RyZWFtU3RhY2tJZF0gPSBbXTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IG1TdGFja0lkID0gd2VicnRjbW5nci5jcmVhdGVXZWJydGMobG9jYWxWaWQsIHJlbW90ZUFwcEluc3RhbmNlSWQsICgpID0+IHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyb29tWyR7cm9vbUlkfV06OnB1Ymxpc2hTdHJlYW06OmFkZFN1YnNjcmliZXJzTGlzdENiKXN1YnNjcmliZXIgJHtfc3Vic2NyaWJlcklkfSB0byBzdHJlYW0gJHtzdHJlYW1JZH0gY29ubmVjdGlvbiBsb3N0YCk7XG5cdFx0XHRcdFx0Ly9vblVuUHVibGlzaGVkU3RyZWFtKGxvY2FsVmlkLCByZW1vdGVWaWQpO1xuXHRcdFx0XHR9LCB0cnVlLCBwX2FjdGlvblR5cGUsIF9wZWVyY29JZCwgX3BlZXJjb1JlZiwgaXNBdWRpb011dGUsIGlzVmlkZW9NdXRlKTtcblxuXHRcdFx0XHRyb29tV2VicnRjU3RhY2tzW3N0cmVhbVN0YWNrSWRdLnB1c2goe1xuXHRcdFx0XHRcdHN0YWNrSWQ6IG1TdGFja0lkLFxuXHRcdFx0XHRcdHN1YnNjcmliZXJJZDogX3N1YnNjcmliZXJJZCxcblx0XHRcdFx0XHRpc1B1Ymxpc2g6IHRydWUsXG5cdFx0XHRcdFx0cGVlcmNvSWQ6IF9wZWVyY29JZCxcblx0XHRcdFx0XHRwZWVyY29SZWY6IF9wZWVyY29SZWZcblx0XHRcdFx0fSk7XG5cdFx0XHRcdC8vZGVsZXRlIHJvb21XZWJydGNTdGFja3Nbc3RyZWFtSWQrXCJfcHViXCJdO1xuXHRcdFx0XHQvLyQoXCJkaXYjdmlkZW9CdXR0b25fXCIrcm9vbUlkK1wiLnZpZGVvQnV0dG9uLCBkaXYjbWljQnV0dG9uX1wiK3Jvb21JZCtcIi5taWNCdXR0b25cIikucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKTtcblx0XHRcdH07XG5cblx0XHRcdC8vIHN1YnNjcmliZSB0byBzdHJlYW0gdXBkYXRlcyBmb3IgcmVtb3ZlXG5cdFx0XHRjb25zdCByZW1vdmVTdWJzY3JpYmVyc0xpc3RDYiA9IChzbmFwc2hvdCkgPT4ge1xuXHRcdFx0XHRjb25zdFxuXHRcdFx0XHRcdHN1YnNjcmliZXJJZCA9IHNuYXBzaG90Lm5hbWUoKSxcblx0XHRcdFx0XHRzdHJlYW1TdGFja3MgPSByb29tV2VicnRjU3RhY2tzW2Ake3N0cmVhbUlkfV9wdWJgXTtcblxuXHRcdFx0XHRpZiAoc3Vic2NyaWJlcklkICYmIHN0cmVhbVN0YWNrcykge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJvb21bJHtyb29tSWR9XTo6cHVibGlzaFN0cmVhbTo6cmVtb3ZlU3Vic2NyaWJlcnNMaXN0Q2Ipc3Vic2NyaWJlciAke3N1YnNjcmliZXJJZH0gdG8gc3RyZWFtICR7c3RyZWFtSWR9IHJlbW92ZWRgKTtcblx0XHRcdFx0XHRmb3IgKGxldCBpID0gc3RyZWFtU3RhY2tzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRcdFx0XHRpZiAoc3RyZWFtU3RhY2tzW2ldLnN1YnNjcmliZXJJZCA9PT0gc3Vic2NyaWJlcklkKSB7XG5cdFx0XHRcdFx0XHRcdHdlYnJ0Y21uZ3IuY2xvc2VXZWJydGMoc3RyZWFtU3RhY2tzW2ldLnN0YWNrSWQsIHRydWUpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkZWxldGUgcm9vbVdlYnJ0Y1N0YWNrc1tgJHtzdHJlYW1JZH1fcHViYF07XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHRcdG1TdHJlYW1zW3N0cmVhbUlkXSA9IHtcblx0XHRcdFx0YWRkU3Vic2NyaWJlcnNMaXN0Q2IsXG5cdFx0XHRcdHJlbW92ZVN1YnNjcmliZXJzTGlzdENiXG5cdFx0XHR9O1xuXG5cdFx0XHRyZW1vdGVEYXRhUmVmLm9uKCdjaGlsZF9hZGRlZCcsIGFkZFN1YnNjcmliZXJzTGlzdENiKTtcblx0XHRcdHJlbW90ZURhdGFSZWYub24oJ2NoaWxkX3JlbW92ZWQnLCByZW1vdmVTdWJzY3JpYmVyc0xpc3RDYik7XG5cdFx0fTtcblxuXHRcdC8vaW5pdCBsb2NhbCBzdHJlYW1cblx0XHRpZiAocF9hY3Rpb25UeXBlKSB7XG5cdFx0XHRpZiAocF9hY3Rpb25UeXBlID09PSBhY3Rpb25zLkFDVElPTl9UWVBFX1ZJREVPKSB7XG5cdFx0XHRcdGxvY2Fsc3RyZWFtLmNvbm5lY3RMb2NhbFZpZGVvU3RyZWFtKGxvY2FsVmlkLCBwdWJBbmRTdWJzY3JpYmUsIGdldExvY2FsU3RyZWFtQ2IpO1xuXHRcdFx0fSBlbHNlIGlmIChwX2FjdGlvblR5cGUgPT09IGFjdGlvbnMuQUNUSU9OX1RZUEVfQVVESU8pIHtcblx0XHRcdFx0bG9jYWxzdHJlYW0uY29ubmVjdExvY2FsQXVkaW9TdHJlYW0obG9jYWxWaWQsIHB1YkFuZFN1YnNjcmliZSwgZ2V0TG9jYWxTdHJlYW1DYik7XG5cdFx0XHR9IGVsc2UgaWYgKHBfYWN0aW9uVHlwZSA9PT0gYWN0aW9ucy5BQ1RJT05fVFlQRV9BVURJT19WSURFTykge1xuXHRcdFx0XHRsb2NhbHN0cmVhbS5jb25uZWN0TG9jYWxBdWRpb1ZpZGVvU3RyZWFtKGxvY2FsVmlkLCBwdWJBbmRTdWJzY3JpYmUsIGdldExvY2FsU3RyZWFtQ2IpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBJbml0aWFsaXplcyB0aGUgUHVibGlzaGVkIE1lZGlhTGlzdCBsaXN0ZW5lci5cblx0ICogRGVmaW5lcyBjYWxsYmFjayAocmVtb3ZlIGFueSBleGlzdGluZyBvbmUpIGZvciA6IHB1Ymxpc2hlZCBNZWRpYS5cblx0ICogVGhpcyBjYWxsYmFjayBpcyBjYWxsZWQsIGZpcnN0IGZvciBhbnkgZXhpc3RpbmcgcHVibGlzaGVkIG1lZGlhLCB0aGVuIHdoZW4gYSBuZXcgdmFsdWUgaXMgYWRkZWQgaW4gdGhlIGRhdGFiYXNlLlxuXHQgKi9cblx0ZnVuY3Rpb24gX3NldE9uUHVibGlzaGVkU3RyZWFtKHBfY2IpIHtcblxuXHRcdGlmIChwdWJsaXNoZWRNZWRpYUxpc3RDYikge1xuXHRcdFx0ZGF0YXJlZi5jaGlsZCgncHVibGlzaGVkTWVkaWFMaXN0Jykub2ZmKCdjaGlsZF9hZGRlZCcsIHB1Ymxpc2hlZE1lZGlhTGlzdENiKTtcblx0XHRcdHB1Ymxpc2hlZE1lZGlhTGlzdENiID0gbnVsbDtcblx0XHR9XG5cdFx0aWYgKHBfY2IgJiYgdHlwZW9mIHBfY2IgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0cHVibGlzaGVkTWVkaWFMaXN0Q2IgPSBmdW5jdGlvbiAoc25hcHNob3QpIHtcblx0XHRcdFx0Y29uc3Rcblx0XHRcdFx0XHRvYmogPSB7fSxcblx0XHRcdFx0XHRuYW1lID0gc25hcHNob3QubmFtZSgpO1xuXHRcdFx0XHRvYmpbbmFtZV0gPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdFx0b2JqW25hbWVdLnJvb21JZCA9IHJvb21JZDtcblx0XHRcdFx0cF9jYihvYmopO1xuXHRcdFx0fTtcblx0XHRcdGRhdGFyZWYuY2hpbGQoJ3B1Ymxpc2hlZE1lZGlhTGlzdCcpLm9uKCdjaGlsZF9hZGRlZCcsIHB1Ymxpc2hlZE1lZGlhTGlzdENiKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc29sZS5lcnJvcihgKFJlYWNoU0RLOjpyb29tWyR7cm9vbUlkfV06Ol9zZXRPblB1Ymxpc2hlZFN0cmVhbSlwYXJhbWV0ZXIgaW5jb3JyZWN0LiBFeHBlY3RlZCBmdW5jdGlvbmApO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBVbnB1Ymxpc2hlcyB0aGUgc3RyZWFtXG5cdCAqIEBwYXJhbSBzdHJlYW1JZCAtIFRoZSBzdHJlYW0gaWRlbnRpZmllclxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayAtIFRoZSBjYWxsYmFjayB0byB0cmlnZ2VyXG5cdCAqL1xuXHRmdW5jdGlvbiBfdW5QdWJsaXNoU3RyZWFtKHN0cmVhbUlkLCBjYWxsYmFjaykge1xuXHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJvb21bJHtyb29tSWR9XTo6dW5QdWJsaXNoU3RyZWFtKXN0cmVhbUlkICR7c3RyZWFtSWR9YCk7XG5cdFx0Y29uc3Rcblx0XHRcdGxvY2FsRGF0YVJlZiA9IGRhdGFyZWYuY2hpbGQoYHB1Ymxpc2hlZE1lZGlhTGlzdC8ke3N0cmVhbUlkfWApLFxuXHRcdFx0cmVtb3RlRGF0YVJlZiA9IGxvY2FsRGF0YVJlZi5jaGlsZCgnc3Vic2NyaWJlcnNMaXN0JyksXG5cdFx0XHRzdHJlYW1TdGFja3NJZCA9IGAke3N0cmVhbUlkfV9wdWJgO1xuXG5cdFx0aWYgKG1TdHJlYW1zW3N0cmVhbUlkXSAmJiBtU3RyZWFtc1tzdHJlYW1JZF0uYWRkU3Vic2NyaWJlcnNMaXN0Q2IpIHtcblx0XHRcdHJlbW90ZURhdGFSZWYub2ZmKCdjaGlsZF9hZGRlZCcsIG1TdHJlYW1zW3N0cmVhbUlkXS5hZGRTdWJzY3JpYmVyc0xpc3RDYik7XG5cdFx0fVxuXHRcdGlmIChtU3RyZWFtc1tzdHJlYW1JZF0gJiYgbVN0cmVhbXNbc3RyZWFtSWRdLnJlbW92ZVN1YnNjcmliZXJzTGlzdENiKSB7XG5cdFx0XHRyZW1vdGVEYXRhUmVmLm9mZignY2hpbGRfcmVtb3ZlZCcsIG1TdHJlYW1zW3N0cmVhbUlkXS5yZW1vdmVTdWJzY3JpYmVyc0xpc3RDYik7XG5cdFx0fVxuXG5cdFx0ZGVsZXRlIG1TdHJlYW1zW3N0cmVhbUlkXTtcblx0XHRkZWxldGUgbU11dGVkU3RyZWFtc1tzdHJlYW1JZF07XG5cblx0XHRsb2NhbERhdGFSZWYub25EaXNjb25uZWN0KCkuY2FuY2VsKCk7XG5cdFx0bG9jYWxEYXRhUmVmLnJlbW92ZSgpO1xuXG5cblx0XHRpZiAocm9vbVdlYnJ0Y1N0YWNrc1tzdHJlYW1TdGFja3NJZF0gJiYgcm9vbVdlYnJ0Y1N0YWNrc1tzdHJlYW1TdGFja3NJZF0ubGVuZ3RoID4gMCkge1xuXHRcdFx0bGV0IG5iU3RhY2sgPSByb29tV2VicnRjU3RhY2tzW3N0cmVhbVN0YWNrc0lkXS5sZW5ndGg7XG5cdFx0XHRjb25zdCBjbG9zZUNiID0gKCkgPT4ge1xuXHRcdFx0XHRuYlN0YWNrLS07XG5cdFx0XHRcdGlmIChuYlN0YWNrIDwgMSkge1xuXHRcdFx0XHRcdGRlbGV0ZSByb29tV2VicnRjU3RhY2tzW3N0cmVhbVN0YWNrc0lkXTtcblx0XHRcdFx0XHRpZiAoY2FsbGJhY2sgJiYgdHlwZW9mIGNhbGxiYWNrID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0Zm9yIChsZXQgaSA9IG5iU3RhY2sgLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0XHR3ZWJydGNtbmdyLmNsb3NlV2VicnRjKHJvb21XZWJydGNTdGFja3Nbc3RyZWFtU3RhY2tzSWRdW2ldLnN0YWNrSWQsIHRydWUsIGNsb3NlQ2IpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRkZWxldGUgcm9vbVdlYnJ0Y1N0YWNrc1tzdHJlYW1TdGFja3NJZF07XG5cdFx0XHRpZiAoY2FsbGJhY2sgJiYgdHlwZW9mIGNhbGxiYWNrID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdH1cblx0XHR9XG5cblxuXHR9XG5cblx0LyoqXG5cdCAqIEluaXRpYWxpemVzIHRoZSB1blB1Ymxpc2hlZCBNZWRpYUxpc3QgbGlzdGVuZXIuXG5cdCAqIERlZmluZXMgY2FsbGJhY2sgKHJlbW92ZSBhbnkgZXhpbnRpbmcgb25lKSBmb3IgOiB1bnB1Ymxpc2hlZCBNZWRpYS5cblx0ICogVGhpcyBjYWxsYmFjayBpcyBjYWxsZWQgd2hlbiBhIG1lZGlhIGlzIHVucHVibGlzaC5cblx0ICovXG5cdGZ1bmN0aW9uIF9zZXRPblVuUHVibGlzaGVkU3RyZWFtKHBfY2IpIHtcblxuXHRcdGlmICh1blB1Ymxpc2hlZE1lZGlhTGlzdENiKSB7XG5cdFx0XHRkYXRhcmVmLmNoaWxkKCdwdWJsaXNoZWRNZWRpYUxpc3QnKS5vZmYoJ2NoaWxkX3JlbW92ZWQnLCB1blB1Ymxpc2hlZE1lZGlhTGlzdENiKTtcblx0XHRcdHVuUHVibGlzaGVkTWVkaWFMaXN0Q2IgPSBudWxsO1xuXHRcdH1cblx0XHRpZiAocF9jYiAmJiB0eXBlb2YgcF9jYiA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHR1blB1Ymxpc2hlZE1lZGlhTGlzdENiID0gKHNuYXBzaG90KSA9PiB7XG5cdFx0XHRcdHBfY2Ioc25hcHNob3QubmFtZSgpKTtcblx0XHRcdH07XG5cdFx0XHRkYXRhcmVmLmNoaWxkKCdwdWJsaXNoZWRNZWRpYUxpc3QnKS5vbignY2hpbGRfcmVtb3ZlZCcsIHVuUHVibGlzaGVkTWVkaWFMaXN0Q2IpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKGAoUmVhY2hTREs6OnJvb21bJHtyb29tSWR9XTo6X3NldE9uVW5QdWJsaXNoZWRTdHJlYW0pcGFyYW1ldGVyIGluY29ycmVjdC4gRXhwZWN0ZWQgZnVuY3Rpb25gKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogU3Vic2NyaWJlcyB0byBhIHN0cmVhbSBhbmQgYWRkcyBjYWxsYmFja3MgdG8gdGhlIGRlZGljYXRlZCBub2RlIGFjY29yZGluZyB0byB0aGUgYWN0aW9uIHR5cGUgb2YgdGhlIHN0cmVhbSBkYXRhLlxuXHQgKiBAcGFyYW0gc3RyZWFtRGF0YSAtIFRoZSBzdHJlYW0gZGF0YVxuXHQgKiBAcGFyYW0gcmVtb3RlVmlkIC0gVGhlIHJlbW90ZSB2aWRlb1xuXHQgKiBAcGFyYW0gZ2V0UmVtb3RlU3RyZWFtQ2IgLSBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHJldHJpZXZlIHRoZSBtZWRpYXN0cmVhbSBvYmplY3Rcblx0ICovXG5cdGZ1bmN0aW9uIF9zdWJzY3JpYmVUb1N0cmVhbShzdHJlYW1EYXRhLCByZW1vdGVWaWQsIGdldFJlbW90ZVN0cmVhbUNiKSB7XG5cdFx0Y29uc3Rcblx0XHRcdHN0cmVhbUlkID0gT2JqZWN0LmtleXMoc3RyZWFtRGF0YSlbMF0sXG5cdFx0XHRhY3Rpb25UeXBlID0gc3RyZWFtRGF0YVtzdHJlYW1JZF0uYWN0aW9uVHlwZTtcblx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyb29tWyR7cm9vbUlkfV06OnN1YnNjcmliZVRvU3RyZWFtKXN0cmVhbUlkICR7c3RyZWFtSWR9YCk7XG5cdFx0Ly90ZXN0IGlmIHN0cmVhbSBpcyBub3Qgb3VyXG5cdFx0aWYgKG1TdHJlYW1zICYmIG1TdHJlYW1zW3N0cmVhbUlkXSkge1xuXHRcdFx0Ly9pdCBpcyBvdXIgc3RyZWFtIC0+IHN1YnNjcmliZSB0byBsb2NhbFN0cmVhbVxuXHRcdFx0aWYgKGFjdGlvblR5cGUpIHtcblx0XHRcdFx0aWYgKGFjdGlvblR5cGUgPT09IGFjdGlvbnMuQUNUSU9OX1RZUEVfVklERU8pIHtcblx0XHRcdFx0XHRsb2NhbHN0cmVhbS5jb25uZWN0TG9jYWxWaWRlb1N0cmVhbShyZW1vdGVWaWQsIGdldFJlbW90ZVN0cmVhbUNiKTtcblx0XHRcdFx0fSBlbHNlIGlmIChhY3Rpb25UeXBlID09PSBhY3Rpb25zLkFDVElPTl9UWVBFX0FVRElPKSB7XG5cdFx0XHRcdFx0bG9jYWxzdHJlYW0uY29ubmVjdExvY2FsQXVkaW9TdHJlYW0ocmVtb3RlVmlkLCBnZXRSZW1vdGVTdHJlYW1DYik7XG5cdFx0XHRcdH0gZWxzZSBpZiAoYWN0aW9uVHlwZSA9PT0gYWN0aW9ucy5BQ1RJT05fVFlQRV9BVURJT19WSURFTykge1xuXHRcdFx0XHRcdGxvY2Fsc3RyZWFtLmNvbm5lY3RMb2NhbEF1ZGlvVmlkZW9TdHJlYW0ocmVtb3RlVmlkLCBnZXRSZW1vdGVTdHJlYW1DYik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBzdHJlYW1JZDtcblx0XHR9XG5cblxuXHRcdGNvbnN0XG5cdFx0XHRhcHBJbnN0YW5jZUlkID0gc3RyZWFtRGF0YVtzdHJlYW1JZF0uYXBwSW5zdGFuY2VJZCxcblx0XHRcdGxvY2FsRGF0YVJlZiA9IGRhdGFyZWYuY2hpbGQoJ3B1Ymxpc2hlZE1lZGlhTGlzdCcpLmNoaWxkKHN0cmVhbUlkKSxcblx0XHRcdHJlbW90ZURhdGFSZWYgPSBsb2NhbERhdGFSZWYuY2hpbGQoJ3N1YnNjcmliZXJzTGlzdCcpLFxuXHRcdFx0c3RyZWFtU3RhY2tzSWQgPSBgJHtzdHJlYW1JZH1fc3ViYDtcblxuXHRcdGxldCBfcGVlcmNvSWQsIF9wZWVyY29SZWY7XG5cblx0XHRpZiAoIXJvb21XZWJydGNTdGFja3Nbc3RyZWFtU3RhY2tzSWRdKSB7XG5cdFx0XHRyb29tV2VicnRjU3RhY2tzW3N0cmVhbVN0YWNrc0lkXSA9IFtdO1xuXHRcdH0gZWxzZSBpZiAocm9vbVdlYnJ0Y1N0YWNrc1tzdHJlYW1TdGFja3NJZF0gJiYgcm9vbVdlYnJ0Y1N0YWNrc1tzdHJlYW1TdGFja3NJZF1bMF0gJiYgcm9vbVdlYnJ0Y1N0YWNrc1tzdHJlYW1TdGFja3NJZF1bMF0ucGVlcmNvSWQpIHtcblx0XHRcdF9wZWVyY29JZCA9IHJvb21XZWJydGNTdGFja3Nbc3RyZWFtU3RhY2tzSWRdWzBdLnBlZXJjb0lkO1xuXHRcdH1cblxuXHRcdC8vIFJldHVybnMgYSByYW5kb20gaW50ZWdlciBiZXR3ZWVuIG1pbiAoaW5jbHVkZWQpIGFuZCBtYXggKGluY2x1ZGVkKVxuXHRcdC8vIFVzaW5nIE1hdGgucm91bmQoKSB3aWxsIGdpdmUgeW91IGEgbm9uLXVuaWZvcm0gZGlzdHJpYnV0aW9uIVxuXHRcdGNvbnN0IGdldFJhbmRvbUludEluY2x1c2l2ZSA9IChtaW4sIG1heCkgPT4ge1xuXHRcdFx0cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XG5cdFx0fTtcblxuXHRcdGlmICghX3BlZXJjb0lkKSB7XG5cdFx0XHRfcGVlcmNvSWQgPSBNYXRoLmZsb29yKERhdGUubm93KCkpLnRvU3RyaW5nKCkgKyBnZXRSYW5kb21JbnRJbmNsdXNpdmUoMCwgMTAwMDAwMCk7XG5cdFx0fVxuXG5cdFx0X3BlZXJjb1JlZiA9IGRhdGFyZWZzLmdldFdlYnJ0YygpLnB1c2goKS5uYW1lKCk7XG5cblx0XHRyZW1vdGVEYXRhUmVmLmNoaWxkKHV0aWxzLmFwcEluc3RhbmNlSWQpLnNldCh7XG5cdFx0XHR0czogV2ViY29tLlNlcnZlclZhbHVlLlRJTUVTVEFNUCxcblx0XHRcdHVzZXJJZDogbWUsXG5cdFx0XHRwZWVyY29JZDogX3BlZXJjb0lkLFxuXHRcdFx0cGVlcmNvUmVmOiBfcGVlcmNvUmVmXG5cdFx0fSk7XG5cblx0XHRjb25zdFxuXHRcdFx0aXNBdWRpb011dGUgPSBtTXV0ZWRTdHJlYW1zW3N0cmVhbUlkXSAmJiBtTXV0ZWRTdHJlYW1zW3N0cmVhbUlkXS5hdWRpbyxcblx0XHRcdGlzVmlkZW9NdXRlID0gbU11dGVkU3RyZWFtc1tzdHJlYW1JZF0gJiYgbU11dGVkU3RyZWFtc1tzdHJlYW1JZF0udmlkZW87XG5cblx0XHRjb25zdCBtU3RhY2tJZCA9IHdlYnJ0Y21uZ3IuY3JlYXRlV2VicnRjKHJlbW90ZVZpZCwgYXBwSW5zdGFuY2VJZCwgKCkgPT4ge1xuXHRcdFx0Ly9cdG9uVW5QdWJsaXNoZWRTdHJlYW0obG9jYWxWaWQsIHJlbW90ZVZpZCk7XG5cdFx0fSwgZmFsc2UsIGFjdGlvblR5cGUsIF9wZWVyY29JZCwgX3BlZXJjb1JlZiwgaXNBdWRpb011dGUsIGlzVmlkZW9NdXRlLCBnZXRSZW1vdGVTdHJlYW1DYik7XG5cblx0XHQvL2hhbmRsZSByZW1vdGUgdW5wdWJsaXNoXG5cdFx0aWYgKCFyZW1vdGVVbnB1Ymxpc2hlZENiKSB7XG5cdFx0XHRyZW1vdGVVbnB1Ymxpc2hlZENiID0gZnVuY3Rpb24gKHNuYXBzaG90KSB7XG5cdFx0XHRcdGNvbnN0IHJlbW92ZWRTdHJlYW1JZCA9IGAke09iamVjdC5rZXlzKHNuYXBzaG90KVswXX1fc3ViYDtcblx0XHRcdFx0aWYgKHJvb21XZWJydGNTdGFja3NbcmVtb3ZlZFN0cmVhbUlkXSkge1xuXHRcdFx0XHRcdGxldCBpID0gMDtcblx0XHRcdFx0XHR3aGlsZSAoaSA8IHJvb21XZWJydGNTdGFja3NbcmVtb3ZlZFN0cmVhbUlkXS5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdHdlYnJ0Y21uZ3IuY2xvc2VXZWJydGMocm9vbVdlYnJ0Y1N0YWNrc1tyZW1vdmVkU3RyZWFtSWRdW2ldLnN0YWNrSWQsIGZhbHNlKTtcblx0XHRcdFx0XHRcdGkrKztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZGVsZXRlIHJvb21XZWJydGNTdGFja3NbcmVtb3ZlZFN0cmVhbUlkXTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdGRhdGFyZWYuY2hpbGQoJ3B1Ymxpc2hlZE1lZGlhTGlzdCcpLm9uKCdjaGlsZF9yZW1vdmVkJywgcmVtb3RlVW5wdWJsaXNoZWRDYik7XG5cdFx0fVxuXG5cdFx0cm9vbVdlYnJ0Y1N0YWNrc1tzdHJlYW1TdGFja3NJZF0ucHVzaCh7XG5cdFx0XHRzdGFja0lkOiBtU3RhY2tJZCxcblx0XHRcdGlzUHVibGlzaDogZmFsc2UsXG5cdFx0XHRwZWVyY29JZDogX3BlZXJjb0lkLFxuXHRcdFx0cGVlcmNvUmVmOiBfcGVlcmNvUmVmXG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gc3RyZWFtSWQ7XG5cdH1cblxuXHQvKipcblx0ICogVW5TdWJzY3JpYmUgZnJvbSBhIHN0cmVhbVxuXHQgKiBAcGFyYW0gc3RyZWFtSWQgLSBUaGUgc3RyZWFtIGlkZW50aWZpZXIgZnJvbSB3aGljaCB0aGUgdW5TdWJzY3JpcHRpb24gaGF2ZSB0byBiZSBkb25lXG5cdCAqL1xuXHRmdW5jdGlvbiBfdW5TdWJzY3JpYmVGcm9tU3RyZWFtKHN0cmVhbUlkKSB7XG5cdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cm9vbVske3Jvb21JZH1dOjp1blN1YnNjcmliZUZyb21TdHJlYW0pc3RyZWFtSWQgJHtzdHJlYW1JZH1gKTtcblx0XHRjb25zdFxuXHRcdFx0bG9jYWxEYXRhUmVmID0gZGF0YXJlZi5jaGlsZCgncHVibGlzaGVkTWVkaWFMaXN0JykuY2hpbGQoc3RyZWFtSWQpLFxuXHRcdFx0cmVtb3RlRGF0YVJlZiA9IGxvY2FsRGF0YVJlZi5jaGlsZCgnc3Vic2NyaWJlcnNMaXN0JyksXG5cdFx0XHRzdHJlYW1TdGFja3NJZCA9IGAke3N0cmVhbUlkfV9zdWJgO1xuXG5cdFx0cmVtb3RlRGF0YVJlZi5jaGlsZCh1dGlscy5hcHBJbnN0YW5jZUlkKS5yZW1vdmUoKTtcblxuXHRcdGlmIChyb29tV2VicnRjU3RhY2tzW3N0cmVhbVN0YWNrc0lkXSkge1xuXHRcdFx0bGV0IGkgPSAwO1xuXHRcdFx0d2hpbGUgKGkgPCByb29tV2VicnRjU3RhY2tzW3N0cmVhbVN0YWNrc0lkXS5sZW5ndGgpIHtcblx0XHRcdFx0aWYgKHJvb21XZWJydGNTdGFja3Nbc3RyZWFtU3RhY2tzSWRdW2ldKSB7XG5cdFx0XHRcdFx0d2VicnRjbW5nci5jbG9zZVdlYnJ0Yyhyb29tV2VicnRjU3RhY2tzW3N0cmVhbVN0YWNrc0lkXVtpXS5zdGFja0lkLCBmYWxzZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aSsrO1xuXHRcdFx0fVxuXHRcdFx0ZGVsZXRlIHJvb21XZWJydGNTdGFja3Nbc3RyZWFtU3RhY2tzSWRdO1xuXHRcdH1cblx0XHRkZWxldGUgbU11dGVkU3RyZWFtc1tzdHJlYW1JZF07XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyBhbGwgdGhlIGF2YWlsYWJsZSBzdHJlYW1zXG5cdCAqIEByZXR1cm4ge2FycmF5fVxuXHQgKi9cblx0ZnVuY3Rpb24gX2dldEF2YWlsYWJsZVN0cmVhbXMoKSB7XG5cdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cm9vbVske3Jvb21JZH1dOjpfZ2V0QXZhaWxhYmxlU3RyZWFtcylgKTtcblx0XHRyZXR1cm4gbUF2YWlsYWJsZVN0cmVhbXM7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyBhbiBhdmFpbGFibGUgc3RyZWFtIGhhdmluZyB0aGUgaWRlbnRpZmllclxuXHQgKiBAcGFyYW0gc3RyZWFtSWQgLSBUaGUgc3RyZWFtIGlkZW50aWZpZXJcblx0ICogQHJldHVybiAtIEEgc3RyZWFtXG5cdCAqL1xuXHRmdW5jdGlvbiBfZ2V0QXZhaWxhYmxlU3RyZWFtKHN0cmVhbUlkKSB7XG5cdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cm9vbVske3Jvb21JZH1dOjpfZ2V0QXZhaWxhYmxlU3RyZWFtKXN0cmVhbUlkPSR7c3RyZWFtSWR9YCk7XG5cdFx0aWYgKG1BdmFpbGFibGVTdHJlYW1zICYmIHN0cmVhbUlkKSB7XG5cdFx0XHRmb3IgKGxldCBpID0gbUF2YWlsYWJsZVN0cmVhbXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0aWYgKG1BdmFpbGFibGVTdHJlYW1zW2ldICYmIE9iamVjdC5rZXlzKG1BdmFpbGFibGVTdHJlYW1zW2ldKVswXSAmJiBPYmplY3Qua2V5cyhtQXZhaWxhYmxlU3RyZWFtc1tpXSlbMF0gPT09IHN0cmVhbUlkKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG1BdmFpbGFibGVTdHJlYW1zW2ldO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblxuXHQvKipcblx0ICogUmVtb3ZlcyBhbGwgdGhlIHN0cmVhbXMgYnkgZGVsZXRpbmcgdGhlIGFycmF5IGNvbnRhaW5pbmcgdGhlbSB3aXRob3V0IHRyaWdnZXJyaW5nIGNhbGxiYWNrc1xuXHQgKi9cblx0ZnVuY3Rpb24gX3JlbW92ZUFsbEF2YWlsYWJsZVN0cmVhbXMoKSB7XG5cdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cm9vbVske3Jvb21JZH1dOjpfcmVtb3ZlQWxsQXZhaWxhYmxlU3RyZWFtc2ApO1xuXHRcdG1BdmFpbGFibGVTdHJlYW1zID0gW107XG5cdH1cblxuXHQvKipcblx0ICogQXVkaW8gbXV0ZSB0aGUgc3RyZWFtIHN0cmVhbUlkXG5cdCAqIEBwYXJhbSBzdHJlYW1JZCAtIFRoZSBzdHJlYW0gaWRlbnRpZmllciB0byBtdXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBfbXV0ZUF1ZGlvU3RyZWFtKHN0cmVhbUlkKSB7XG5cdFx0aWYgKCEoc3RyZWFtSWQgJiYgdHlwZW9mIHN0cmVhbUlkID09ICdzdHJpbmcnKSkge1xuXHRcdFx0Y29uc29sZS5lcnJvcihgKFJlYWNoU0RLOjpyb29tWyR7cm9vbUlkfV06Ol9tdXRlQXVkaW9TdHJlYW0pcGFyYW1ldGVyIHN0cmVhbUlkIGlzIGluY29ycmVjdC4gRXhwZWN0aW5nIG5vbiBlbXB0eSBzdHJpbmdgKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cm9vbVske3Jvb21JZH1dOjpfbXV0ZUF1ZGlvU3RyZWFtKXN0cmVhbUlkPSR7c3RyZWFtSWR9YCk7XG5cdFx0aWYgKCFtTXV0ZWRTdHJlYW1zW3N0cmVhbUlkXSkge1xuXHRcdFx0bU11dGVkU3RyZWFtc1tzdHJlYW1JZF0gPSB7fTtcblx0XHR9XG5cdFx0bU11dGVkU3RyZWFtc1tzdHJlYW1JZF0uYXVkaW8gPSB0cnVlO1xuXG5cdFx0aWYocm9vbVdlYnJ0Y1N0YWNrcyl7XG5cdFx0XHRbcm9vbVdlYnJ0Y1N0YWNrc1tgJHtzdHJlYW1JZH1fcHViYF0sIHJvb21XZWJydGNTdGFja3NbYCR7c3RyZWFtSWR9X3N1YmBdXS5mb3JFYWNoKChzdGFja3MpID0+IHtcblx0XHRcdFx0aWYoc3RhY2tzICYmIHN0YWNrcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0Zm9yIChsZXQgaSA9IHN0YWNrcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0XHRcdFx0d2VicnRjbW5nci5tdXRlQXVkaW9XZWJydGNTdGFjayhzdGFja3NbaV0uc3RhY2tJZCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQXVkaW8gdW5tdXRlU3RyZWFtIHRoZSBzdHJlYW0gc3RyZWFtSWRcblx0ICogQHBhcmFtIHN0cmVhbUlkIC0gVGhlIHN0cmVhbSBpZGVudGlmaWVyIHRvIHVubXV0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gX3VubXV0ZUF1ZGlvU3RyZWFtKHN0cmVhbUlkKSB7XG5cdFx0aWYgKCEoc3RyZWFtSWQgJiYgdHlwZW9mIHN0cmVhbUlkID09ICdzdHJpbmcnKSkge1xuXHRcdFx0Y29uc29sZS5lcnJvcihgKFJlYWNoU0RLOjpyb29tWyR7cm9vbUlkfV06Ol91bm11dGVBdWRpb1N0cmVhbSlwYXJhbWV0ZXIgc3RyZWFtSWQgaXMgaW5jb3JyZWN0LiBFeHBlY3Rpbmcgbm9uIGVtcHR5IHN0cmluZ2ApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZiAobU11dGVkU3RyZWFtc1tzdHJlYW1JZF0gJiYgbU11dGVkU3RyZWFtc1tzdHJlYW1JZF0uYXVkaW8pIHtcblx0XHRcdG1NdXRlZFN0cmVhbXNbc3RyZWFtSWRdLmF1ZGlvID0gZmFsc2U7XG5cdFx0fVxuXHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJvb21bJHtyb29tSWR9XTo6X3VubXV0ZUF1ZGlvU3RyZWFtKXN0cmVhbUlkPSR7c3RyZWFtSWR9YCk7XG5cdFx0aWYocm9vbVdlYnJ0Y1N0YWNrcyl7XG5cdFx0XHRbcm9vbVdlYnJ0Y1N0YWNrc1tgJHtzdHJlYW1JZH1fcHViYF0sIHJvb21XZWJydGNTdGFja3NbYCR7c3RyZWFtSWR9X3N1YmBdXS5mb3JFYWNoKChzdGFja3MpID0+IHtcblx0XHRcdFx0aWYoc3RhY2tzICYmIHN0YWNrcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0Zm9yIChsZXQgaSA9IHN0YWNrcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0XHRcdFx0d2VicnRjbW5nci51bm11dGVBdWRpb1dlYnJ0Y1N0YWNrKHN0YWNrc1tpXS5zdGFja0lkKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBWaWRlbyBtdXRlIHRoZSBzdHJlYW0gc3RyZWFtSWRcblx0ICogQHBhcmFtIHN0cmVhbUlkIC0gVGhlIHN0cmVhbSBpZGVudGlmaWVyIHRvIG11dGVcblx0ICovXG5cdGZ1bmN0aW9uIF9tdXRlVmlkZW9TdHJlYW0oc3RyZWFtSWQpIHtcblx0XHRpZiAoIShzdHJlYW1JZCAmJiB0eXBlb2Ygc3RyZWFtSWQgPT0gJ3N0cmluZycpKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKGAoUmVhY2hTREs6OnJvb21bJHtyb29tSWR9XTo6X211dGVWaWRlb1N0cmVhbSlwYXJhbWV0ZXIgc3RyZWFtSWQgaXMgaW5jb3JyZWN0LiBFeHBlY3Rpbmcgbm9uIGVtcHR5IHN0cmluZ2ApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyb29tWyR7cm9vbUlkfV06Ol9tdXRlVmlkZW9TdHJlYW0pc3RyZWFtSWQ9JHtzdHJlYW1JZH1gKTtcblx0XHRpZiAoIW1NdXRlZFN0cmVhbXNbc3RyZWFtSWRdKSB7XG5cdFx0XHRtTXV0ZWRTdHJlYW1zW3N0cmVhbUlkXSA9IHt9O1xuXHRcdH1cblx0XHRtTXV0ZWRTdHJlYW1zW3N0cmVhbUlkXS52aWRlbyA9IHRydWU7XG5cblx0XHRpZihyb29tV2VicnRjU3RhY2tzKXtcblx0XHRcdFtyb29tV2VicnRjU3RhY2tzW2Ake3N0cmVhbUlkfV9wdWJgXSwgcm9vbVdlYnJ0Y1N0YWNrc1tgJHtzdHJlYW1JZH1fc3ViYF1dLmZvckVhY2goKHN0YWNrcykgPT4ge1xuXHRcdFx0XHRpZihzdGFja3MgJiYgc3RhY2tzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRmb3IgKGxldCBpID0gc3RhY2tzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRcdFx0XHR3ZWJydGNtbmdyLm11dGVWaWRlb1dlYnJ0Y1N0YWNrKHN0YWNrc1tpXS5zdGFja0lkKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBWaWRlbyB1bm11dGVTdHJlYW0gdGhlIHN0cmVhbSBzdHJlYW1JZFxuXHQgKiBAcGFyYW0gc3RyZWFtSWQgLSBUaGUgc3RyZWFtIGlkZW50aWZpZXIgdG8gdW5tdXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBfdW5tdXRlVmlkZW9TdHJlYW0oc3RyZWFtSWQpIHtcblx0XHRpZiAoIShzdHJlYW1JZCAmJiB0eXBlb2Ygc3RyZWFtSWQgPT0gJ3N0cmluZycpKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKGAoUmVhY2hTREs6OnJvb21bJHtyb29tSWR9XTo6X3VubXV0ZVZpZGVvU3RyZWFtKXBhcmFtZXRlciBzdHJlYW1JZCBpcyBpbmNvcnJlY3QuIEV4cGVjdGluZyBub24gZW1wdHkgc3RyaW5nYCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmIChtTXV0ZWRTdHJlYW1zW3N0cmVhbUlkXSAmJiBtTXV0ZWRTdHJlYW1zW3N0cmVhbUlkXS52aWRlbykge1xuXHRcdFx0bU11dGVkU3RyZWFtc1tzdHJlYW1JZF0udmlkZW8gPSBmYWxzZTtcblx0XHR9XG5cdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cm9vbVske3Jvb21JZH1dOjpfdW5tdXRlVmlkZW9TdHJlYW0pc3RyZWFtSWQ9JHtzdHJlYW1JZH1gKTtcblx0XHRpZihyb29tV2VicnRjU3RhY2tzKXtcblx0XHRcdFtyb29tV2VicnRjU3RhY2tzW2Ake3N0cmVhbUlkfV9wdWJgXSwgcm9vbVdlYnJ0Y1N0YWNrc1tgJHtzdHJlYW1JZH1fc3ViYF1dLmZvckVhY2goKHN0YWNrcykgPT4ge1xuXHRcdFx0XHRpZihzdGFja3MgJiYgc3RhY2tzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRmb3IgKGxldCBpID0gc3RhY2tzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRcdFx0XHR3ZWJydGNtbmdyLnVubXV0ZVZpZGVvV2VicnRjU3RhY2soc3RhY2tzW2ldLnN0YWNrSWQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblxuXHQvKipcblx0ICogQ2xvc2VzIHRoZSByb29tLlxuXHQgKiBTZXRzIHRoZSBjb25uZWN0ZWQgc3RhdHVzIG9mIHRoZSBjdXJyZW50IHBhcnRpY2lwYW50IHRvIGZhbHNlLCBkZWxldGVzIG1lZGlhcyBhbmQgY2FsbGJhY2tzLCB0aGVuIGNsb3NlIFdlYlJUQyBzdGFja3MgaW4gdXNlLlxuXHQgKiBAcGFyYW0gdXBkYXRlUm9vbVN0YXR1c1RvQ2xvc2UgLSB0cnVlIGlmIHRoZSByb29tIHNob3VsZCBiZSBtYXJrZWQgYXMgY2xvc2VkXG5cdCAqL1xuXHRmdW5jdGlvbiBfY2xvc2UodXBkYXRlUm9vbVN0YXR1c1RvQ2xvc2UpIHtcblx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyb29tWyR7cm9vbUlkfV06Ol9jbG9zZSlyb29tICR7cm9vbUlkfSwgZGV0cm95Um9vbT0ke3VwZGF0ZVJvb21TdGF0dXNUb0Nsb3NlfWApO1xuXG5cdFx0Y29uc3Rcblx0XHRcdHBhcnRpY2lwYW50TGlzdFJlZiA9IGRhdGFyZWYuY2hpbGQoJ3BhcnRpY2lwYW50TGlzdCcpLFxuXHRcdFx0cHVibGlzaGVkTWVkaWFMaXN0UmVmID0gZGF0YXJlZi5jaGlsZCgncHVibGlzaGVkTWVkaWFMaXN0Jyk7XG5cblx0XHQvLyBtYXJrIGFzIGRpc2Nvbm5lY3RlZCB3aGVuIHRoZSByb29tIGlzIGxlZnRcblx0XHRwYXJ0aWNpcGFudExpc3RSZWYuY2hpbGQoYCR7bWV9L2Nvbm5lY3RlZGApLnNldChmYWxzZSk7XG5cblx0XHQvLyByZW1vdmUgd2ViY29tIGNhbGxiYWNrc1xuXHRcdE9iamVjdC5rZXlzKG1TdHJlYW1zKS5mb3JFYWNoKF91blB1Ymxpc2hTdHJlYW0pO1xuXHRcdG1TdHJlYW1zID0gW107XG5cblx0XHRpZiAoaW5zdGFudE1lc3NhZ2VMaXN0Q2IpIHtcblx0XHRcdGRhdGFyZWYuY2hpbGQoJ2luc3RhbnRNZXNzYWdlTGlzdCcpLm9mZignY2hpbGRfYWRkZWQnLCBpbnN0YW50TWVzc2FnZUxpc3RDYik7XG5cdFx0XHRpbnN0YW50TWVzc2FnZUxpc3RDYiA9IG51bGw7XG5cdFx0fVxuXHRcdGlmIChwdWJsaXNoZWRNZWRpYUxpc3RDYikge1xuXHRcdFx0cHVibGlzaGVkTWVkaWFMaXN0UmVmLm9mZignY2hpbGRfYWRkZWQnLCBwdWJsaXNoZWRNZWRpYUxpc3RDYik7XG5cdFx0XHRwdWJsaXNoZWRNZWRpYUxpc3RDYiA9IG51bGw7XG5cdFx0fVxuXHRcdGlmIChwdWJsaXNoZWRNZWRpYUxpc3RDYkZvckF2YWlsYWJsZVN0cmVhbSkge1xuXHRcdFx0cHVibGlzaGVkTWVkaWFMaXN0UmVmLm9mZignY2hpbGRfYWRkZWQnLCBwdWJsaXNoZWRNZWRpYUxpc3RDYkZvckF2YWlsYWJsZVN0cmVhbSk7XG5cdFx0XHRwdWJsaXNoZWRNZWRpYUxpc3RDYkZvckF2YWlsYWJsZVN0cmVhbSA9IG51bGw7XG5cdFx0fVxuXG5cdFx0aWYgKHVuUHVibGlzaGVkTWVkaWFMaXN0Q2IpIHtcblx0XHRcdHB1Ymxpc2hlZE1lZGlhTGlzdFJlZi5vZmYoJ2NoaWxkX3JlbW92ZWQnLCB1blB1Ymxpc2hlZE1lZGlhTGlzdENiKTtcblx0XHRcdHVuUHVibGlzaGVkTWVkaWFMaXN0Q2IgPSBudWxsO1xuXHRcdH1cblxuXHRcdGlmICh1blB1Ymxpc2hlZE1lZGlhTGlzdENiRm9yQXZhaWxhYmxlU3RyZWFtKSB7XG5cdFx0XHRwdWJsaXNoZWRNZWRpYUxpc3RSZWYub2ZmKCdjaGlsZF9yZW1vdmVkJywgdW5QdWJsaXNoZWRNZWRpYUxpc3RDYkZvckF2YWlsYWJsZVN0cmVhbSk7XG5cdFx0XHR1blB1Ymxpc2hlZE1lZGlhTGlzdENiRm9yQXZhaWxhYmxlU3RyZWFtID0gbnVsbDtcblx0XHR9XG5cblx0XHRpZiAocGFydGljaXBhbnRMaXN0Sm9pbkFkZGVkQ2IpIHtcblx0XHRcdHBhcnRpY2lwYW50TGlzdFJlZi5vZmYoJ2NoaWxkX2FkZGVkJywgcGFydGljaXBhbnRMaXN0Sm9pbkFkZGVkQ2IpO1xuXHRcdFx0cGFydGljaXBhbnRMaXN0Sm9pbkFkZGVkQ2IgPSBudWxsO1xuXHRcdH1cblxuXHRcdGlmIChwYXJ0aWNpcGFudExpc3RKb2luQ2hhbmdlZENiKSB7XG5cdFx0XHRwYXJ0aWNpcGFudExpc3RSZWYub2ZmKCdjaGlsZF9jaGFuZ2VkJywgcGFydGljaXBhbnRMaXN0Sm9pbkNoYW5nZWRDYik7XG5cdFx0XHRwYXJ0aWNpcGFudExpc3RKb2luQ2hhbmdlZENiID0gbnVsbDtcblx0XHR9XG5cblx0XHRpZiAocGFydGljaXBhbnRMaXN0TGVhdmVDYikge1xuXHRcdFx0cGFydGljaXBhbnRMaXN0UmVmLm9mZignY2hpbGRfY2hhbmdlZCcsIHBhcnRpY2lwYW50TGlzdExlYXZlQ2IpO1xuXHRcdFx0cGFydGljaXBhbnRMaXN0TGVhdmVDYiA9IG51bGw7XG5cdFx0fVxuXG5cdFx0aWYgKHJlbW90ZVVucHVibGlzaGVkQ2IpIHtcblx0XHRcdHB1Ymxpc2hlZE1lZGlhTGlzdFJlZi5vZmYoJ2NoaWxkX3JlbW92ZWQnLCByZW1vdGVVbnB1Ymxpc2hlZENiKTtcblx0XHRcdHJlbW90ZVVucHVibGlzaGVkQ2IgPSBudWxsO1xuXHRcdH1cblxuXHRcdC8vIGNsb3NlIGFsbCB3ZWJydGMgc3RhY2tzXG5cdFx0T2JqZWN0LmtleXMocm9vbVdlYnJ0Y1N0YWNrcykuZm9yRWFjaCgoc3RyZWFtU3RhY2tzSWQpID0+IHtcblx0XHRcdHJvb21XZWJydGNTdGFja3Nbc3RyZWFtU3RhY2tzSWRdLmZvckVhY2goKHN0YWNrKSA9PiB7XG5cdFx0XHRcdGlmKHN0YWNrKXtcblx0XHRcdFx0XHR3ZWJydGNtbmdyLmNsb3NlV2VicnRjKHN0YWNrLnN0YWNrSWQsIHN0YWNrLmlzUHVibGlzaCk7XG5cdFx0XHRcdFx0d2VicnRjbW5nci5jbGVhcldlYnJ0Y1N0YWNrcyhzdGFjay5zdGFja0lkKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdFx0cm9vbVdlYnJ0Y1N0YWNrcyA9IHt9O1xuXG5cblx0XHRtTXV0ZWRTdHJlYW1zID0gW107XG5cblx0XHRfcmVtb3ZlQWxsQXZhaWxhYmxlU3RyZWFtcygpO1xuXHRcdGlmICh1cGRhdGVSb29tU3RhdHVzVG9DbG9zZSAmJiB1cGRhdGVSb29tU3RhdHVzVG9DbG9zZSA9PT0gdHJ1ZSkge1xuXHRcdFx0ZGF0YXJlZi5jaGlsZCgnY29tbW9uRGF0YUxpc3Qvc3RhdHVzJykuc2V0KFJPT01fU1RBVFVTX0NMT1NFKTtcblx0XHR9XG5cblx0fVxuXG5cdGluaXQoKTtcblxuXHRyZXR1cm4ge1xuXHRcdC8qKlxuXHRcdCAqIFJldHVybiB0aGUgcm9vbSBpZGVudGlmaWVyXG5cdFx0ICogQHJldHVybiB7c3RyaW5nfSAtIFRoZSByb29tIGlkZW50aWZpZXJcblx0XHQgKi9cblx0XHRnZXRSb29tSWQ6IF9nZXRSb29tSWQsXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyB0aGUgdXNlciBpZGVudGlmaWVyXG5cdFx0ICogQHJldHVybiB7c3RyaW5nfSAtIFRoZSB1c2VyIGlkZW50aWZpZXJcblx0XHQgKi9cblx0XHRnZXRNZTogX2dldE1lLFxuXHRcdC8qKlxuXHRcdCAqIERlZmluZXMgdGhlIGNhbGxiYWNrIHRvIHRyaWdnZXIgd2hlbiBhIHBhcnRpY2lwYW50IGhhcyBqb2luZWQgdGhlIHJvb21cblx0XHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwX2NiIC0gVGhlIGNhbGxiYWNrXG5cdFx0ICovXG5cdFx0c2V0T25QYXJ0aWNpcGFudEpvaW46IF9zZXRPblBhcnRpY2lwYW50Sm9pbixcblx0XHQvKipcblx0XHQgKiBEZWZpbmVzIHRoZSBjYWxsYmFjayB0byB0cmlnZ2VyIHdoZW4gYSBwYXJ0aWNpcGFudCBoYXMgbGVmdCB0aGUgcm9vbVxuXHRcdCAqIEBwYXJhbSB7ZnVuY3Rpb259IHBfY2IgLSBUaGUgY2FsbGJhY2tcblx0XHQgKi9cblx0XHRzZXRPblBhcnRpY2lwYW50TGVhdmU6IF9zZXRPblBhcnRpY2lwYW50TGVhdmUsXG5cdFx0LyoqXG5cdFx0ICogU2VuZHMgYW4gaW5zdGFudCBtZXNzYWdlXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgLSBUaGUgZW1zc2FnZSB0byBzZW5kXG5cdFx0ICogQHJldHVybiBub3RoaW5nXG5cdFx0ICovXG5cdFx0c2VuZEluc3RhbnRNZXNzYWdlOiBfc2VuZEluc3RhbnRNZXNzYWdlLFxuXHRcdC8qKlxuXHRcdCAqIERlZmluZXMgdGhlIGNhbGxiYWNrIHRvIHRyaWdnZXIgdG8gc2VuZCBhbiBpbnN0YW50IG1lc3NhZ2Vcblx0XHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwX2NiIC0gVGhlIGNhbGxiYWNrXG5cdFx0ICovXG5cdFx0c2V0T25JbnN0YW50TWVzc2FnZTogX3NldE9uSW5zdGFudE1lc3NhZ2UsXG5cdFx0LyoqXG5cdFx0ICogUHVibGlzaGVzIGEgc3RyZWFtXG5cdFx0ICogQHBhcmFtIHN0cmVhbUlkIC0gVGhlIGlkZW50aWZpZXIgb2YgdGhlIHN0cmVhbSB0byBwdWJsaXNoXG5cdFx0ICogQHBhcmFtIGxvY2FsVmlkIC0gVGhlIGxvY2FsIHZpZGVvXG5cdFx0ICogQHBhcmFtIGFjdGlvblR5cGUgLVxuXHRcdCAqIEBwYXJhbSBnZXRTdHJlYW1DYiAtIGEgY2FsbGJhY2sgZnVuY3Rpb24gdG8gcmV0cmlldmUgdGhlIG1lZGlhc3RyZWFtIG9iamVjdFxuXHRcdCAqIEByZXR1cm4gbm90aGluZ1xuXHRcdCAqL1xuXHRcdHB1Ymxpc2hTdHJlYW06IF9wdWJsaXNoU3RyZWFtLFxuXHRcdC8qKlxuXHRcdCAqIERlZmluZXMgdGhlIGNhbGxiYWNrIHRvIHRyaWdnZXJ3aGVuIGEgc3RyZWFtIGhhcyBiZWVuIHB1Ymxpc2hlZFxuXHRcdCAqIEBwYXJhbSB7ZnVuY3Rpb259IHBfY2IgLSBUaGUgY2FsbGJhY2tcblx0XHQgKi9cblx0XHRzZXRPblB1Ymxpc2hlZFN0cmVhbTogX3NldE9uUHVibGlzaGVkU3RyZWFtLFxuXHRcdC8qKlxuXHRcdCAqIFVucHVibGlzaGVzIHRoZSBzdHJlYW1cblx0XHQgKiBAcGFyYW0gc3RyZWFtSWQgLSBUaGUgaWRlbnRpZmllciBvZiB0aGUgc3RyZWFtIHRvIHVucHVibGlzaFxuXHRcdCAqIEBwYXJhbSBjYWxsYmFjayAtIFRoZSBjbGFsYmFjayB0byB0cmlnZ2VyIHdoZW4gdGhlIHN0cmVhbSBoYXMgYmVlbiB1bnB1Ymxpc2hlZFxuXHRcdCAqL1xuXHRcdHVuUHVibGlzaFN0cmVhbTogX3VuUHVibGlzaFN0cmVhbSxcblx0XHQvKipcblx0XHQgKiBEZWZpbmVzIHRoZSBjYWxsYmFjayB0byB0cmlnZ2VyIHdoZW4gYSBzdHJlYW0gaGFzIGJlZW4gdW5wdWJsaXNoZWRcblx0XHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwX2NiIC0gVGhlIGNhbGxiYWNrXG5cdFx0ICovXG5cdFx0c2V0T25VblB1Ymxpc2hlZFN0cmVhbTogX3NldE9uVW5QdWJsaXNoZWRTdHJlYW0sXG5cblx0XHQvKipcblx0XHQgKiBTdWJzY3JpYmVzIHRvIGEgc3RyZWFtXG5cdFx0ICogQHBhcmFtIHN0cmVhbURhdGEgLSBUaGUgc3RyZWFtIGRhdGFcblx0XHQgKiBAcGFyYW0gcmVtb3RlVmlkIC0gVGhlIHJlbW90ZSB2aWRlb1xuXHRcdCAqIEBwYXJhbSBnZXRTdHJlYW1DYiAtIGEgY2FsbGJhY2sgZnVuY3Rpb24gdG8gcmV0cmlldmUgdGhlIG1lZGlhc3RyZWFtIG9iamVjdFxuXHRcdCAqIEByZXR1cm4gbm90aGluZ1xuXHRcdCAqL1xuXHRcdHN1YnNjcmliZVRvU3RyZWFtOiBfc3Vic2NyaWJlVG9TdHJlYW0sXG5cdFx0LyoqXG5cdFx0ICogVW5zdWJjcmliZXMgZnJvbSBhIHN0cmVhbVxuXHRcdCAqIEBwYXJhbSBzdHJlYW1JZCAtIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBzdHJlYW0gdG8gdW5zdWJzY3JpYmVcblx0XHQgKi9cblx0XHR1blN1YnNjcmliZUZyb21TdHJlYW06IF91blN1YnNjcmliZUZyb21TdHJlYW0sXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyBhbGwgdGhlIGF2YWlsYWJsZSBzdHJlYW1zXG5cdFx0ICogQHJldHVybiB7YXJyYXl9IC0gVGhlIGF2YWlsYWJsZSBzdHJlYW1zXG5cdFx0ICovXG5cdFx0Z2V0QXZhaWxhYmxlU3RyZWFtczogX2dldEF2YWlsYWJsZVN0cmVhbXMsXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyB0aGUgc3RyZWFtIG1hdGNoaW5nIHRoZSBpZGVudGlmaWVyXG5cdFx0ICogQHBhcmFtIHN0cmVhbSAtIFRoZSBzdHJlYW0gaWRlbnRpZmllclxuXHRcdCAqL1xuXHRcdGdldEF2YWlsYWJsZVN0cmVhbTogX2dldEF2YWlsYWJsZVN0cmVhbSxcblx0XHQvKipcblx0XHQgKiAgbXV0ZSBhdWRpbyB0aGUgc3RyZWFtIHN0cmVhbUlkXG5cdFx0ICogQHBhcmFtIHN0cmVhbUlkIC0gVGhlIHN0cmVhbSBpZGVudGlmaWVyIHRvIG11dGVcblx0XHQgKi9cblx0XHRtdXRlQXVkaW9TdHJlYW06IF9tdXRlQXVkaW9TdHJlYW0sXG5cdFx0LyoqXG5cdFx0ICogdW5tdXRlIGF1ZGlvIHRoZSBzdHJlYW0gc3RyZWFtSWRcblx0XHQgKiBAcGFyYW0gc3RyZWFtSWQgLSBUaGUgc3RyZWFtIGlkZW50aWZpZXIgdG8gbXV0ZVxuXHRcdCAqL1xuXHRcdHVubXV0ZUF1ZGlvU3RyZWFtOiBfdW5tdXRlQXVkaW9TdHJlYW0sXG5cdFx0LyoqXG5cdFx0ICogIG11dGUgVmlkZW8gdGhlIHN0cmVhbSBzdHJlYW1JZFxuXHRcdCAqIEBwYXJhbSBzdHJlYW1JZCAtIFRoZSBzdHJlYW0gaWRlbnRpZmllciB0byBtdXRlXG5cdFx0ICovXG5cdFx0bXV0ZVZpZGVvU3RyZWFtOiBfbXV0ZVZpZGVvU3RyZWFtLFxuXHRcdC8qKlxuXHRcdCAqIHVubXV0ZSBWaWRlbyB0aGUgc3RyZWFtIHN0cmVhbUlkXG5cdFx0ICogQHBhcmFtIHN0cmVhbUlkIC0gVGhlIHN0cmVhbSBpZGVudGlmaWVyIHRvIG11dGVcblx0XHQgKi9cblx0XHR1bm11dGVWaWRlb1N0cmVhbTogX3VubXV0ZVZpZGVvU3RyZWFtLFxuXHRcdC8qKlxuXHRcdCAqIENsb3NlcyB0aGUgcm9vbS5cblx0XHQgKiBTZXRzIHRoZSBjb25uZWN0ZWQgc3RhdHVzIG9mIHRoZSBjdXJyZW50IHBhcnRpY2lwYW50IHRvIGZhbHNlLCBkZWxldGVzIG1lZGlhcyBhbmQgY2FsbGJhY2tzLCB0aGVuIGNsb3NlIFdlYlJUQyBzdGFja3MgaW4gdXNlLlxuXHRcdCAqIEBwYXJhbSB1cGRhdGVSb29tU3RhdHVzVG9DbG9zZSAtIHRydWUgaWYgdGhlIHJvb20gc2hvdWxkIGJlIG1hcmtlZCBhcyBjbG9zZWRcblx0XHQgKi9cblx0XHRjbG9zZTogX2Nsb3NlLFxuXHRcdC8qKlxuXHRcdCAqIENhbGxzIHRoZSBtYWNoaW5nIGZ1bmN0aW9uIGZvciBhIGRlZGljYXRlZCBldmVudFxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSBldnQgLSBUaGUgZXZlbnQsIGluIFwiaW5zdGFudE1lc3NhZ2VcIiwgXCJwdWJsaXNoZWRTdHJlYW1cIiwgXCJ1blB1Ymxpc2hlZFN0cmVhbVwiLCBcInBhcnRpY2lwYW50Sm9pblwiLCBcInBhcnRpY2lwYW50TGVhdmVcIlxuXHRcdCAqIEBwYXJhbSB7ZnVuY3Rpb259IHBfY2IgLSBUaGUgY2FsbGJhY2sgdG8gY2FsbFxuXHRcdCAqL1xuXHRcdG9uOiAoZXZ0LCBwX2NiKSA9PiB7XG5cdFx0XHRzd2l0Y2ggKGV2dCkge1xuXHRcdFx0Y2FzZSAnaW5zdGFudE1lc3NhZ2UnOlxuXHRcdFx0XHRfc2V0T25JbnN0YW50TWVzc2FnZShwX2NiKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdwdWJsaXNoZWRTdHJlYW0nOlxuXHRcdFx0XHRfc2V0T25QdWJsaXNoZWRTdHJlYW0ocF9jYik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAndW5QdWJsaXNoZWRTdHJlYW0nOlxuXHRcdFx0XHRfc2V0T25VblB1Ymxpc2hlZFN0cmVhbShwX2NiKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdwYXJ0aWNpcGFudEpvaW4nOlxuXHRcdFx0XHRfc2V0T25QYXJ0aWNpcGFudEpvaW4ocF9jYik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAncGFydGljaXBhbnRMZWF2ZSc6XG5cdFx0XHRcdF9zZXRPblBhcnRpY2lwYW50TGVhdmUocF9jYik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0Y29uc29sZS5lcnIoYChSZWFjaFNESzo6cm9vbVske3Jvb21JZH1dOjpvbil1bnN1cHBvcnRlZCAke2V2dH0gZXZlbnRgKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xufVxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL3Jvb20uanNcbiAqKi8iLCIvKipcbiAqIEBmaWxlIGxvY2Fsc3RyZWFtLmpzIC0gSlMgZmlsZSB0byBoYW5kbGUgbG9jYWwgc3RyZWFtcy5cbiAqIEBkZXNjcmlwdGlvbiBQcm92aWRlcyBkYXRhIHN0cnVjdHVyZXMgdG8gc3RvcmUgYW5kIGhhbmRsZSB2aWRlbywgYXVkaW8gYW5kIHZpZGVvLWFuZC1hdWRpbyBzdHJlYW1zLiBUaGUgYXVkaW8gYW5kIHZpZGVvIHN0cmVhbXMgYXJlIG1hbmFnZWQgdG9vLlxuICogSW5pdGlhbGl6YXRpb24gbWV0aG9kcyBhcmUgcHJvdmlkZWQsIHN0cmVhbSBjb25uZWN0aW9ucyBhbmQgbGlzdGVuZXJzIHRvby5cbiAqIEBhdXRob3IgV2ViY29tXG4gKi9cblxuLyplc2xpbnQgY29tcGxleGl0eToxLCBtYXgtc3RhdGVtZW50czogMSwgbWF4LWxlbjogMSovXG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZGVzY3JpcHRpb24gVGhlIGxvY2FsIHN0cmVhbSBvYmplY3Qgd2l0aCBpdHMgc3RyZWFtcywgZmxhZ3MgYW5kIGNhbGxiYWNrcy4gSXQgaXMgYSBzaW5nbGV0b24uXG4gKi9cbmNvbnN0IGxvY2Fsc3RyZWFtID0gKGZ1bmN0aW9uKCkge1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gVGhlIGxvY2FsIHZpZGVvIHN0cmVhbXMsIGFzIEhUTUwgdmlkZW8gb2JqZWN0cywgaW4gYW4gYXJyYXlcblx0ICovXG5cdGxldCBsb2NhbFZpZGVvU3RyZWFtcyA9IFtdO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFRoZSBsb2NhbCBhdWRpbyBzdHJlYW1zLCBhcyBIVE1MIHZpZGVvIG9iamVjdHMsIGluIGFuIGFycmF5XG5cdCAqL1xuXHRsZXQgbG9jYWxBdWRpb1N0cmVhbXMgPSBbXTtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBUaGUgbG9jYWwgYXVkaW8gYW5kIHZpZGVvIHN0cmVhbXMsIGFzIEhUTUwgdmlkZW8gb2JqZWN0cywgaW4gYW4gYXJyYXlcblx0ICovXG5cdGxldCBsb2NhbEF1ZGlvVmlkZW9TdHJlYW1zID0gW107XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gVGhlIHZpZGVvIHN0cmVhbSBvYmplY3Rcblx0ICovXG5cdGxldCBzdHJlYW1WaWRlbyA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gVGhlIGF1ZGlvIHN0cmVhbSBvYmplY3Rcblx0ICovXG5cdGxldCBzdHJlYW1BdWRpbyA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gVGhlIHZpZGVvIGFuZCBhdWRpbyBzdHJlYW0gb2JqZWN0XG5cdCAqL1xuXHRsZXQgc3RyZWFtQXVkaW9WaWRlbyA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQW4gYXJyYXkgY29udGFpbmluZyB2aWRlbyBsaXN0ZW5lcnMgYXMgZnVuY3Rpb25zLiBUaGVzZSBsaXN0ZW5lcnMgd2lsbCBiZSB0cmlnZ2VyZWQgaWYgdGhlIHZpZGVvIHN0cmVhbSBpcyBlc3RhYmxpc2hlZC5cblx0ICovXG5cdGxldCBsaXN0ZW5lcnNWaWRlbyA9IFtdO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIEFuIGFycmF5IGNvbnRhaW5pbmcgYXVkaW8gbGlzdGVuZXJzIGFzIGZ1bmN0aW9ucy4gVGhlc2UgbGlzdGVuZXJzIHdpbGwgYmUgdHJpZ2dlcmVkIGlmIHRoZSBhdWRpbyBzdHJlYW0gaXMgZXN0YWJsaXNoZWQuXG5cdCAqL1xuXHRsZXQgbGlzdGVuZXJzQXVkaW8gPSBbXTtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBBbiBhcnJheSBjb250YWluaW5nIGF1ZGlvIGFuZCB2aWRlbyBsaXN0ZW5lcnMgYXMgZnVuY3Rpb25zLiBUaGVzZSBsaXN0ZW5lcnMgd2lsbCBiZSB0cmlnZ2VyZWQgaWYgdGhlIHZpZGUtYW5kLWF1ZGlvIHN0cmVhbSBpcyBlc3RhYmxpc2hlZC5cblx0ICovXG5cdGxldCBsaXN0ZW5lcnNBdWRpb1ZpZGVvID0gW107XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gVGhlIGxvY2FsIHZpZGVvIHN0cmVhbSwgYXMgYW4gSFRNTCB2aWRlbyBlbGVtZW50XG5cdCAqL1xuXHRsZXQgbUxvY2FsU3RyZWFtVmlkZW8gPSBudWxsO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFRoZSBsb2NhbCBhdWRpbyBzdHJlYW0sIGFzIGFuIEhUTUwgdmlkZW8gZWxlbWVudFxuXHQgKi9cblx0bGV0IG1Mb2NhbFN0cmVhbUF1ZGlvID0gbnVsbDtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBUaGUgbG9jYWwgYXVkaW8gYW5kIHZpZGVvIHN0cmVhbSwgYXMgYW4gSFRNTCB2aWRlbyBlbGVtZW50XG5cdCAqL1xuXHRsZXQgbUxvY2FsU3RyZWFtQXVkaW9WaWRlbyA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gRmxhZyBpbmRpY2F0aW5nIGlmIHRoZSB2aWRlbyBpbml0aWFsaXNhdGlvbiBpcyBpbiBwcm9ncmVzc1xuXHQgKi9cblx0bGV0IGluaXRWaWRlb1Byb2dyZXNzID0gZmFsc2U7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gRmxhZyBpbmRpY2F0aW5nIGlmIHRoZSBhdWRpbyBpbml0aWFsaXNhdGlvbiBpcyBpbiBwcm9ncmVzc1xuXHQgKi9cblx0bGV0IGluaXRBdWRpb1Byb2dyZXNzID0gZmFsc2U7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gRmxhZyBpbmRpY2F0aW5nIGlmIHRoZSBhdWRpbyBhbmQgdmlkZW8gaW5pdGlhbGlzYXRpb24gaXMgaW4gcHJvZ3Jlc3Ncblx0ICovXG5cdGxldCBpbml0QXVkaW9WaWRlb1Byb2dyZXNzID0gZmFsc2U7XG5cblx0LyoqXG5cdCAqIEluaXRpYWxpemVzIHRoZSB2aWRlbyBsb2NhbCBzdHJlYW0uXG5cdCAqIFRoZSB3ZWIgYnJvd3NlcidzIHVzZXIgbWVkaWEgd2lsbCBiZSBjYWxsZWQsIHNvIHRoZSBicm93c2VyIGluIHVzZSBtdXN0IGJlIHJlY2VudCAoRmlyZWZveCAxNywgQ2hyb21lIDIxLCBPcGVyYSAxOCBhbmQgbGF0ZXIgdmVyc2lvbnMpLlxuXHQgKiBBIHZpZGVvIGVsZW1lbnQgd2lsbCBiZSBjcmVhdGVkLCBhbmQgcHVzaGVkIHRvIHRoZSBsb2NhbCBzdHJlYW1zIG9iamVjdHMuIFRoZSBjYXRjaGVkIHZpZGVvIGFuZCBhdWRpbyBzdHJlYW0gd2lsbCBiZSBhdHRhY2hlZCB0byB0aGUgY3JlYXRlZCBIVE1MIGVsZW1lbnQuXG5cdCAqIExpc3RlbmVycyB3aWxsIGFsc28gYmUgY2FsbGVkLlxuXHQgKi9cblx0ZnVuY3Rpb24gaW5pdFZpZGVvKGNhbGxiYWNrKXtcblx0XHRjb25zb2xlLmxvZygnKFJlYWNoU0RLOjpsb2NhbHN0cmVhbTo6aW5pdFZpZGVvKScpO1xuXHRcdGlmICghIGluaXRWaWRlb1Byb2dyZXNzKSB7XG5cdFx0XHRpbml0VmlkZW9Qcm9ncmVzcz10cnVlO1xuXG5cdFx0XHRuYXZpZ2F0b3IuZ2V0TWVkaWEgPSBnZXRVc2VyTWVkaWE7XG5cdFx0XHRtTG9jYWxTdHJlYW1WaWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ1ZJREVPJyk7XG5cdFx0XHRtTG9jYWxTdHJlYW1WaWRlby5tdXRlZD0gdHJ1ZTtcblx0XHRcdGxvY2FsVmlkZW9TdHJlYW1zLnB1c2gobUxvY2FsU3RyZWFtVmlkZW8pO1xuXG5cdFx0XHRpZihzdHJlYW1WaWRlbyA9PT0gbnVsbCl7XG5cdFx0XHRcdG5hdmlnYXRvci5nZXRNZWRpYSh7YXVkaW8gOiBmYWxzZSx2aWRlbyA6IHRydWV9LFxuXHRcdFx0XHRcdChzKSA9PiB7XG5cdFx0XHRcdFx0XHRzdHJlYW1WaWRlbyA9IHM7XG5cblx0XHRcdFx0XHRcdGxvY2FsVmlkZW9TdHJlYW1zLmZvckVhY2goKGxvY2FsVmlkZW9TdHJlYW0pID0+IHtcblx0XHRcdFx0XHRcdFx0YXR0YWNoTWVkaWFTdHJlYW0obG9jYWxWaWRlb1N0cmVhbSwgc3RyZWFtVmlkZW8pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRsb2NhbFZpZGVvU3RyZWFtcyA9IFtdO1xuXG5cdFx0XHRcdFx0XHRsaXN0ZW5lcnNWaWRlby5mb3JFYWNoKChsaXN0ZW5lclZpZGVvKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGxpc3RlbmVyVmlkZW8oc3RyZWFtVmlkZW8pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRsaXN0ZW5lcnNWaWRlbyA9IFtdO1xuXG5cdFx0XHRcdFx0XHRpbml0VmlkZW9Qcm9ncmVzcz1mYWxzZTtcblxuXHRcdFx0XHRcdFx0aWYgKGNhbGxiYWNrKSB7XG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQoZXJyb3IpID0+IHtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG9uIHdlYnJ0Y0xvY2FsU3RyZWFtIC0gd2Via2l0R2V0VXNlck1lZGlhIDogZXJyb3I9Jyk7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmRpcihlcnJvcik7XG5cdFx0XHRcdFx0XHRpbml0VmlkZW9Qcm9ncmVzcyA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0XHRpZiAoY2FsbGJhY2spIHtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2soZXJyb3IpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGxvY2FsVmlkZW9TdHJlYW1zLmZvckVhY2goKGxvY2FsVmlkZW9TdHJlYW0pID0+IHtcblx0XHRcdFx0XHRhdHRhY2hNZWRpYVN0cmVhbShsb2NhbFZpZGVvU3RyZWFtLCBzdHJlYW1WaWRlbyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRsb2NhbFZpZGVvU3RyZWFtcyA9IFtdO1xuXG5cdFx0XHRcdGxpc3RlbmVyc1ZpZGVvLmZvckVhY2goKGxpc3RlbmVyVmlkZW8pID0+IHtcblx0XHRcdFx0XHRsaXN0ZW5lclZpZGVvKHN0cmVhbVZpZGVvKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGxpc3RlbmVyc1ZpZGVvID0gW107XG5cblx0XHRcdFx0aW5pdFZpZGVvUHJvZ3Jlc3MgPSBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogSW5pdGlhbGl6ZXMgdGhlIHZpZGVvIGxvY2FsIHN0cmVhbS5cblx0ICogVGhlIHdlYiBicm93c2VyJ3MgdXNlciBtZWRpYSB3aWxsIGJlIGNhbGxlZCwgc28gdGhlIGJyb3dzZXIgaW4gdXNlIG11c3QgYmUgcmVjZW50IChGaXJlZm94IDE3LCBDaHJvbWUgMjEsIE9wZXJhIDE4IGFuZCBsYXRlciB2ZXJzaW9ucykuXG5cdCAqIEEgdmlkZW8gZWxlbWVudCB3aWxsIGJlIGNyZWF0ZWQsIGFuZCBwdXNoZWQgdG8gdGhlIGxvY2FsIHN0cmVhbXMgb2JqZWN0cy4gVGhlIGNhdGNoZWQgYXVkaW8gc3RyZWFtIHdpbGwgYmUgYXR0YWNoZWQgdG8gdGhlIGNyZWF0ZWQgSFRNTCBlbGVtZW50LlxuXHQgKiBMaXN0ZW5lcnMgd2lsbCBhbHNvIGJlIGNhbGxlZC5cblx0ICovXG5cdGZ1bmN0aW9uIGluaXRBdWRpbyhjYWxsYmFjaykge1xuXHRcdGNvbnNvbGUubG9nKCcoUmVhY2hTREs6OmxvY2Fsc3RyZWFtOjppbml0QXVkaW8pJyk7XG5cdFx0aWYgKCEgaW5pdEF1ZGlvUHJvZ3Jlc3MpIHtcblx0XHRcdGluaXRBdWRpb1Byb2dyZXNzPXRydWU7XG5cblx0XHRcdG5hdmlnYXRvci5nZXRNZWRpYSA9IGdldFVzZXJNZWRpYTtcblx0XHRcdG1Mb2NhbFN0cmVhbUF1ZGlvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnQVVESU8nKTtcblx0XHRcdG1Mb2NhbFN0cmVhbUF1ZGlvLm11dGVkPSB0cnVlO1xuXHRcdFx0bG9jYWxBdWRpb1N0cmVhbXMucHVzaChtTG9jYWxTdHJlYW1BdWRpbyk7XG5cblx0XHRcdGlmKHN0cmVhbUF1ZGlvID09PSBudWxsKXtcblx0XHRcdFx0bmF2aWdhdG9yLmdldE1lZGlhKHthdWRpbyA6IHRydWUsdmlkZW8gOiBmYWxzZX0sXG5cdFx0XHRcdFx0KHMpID0+IHtcblx0XHRcdFx0XHRcdHN0cmVhbUF1ZGlvID0gcztcblx0XHRcdFx0XHRcdGxvY2FsQXVkaW9TdHJlYW1zLmZvckVhY2goKGxvY2FsQXVkaW9TdHJlYW0pID0+IHtcblx0XHRcdFx0XHRcdFx0YXR0YWNoTWVkaWFTdHJlYW0obG9jYWxBdWRpb1N0cmVhbSwgc3RyZWFtQXVkaW8pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRsb2NhbEF1ZGlvU3RyZWFtcyA9IFtdO1xuXG5cdFx0XHRcdFx0XHRsaXN0ZW5lcnNBdWRpby5mb3JFYWNoKChsaXN0ZW5lckF1ZGlvKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGxpc3RlbmVyQXVkaW8oc3RyZWFtQXVkaW8pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRsaXN0ZW5lcnNBdWRpbyA9IFtdO1xuXG5cdFx0XHRcdFx0XHRpbml0QXVkaW9Qcm9ncmVzcyA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0XHRpZiAoY2FsbGJhY2spIHtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdChlcnJvcikgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3Igb24gd2VicnRjTG9jYWxTdHJlYW0gLSB3ZWJraXRHZXRVc2VyTWVkaWEgOmVycm9yPScpO1xuXHRcdFx0XHRcdFx0Y29uc29sZS5kaXIoZXJyb3IpO1xuXHRcdFx0XHRcdFx0aW5pdEF1ZGlvUHJvZ3Jlc3M9ZmFsc2U7XG5cblx0XHRcdFx0XHRcdGlmIChjYWxsYmFjaykge1xuXHRcdFx0XHRcdFx0XHRjYWxsYmFjayhlcnJvcik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bG9jYWxBdWRpb1N0cmVhbXMuZm9yRWFjaCgobG9jYWxBdWRpb1N0cmVhbSkgPT4ge1xuXHRcdFx0XHRcdGF0dGFjaE1lZGlhU3RyZWFtKGxvY2FsQXVkaW9TdHJlYW0sIHN0cmVhbUF1ZGlvKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGxvY2FsQXVkaW9TdHJlYW1zID0gW107XG5cblx0XHRcdFx0bGlzdGVuZXJzQXVkaW8uZm9yRWFjaCgobGlzdGVuZXJBdWRpbykgPT4ge1xuXHRcdFx0XHRcdGxpc3RlbmVyQXVkaW8oc3RyZWFtQXVkaW8pO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0bGlzdGVuZXJzQXVkaW8gPSBbXTtcblxuXHRcdFx0XHRpbml0QXVkaW9Qcm9ncmVzcyA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBJbml0aWFsaXplcyB0aGUgYXVkaW8tYW5kLXZpZGVvIGxvY2FsIHN0cmVhbS5cblx0ICogVGhlIHdlYiBicm93c2VyJ3MgdXNlciBtZWRpYSB3aWxsIGJlIGNhbGxlZCwgc28gdGhlIGJyb3dzZXIgaW4gdXNlIG11c3QgYmUgcmVjZW50IChGaXJlZm94IDE3LCBDaHJvbWUgMjEsIE9wZXJhIDE4IGFuZCBsYXRlciB2ZXJzaW9ucykuXG5cdCAqIEEgdmlkZW8gZWxlbWVudCB3aWxsIGJlIGNyZWF0ZWQsIGFuZCBwdXNoZWQgdG8gdGhlIGxvY2FsIHN0cmVhbXMgb2JqZWN0cy4gVGhlIGNhdGNoZWQgYXVkaW8gc3RyZWFtIHdpbGwgYmUgYXR0YWNoZWQgdG8gdGhlIGNyZWF0ZWQgSFRNTCBlbGVtZW50LlxuXHQgKiBMaXN0ZW5lcnMgd2lsbCBhbHNvIGJlIGNhbGxlZC5cblx0ICovXG5cdGZ1bmN0aW9uIGluaXRBdWRpb1ZpZGVvKGNhbGxiYWNrKSB7XG5cdFx0Y29uc29sZS5sb2coJyhSZWFjaFNESzo6bG9jYWxzdHJlYW06OmluaXRBdWRpb1ZpZGVvKScpO1xuXHRcdGlmICghaW5pdEF1ZGlvVmlkZW9Qcm9ncmVzcykge1xuXHRcdFx0aW5pdEF1ZGlvVmlkZW9Qcm9ncmVzcz10cnVlO1xuXG5cdFx0XHRuYXZpZ2F0b3IuZ2V0TWVkaWEgPSBnZXRVc2VyTWVkaWE7XG5cdFx0XHRtTG9jYWxTdHJlYW1BdWRpb1ZpZGVvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnQVVESU9WSURFTycpO1xuXHRcdFx0bUxvY2FsU3RyZWFtQXVkaW9WaWRlby5tdXRlZD0gdHJ1ZTtcblx0XHRcdGxvY2FsQXVkaW9WaWRlb1N0cmVhbXMucHVzaChtTG9jYWxTdHJlYW1BdWRpb1ZpZGVvKTtcblxuXHRcdFx0aWYoc3RyZWFtQXVkaW9WaWRlbyA9PT0gbnVsbCl7XG5cdFx0XHRcdG5hdmlnYXRvci5nZXRNZWRpYSh7YXVkaW8gOiB0cnVlLHZpZGVvIDogdHJ1ZX0sXG5cdFx0XHRcdFx0KHMpID0+IHtcblx0XHRcdFx0XHRcdHN0cmVhbUF1ZGlvVmlkZW8gPSBzO1xuXG5cdFx0XHRcdFx0XHRsb2NhbEF1ZGlvVmlkZW9TdHJlYW1zLmZvckVhY2goKGxvY2FsQXVkaW9WaWRlb1N0cmVhbSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRhdHRhY2hNZWRpYVN0cmVhbShsb2NhbEF1ZGlvVmlkZW9TdHJlYW0sIHN0cmVhbUF1ZGlvVmlkZW8pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRsb2NhbEF1ZGlvVmlkZW9TdHJlYW1zID0gW107XG5cblx0XHRcdFx0XHRcdGxpc3RlbmVyc0F1ZGlvVmlkZW8uZm9yRWFjaCgobGlzdGVuZXJBdWRpb1ZpZGVvKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGxpc3RlbmVyQXVkaW9WaWRlbyhzdHJlYW1BdWRpb1ZpZGVvKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0bGlzdGVuZXJzQXVkaW9WaWRlbyA9IFtdO1xuXG5cdFx0XHRcdFx0XHRpbml0QXVkaW9WaWRlb1Byb2dyZXNzID0gZmFsc2U7XG5cblx0XHRcdFx0XHRcdGlmIChjYWxsYmFjaykge1xuXHRcdFx0XHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0KGVycm9yKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCcoUmVhY2hTREs6OmxvY2Fsc3RyZWFtOjppbml0QXVkaW9WaWRlbzo6RXJyb3Igb24gd2VicnRjTG9jYWxTdHJlYW0gLSB3ZWJraXRHZXRVc2VyTWVkaWEgOiBlcnJvcj0nKTtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZGlyKGVycm9yKTtcblx0XHRcdFx0XHRcdGluaXRBdWRpb1ZpZGVvUHJvZ3Jlc3M9ZmFsc2U7XG5cblx0XHRcdFx0XHRcdGlmIChjYWxsYmFjaykge1xuXHRcdFx0XHRcdFx0XHRjYWxsYmFjayhlcnJvcik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bG9jYWxBdWRpb1ZpZGVvU3RyZWFtcy5mb3JFYWNoKChsb2NhbEF1ZGlvVmlkZW9TdHJlYW0pID0+IHtcblx0XHRcdFx0XHRhdHRhY2hNZWRpYVN0cmVhbShsb2NhbEF1ZGlvVmlkZW9TdHJlYW0sIHN0cmVhbUF1ZGlvVmlkZW8pO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0bG9jYWxBdWRpb1ZpZGVvU3RyZWFtcyA9IFtdO1xuXG5cdFx0XHRcdGxpc3RlbmVyc0F1ZGlvVmlkZW8uZm9yRWFjaCgobGlzdGVuZXJBdWRpb1ZpZGVvKSA9PiB7XG5cdFx0XHRcdFx0bGlzdGVuZXJBdWRpb1ZpZGVvKHN0cmVhbUF1ZGlvVmlkZW8pO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0bGlzdGVuZXJzQXVkaW9WaWRlbyA9IFtdO1xuXG5cdFx0XHRcdGluaXRBdWRpb1ZpZGVvUHJvZ3Jlc3MgPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBDbG9zZXMgYWxsIHRoZSBzdHJlYW1zLlxuXHQgKiBTZXQgYWxsIHRoZSBpbml0UHJvZ3Jlc3MgZmxhZ3MgdG8gZmFsc2UsIGRldGFjaCBhbGwgdGhlIHN0cmVhbXMgYWZ0ZXIgc3RvcHBpbmcgdGhlbS5cblx0ICovXG5cdGZ1bmN0aW9uIGNsb3NlKCkge1xuXHRcdGNvbnNvbGUubG9nKCcoUmVhY2hTREs6OmxvY2Fsc3RyZWFtOjpjbG9zZSknKTtcblx0XHRpZiAobUxvY2FsU3RyZWFtVmlkZW8pIHtcblx0XHRcdGRldGFjaE1lZGlhU3RyZWFtKG1Mb2NhbFN0cmVhbVZpZGVvKTtcblx0XHRcdG1Mb2NhbFN0cmVhbVZpZGVvPW51bGw7XG5cdFx0fVxuXHRcdGlmIChzdHJlYW1BdWRpb1ZpZGVvKSB7XG5cdFx0XHRzdHJlYW1BdWRpb1ZpZGVvLnN0b3AoKTtcblx0XHRcdHN0cmVhbUF1ZGlvVmlkZW89bnVsbDtcblx0XHR9XG5cdFx0aWYgKHN0cmVhbVZpZGVvKSB7XG5cdFx0XHRzdHJlYW1WaWRlby5zdG9wKCk7XG5cdFx0XHRzdHJlYW1WaWRlbyA9IG51bGw7XG5cdFx0fVxuXHRcdGluaXRWaWRlb1Byb2dyZXNzPWZhbHNlO1xuXG5cdFx0aWYgKG1Mb2NhbFN0cmVhbUF1ZGlvKSB7XG5cdFx0XHRkZXRhY2hNZWRpYVN0cmVhbShtTG9jYWxTdHJlYW1BdWRpbyk7XG5cdFx0XHRtTG9jYWxTdHJlYW1BdWRpbz1udWxsO1xuXHRcdH1cblx0XHRpZiAoc3RyZWFtQXVkaW8pIHtcblx0XHRcdHN0cmVhbUF1ZGlvLnN0b3AoKTtcblx0XHRcdHN0cmVhbUF1ZGlvID0gbnVsbDtcblx0XHR9XG5cblx0XHRpbml0QXVkaW9Qcm9ncmVzcz1mYWxzZTtcblxuXHRcdGlmIChtTG9jYWxTdHJlYW1BdWRpb1ZpZGVvKSB7XG5cdFx0XHRkZXRhY2hNZWRpYVN0cmVhbShtTG9jYWxTdHJlYW1BdWRpb1ZpZGVvKTtcblx0XHRcdG1Mb2NhbFN0cmVhbUF1ZGlvVmlkZW89bnVsbDtcblx0XHR9XG5cdFx0aWYgKHN0cmVhbUF1ZGlvVmlkZW8pIHtcblx0XHRcdHN0cmVhbUF1ZGlvVmlkZW8uc3RvcCgpO1xuXHRcdFx0c3RyZWFtQXVkaW9WaWRlbyA9IG51bGw7XG5cdFx0fVxuXG5cdFx0aW5pdEF1ZGlvVmlkZW9Qcm9ncmVzcz1mYWxzZTtcblx0fVxuXG5cblx0cmV0dXJuIHtcblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIHRoZSB2aWRlbyBzdHJlYW1cblx0XHQgKi9cblx0XHRnZXRWaWRlb1N0cmVhbTogKCkgPT4ge1xuXHRcdFx0cmV0dXJuIHN0cmVhbVZpZGVvO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogQWRkcyBhIHZpZGVvIGxpc3RlbmVyIHdoaWNoIHdpbGwgYmUgY2FsbGVkIGFmdGVyIHRoZSB2aWRlbyBzdHJlYW0gaXMgZXN0YWJsaXNoZWQuXG5cdFx0ICogQHBhcmFtIHtmdW5jdGlvbn0gY2IgLSBUaGUgbGlzdGVuZXIgdG8gYWRkXG5cdFx0ICovXG5cdFx0YWRkVmlkZW9MaXN0ZW5lcjogKGNiKSA9PiB7XG5cdFx0XHRsaXN0ZW5lcnNWaWRlby5wdXNoKGNiKTtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIEluaXRpYWxpemVzIHRoZSB2aWRlbyBsb2NhbCBzdHJlYW0uXG5cdFx0ICogVGhlIHdlYiBicm93c2VyJ3MgdXNlciBtZWRpYSB3aWxsIGJlIGNhbGxlZCwgc28gdGhlIGJyb3dzZXIgaW4gdXNlIG11c3QgYmUgcmVjZW50IChGaXJlZm94IDE3LCBDaHJvbWUgMjEsIE9wZXJhIDE4IGFuZCBsYXRlciB2ZXJzaW9ucykuXG5cdFx0ICogQSB2aWRlbyBlbGVtZW50IHdpbGwgYmUgY3JlYXRlZCwgYW5kIHB1c2hlZCB0byB0aGUgbG9jYWwgc3RyZWFtcyBvYmplY3RzLiBUaGUgY2F0Y2hlZCB2aWRlbyBhbmQgYXVkaW8gc3RyZWFtIHdpbGwgYmUgYXR0YWNoZWQgdG8gdGhlIGNyZWF0ZWQgSFRNTCBlbGVtZW50LlxuXHRcdCAqIExpc3RlbmVycyB3aWxsIGFsc28gYmUgY2FsbGVkLlxuXHRcdCAqL1xuXHRcdGluaXRWaWRlbzogKCkgPT4ge1xuXHRcdFx0aW5pdFZpZGVvKCk7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBNYWtlcyB0aGUgY29ubmVjdGlvbiB0byB0aGUgbG9jYWwgdmlkZW8gc3RyZWFtLCBhbmQgYXR0YWNoIHRoZSBsb2NhbCB2aWRlbyBzdHJlYW0gdG8gdGhlIHZpZGVvIGVsZW1lbnQgaWYgZGVmaW5lZC5cblx0XHQgKiBJZiB0aGUgdmlkZW8gZWxlbWVudCBpcyBub3QgZGVmaW5lZCwgdGhlIHZpZGVvIGxvY2FsIHN0cmVhbSB3aWxsIGJlIGluaXRpYWxpemVkIGFuZCBhIGRlZGljYXRlZCBIVE1MIHZpZGVvIHRhZyB3aWxsIGJlIGNyZWF0ZWQuXG5cdFx0ICogQHBhcmFtIHZpZGVvRWx0IC0gVGhlIHZpZGVvIGVsZW1lbnQgd2hlcmUgcGxhY2UgdGhlIGNvbm5lY3RlZCBsb2NhbCB2aWRlbyBzdHJlYW0uIGlmIG51bGwsIGEgbmV3IG9uZSB3aWxsIGJlIGNyZWF0ZWQuXG5cdFx0ICogQHBhcmFtIGdldExvY2FsU3RyZWFtQ2IgLSBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHJldHJpZXZlIHRoZSBtZWRpYXN0cmVhbSBvYmplY3Rcblx0XHQgKi9cblx0XHRjb25uZWN0TG9jYWxWaWRlb1N0cmVhbTogKHZpZGVvRWx0LCBwdWJsaXNoU3RyZWFtQ2IsIGdldExvY2FsU3RyZWFtQ2IpID0+IHtcblx0XHRcdGlmICh2aWRlb0VsdCkge1xuXHRcdFx0XHR2aWRlb0VsdC5tdXRlZD10cnVlO1xuXHRcdFx0XHRpZiAoc3RyZWFtVmlkZW8pIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnKFJlYWNoU0RLOjpsb2NhbHN0cmVhbTo6Y29ubmVjdExvY2FsVmlkZW9TdHJlYW0pdXNlIGV4aXN0aW5nIHN0cmVhbVZpZGVvJyk7XG5cdFx0XHRcdFx0YXR0YWNoTWVkaWFTdHJlYW0odmlkZW9FbHQsc3RyZWFtVmlkZW8pO1xuXHRcdFx0XHRcdGlmIChnZXRMb2NhbFN0cmVhbUNiICYmIHR5cGVvZiBnZXRMb2NhbFN0cmVhbUNiPT0nZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRnZXRMb2NhbFN0cmVhbUNiKHN0cmVhbVZpZGVvKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bG9jYWxWaWRlb1N0cmVhbXMucHVzaCh2aWRlb0VsdCk7XG5cdFx0XHRcdFx0aWYgKGdldExvY2FsU3RyZWFtQ2IgJiYgdHlwZW9mIGdldExvY2FsU3RyZWFtQ2I9PSdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdGxpc3RlbmVyc1ZpZGVvLnB1c2goZ2V0TG9jYWxTdHJlYW1DYik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGluaXRWaWRlbyhwdWJsaXNoU3RyZWFtQ2IpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAoIXN0cmVhbVZpZGVvKSB7XG5cdFx0XHRcdFx0aWYgKGdldExvY2FsU3RyZWFtQ2IgJiYgdHlwZW9mIGdldExvY2FsU3RyZWFtQ2I9PSdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdGxpc3RlbmVyc1ZpZGVvLnB1c2goZ2V0TG9jYWxTdHJlYW1DYik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGluaXRWaWRlbyhwdWJsaXNoU3RyZWFtQ2IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmIChnZXRMb2NhbFN0cmVhbUNiICYmIHR5cGVvZiBnZXRMb2NhbFN0cmVhbUNiPT0nZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRnZXRMb2NhbFN0cmVhbUNiKHN0cmVhbVZpZGVvKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgdGhlIGF1ZGlvIHN0cmVhbVxuXHRcdCAqIEByZXR1cm4gLSBBbiBhdWRpbyBzdHJlYW1cblx0XHQgKi9cblx0XHRnZXRBdWRpb1N0cmVhbTogKCkgPT4ge1xuXHRcdFx0cmV0dXJuIHN0cmVhbUF1ZGlvO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogQWRkcyBhbiBhdWRpbyBsaXN0ZW5lciB3aGljaCB3aWxsIGJlIGNhbGxlZCBhZnRlciB0aGUgYXVkaW8gc3RyZWFtIGlzIGVzdGFibGlzaGVkLlxuXHRcdCAqIEBwYXJhbSB7ZnVuY3Rpb259IGNiIC0gVGhlIGxpc3RlbmVyIHRvIGFkZFxuXHRcdCAqL1xuXHRcdGFkZEF1ZGlvTGlzdGVuZXI6IChjYikgPT4ge1xuXHRcdFx0bGlzdGVuZXJzQXVkaW8ucHVzaChjYik7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBJbml0aWFsaXplcyB0aGUgYXVkaW8gbG9jYWwgc3RyZWFtLlxuXHRcdCAqIFRoZSB3ZWIgYnJvd3NlcidzIHVzZXIgbWVkaWEgd2lsbCBiZSBjYWxsZWQsIHNvIHRoZSBicm93c2VyIGluIHVzZSBtdXN0IGJlIHJlY2VudCAoRmlyZWZveCAxNywgQ2hyb21lIDIxLCBPcGVyYSAxOCBhbmQgbGF0ZXIgdmVyc2lvbnMpLlxuXHRcdCAqIEEgdmlkZW8gZWxlbWVudCB3aWxsIGJlIGNyZWF0ZWQsIGFuZCBwdXNoZWQgdG8gdGhlIGxvY2FsIHN0cmVhbXMgb2JqZWN0cy4gVGhlIGNhdGNoZWQgYXVkaW8gc3RyZWFtIHdpbGwgYmUgYXR0YWNoZWQgdG8gdGhlIGNyZWF0ZWQgSFRNTCBlbGVtZW50LlxuXHRcdCAqIExpc3RlbmVycyB3aWxsIGFsc28gYmUgY2FsbGVkLlxuXHRcdCAqL1xuXHRcdGluaXRBdWRpbzogKCkgPT4ge1xuXHRcdFx0aW5pdEF1ZGlvKCk7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBDb25uZWN0cyB0byB0aGUgbG9jYWwgYXVkaW8gc3RyZWFtIGFuZCBzZXRzIGl0IHRvIHRoZSBhdWRpbyBlbGVtZW50IGlmIGRlZmluZWQuXG5cdFx0ICogSWYgbm90LCBhIGRlZGljYXRlZCBIVE1MIHZpZGVvIHdpbGwgYmUgY3JlYXRlZC4gVGhlIGF1ZGlvIG1lZGlhIHN0cmVhbSB3aWxsIGJlIGF0dGFjaGVkIHRvIHRoZSBlbGVtZW50IGluIHVzZS5cblx0XHQgKiBAcGFyYW0gQXVkaW9FbHQgLSBUaGUgYXVkaW8gZWxlbWVudCBpbiB1c2UgcG9zc2Vzc2luZyB0aGUgYXR0YWNoZWQgbG9jYWwgYXVkaW8gc3RyZWFtXG5cdFx0ICogQHBhcmFtIGdldExvY2FsU3RyZWFtQ2IgLSBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHJldHJpZXZlIHRoZSBtZWRpYXN0cmVhbSBvYmplY3Rcblx0XHQgKi9cblx0XHRjb25uZWN0TG9jYWxBdWRpb1N0cmVhbTogKEF1ZGlvRWx0LCBwdWJsaXNoU3RyZWFtQ2IsIGdldExvY2FsU3RyZWFtQ2IpID0+IHtcblx0XHRcdGlmIChBdWRpb0VsdCkge1xuXHRcdFx0XHRBdWRpb0VsdC5tdXRlZD10cnVlO1xuXHRcdFx0XHRpZiAoc3RyZWFtQXVkaW8pIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnKFJlYWNoU0RLOjpsb2NhbHN0cmVhbTo6Y29ubmVjdExvY2FsQXVkaW9TdHJlYW0pdXNlIGV4aXN0aW5nIHN0cmVhbUF1ZGlvJyk7XG5cdFx0XHRcdFx0YXR0YWNoTWVkaWFTdHJlYW0oQXVkaW9FbHQsc3RyZWFtQXVkaW8pO1xuXHRcdFx0XHRcdGlmIChnZXRMb2NhbFN0cmVhbUNiICYmIHR5cGVvZiBnZXRMb2NhbFN0cmVhbUNiPT0nZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRnZXRMb2NhbFN0cmVhbUNiKHN0cmVhbUF1ZGlvKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bG9jYWxBdWRpb1N0cmVhbXMucHVzaChBdWRpb0VsdCk7XG5cdFx0XHRcdFx0aWYgKGdldExvY2FsU3RyZWFtQ2IgJiYgdHlwZW9mIGdldExvY2FsU3RyZWFtQ2I9PSdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdGxpc3RlbmVyc0F1ZGlvLnB1c2goZ2V0TG9jYWxTdHJlYW1DYik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGluaXRBdWRpbyhwdWJsaXNoU3RyZWFtQ2IpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAoIXN0cmVhbUF1ZGlvKSB7XG5cdFx0XHRcdFx0aWYgKGdldExvY2FsU3RyZWFtQ2IgJiYgdHlwZW9mIGdldExvY2FsU3RyZWFtQ2I9PSdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdGxpc3RlbmVyc0F1ZGlvLnB1c2goZ2V0TG9jYWxTdHJlYW1DYik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGluaXRBdWRpbyhwdWJsaXNoU3RyZWFtQ2IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmIChnZXRMb2NhbFN0cmVhbUNiICYmIHR5cGVvZiBnZXRMb2NhbFN0cmVhbUNiPT0nZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRnZXRMb2NhbFN0cmVhbUNiKHN0cmVhbUF1ZGlvKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgdGhlIGF1ZGlvIHZpZGVvIHN0cmVhbVxuXHRcdCAqIEByZXR1cm4gLSBUaGUgYXVkaW8gYW5kIHZpZGVvIHN0cmVhbVxuXHRcdCAqL1xuXHRcdGdldEF1ZGlvVmlkZW9TdHJlYW06ICgpID0+IHtcblx0XHRcdHJldHVybiBzdHJlYW1BdWRpb1ZpZGVvO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogQWRkcyB0aGUgYXVkaW8tYW5kLXZpZGVvIGxpc3RlbmVyIHdoaWNoIHdpbGwgYmUgY2FsbGVkIGFmdGVyIHRoZSBhdWRpLWFuZC12aWRlbyBzdHJlYW0gaXMgZXN0YWJsaXNoZWQuXG5cdFx0ICogQHBhcmFtIGNiIC0gVGhlIGF1ZGlvIGFuZCB2aWRlbyBsaXN0ZW5lciB0byBhZGRcblx0XHQgKi9cblx0XHRhZGRBdWRpb1ZpZGVvTGlzdGVuZXI6IChjYikgPT4ge1xuXHRcdFx0bGlzdGVuZXJzQXVkaW9WaWRlby5wdXNoKGNiKTtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIEluaXRpYWxpemVzIHRoZSBhdWRpby1hbmQtdmlkZW8gbG9jYWwgc3RyZWFtLlxuXHRcdCAqIFRoZSB3ZWIgYnJvd3NlcidzIHVzZXIgbWVkaWEgd2lsbCBiZSBjYWxsZWQsIHNvIHRoZSBicm93c2VyIGluIHVzZSBtdXN0IGJlIHJlY2VudCAoRmlyZWZveCAxNywgQ2hyb21lIDIxLCBPcGVyYSAxOCBhbmQgbGF0ZXIgdmVyc2lvbnMpLlxuXHRcdCAqIEEgdmlkZW8gZWxlbWVudCB3aWxsIGJlIGNyZWF0ZWQsIGFuZCBwdXNoZWQgdG8gdGhlIGxvY2FsIHN0cmVhbXMgb2JqZWN0cy4gVGhlIGNhdGNoZWQgYXVkaW8gc3RyZWFtIHdpbGwgYmUgYXR0YWNoZWQgdG8gdGhlIGNyZWF0ZWQgSFRNTCBlbGVtZW50LlxuXHRcdCAqIExpc3RlbmVycyB3aWxsIGFsc28gYmUgY2FsbGVkLlxuXHRcdCAqL1xuXHRcdGluaXRBdWRpb1ZpZGVvOiAoKSA9PiB7XG5cdFx0XHRpbml0QXVkaW9WaWRlbygpO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogQ29ubmVjdHMgdGhlIGxvY2FsIGF1ZGlvIGFuZCB2aWRlbyBzdHJlYW1zIGFuZCBhc3NpZ25zIHRoZW0gdG8gdGhlIGF1ZGlvIGFuZCB2aWRlbyBlbGVtZW50IGlmIG5lZWRlZC5cblx0XHQgKiBJZiBubyBIVE1MIGVsZW1lbnQgaXMgcGFzc2VkIHRvIHRoZSBmdW5jdGlvbm4gYSBuZXcgZWxlbWVudCBpcyBjcmVhdGVkXG5cdFx0ICogQHBhcmFtIEF1ZGlvVmlkZW9FbHQgLSBUaGUgZWxlbWVudCB3aGVyZSB0byBwbGFjZSB0aGUgYXVkaW8gYW5kIHZpZGVvIGxvY2FsIHN0cmVhbXNcblx0XHQgKiBAcGFyYW0gZ2V0TG9jYWxTdHJlYW1DYiAtIGEgY2FsbGJhY2sgZnVuY3Rpb24gdG8gcmV0cmlldmUgdGhlIG1lZGlhc3RyZWFtIG9iamVjdFxuXHRcdCAqL1xuXHRcdGNvbm5lY3RMb2NhbEF1ZGlvVmlkZW9TdHJlYW06IChBdWRpb1ZpZGVvRWx0LCBwdWJsaXNoU3RyZWFtQ2IsIGdldExvY2FsU3RyZWFtQ2IpID0+IHtcblx0XHRcdGlmIChBdWRpb1ZpZGVvRWx0KSB7XG5cdFx0XHRcdEF1ZGlvVmlkZW9FbHQubXV0ZWQ9dHJ1ZTtcblx0XHRcdFx0aWYgKHN0cmVhbUF1ZGlvVmlkZW8pIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnKFJlYWNoU0RLOjpsb2NhbHN0cmVhbTo6Y29ubmVjdExvY2FsQXVkaW9WaWRlb1N0cmVhbSl1c2UgZXhpc3Rpbmcgc3RyZWFtQXVkaW9WaWRlbycpO1xuXHRcdFx0XHRcdGF0dGFjaE1lZGlhU3RyZWFtKEF1ZGlvVmlkZW9FbHQsc3RyZWFtQXVkaW9WaWRlbyk7XG5cdFx0XHRcdFx0aWYgKGdldExvY2FsU3RyZWFtQ2IpIHtcblx0XHRcdFx0XHRcdGdldExvY2FsU3RyZWFtQ2Ioc3RyZWFtQXVkaW9WaWRlbyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGxvY2FsQXVkaW9WaWRlb1N0cmVhbXMucHVzaChBdWRpb1ZpZGVvRWx0KTtcblx0XHRcdFx0XHRpZiAoZ2V0TG9jYWxTdHJlYW1DYiAmJiB0eXBlb2YgZ2V0TG9jYWxTdHJlYW1DYiA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRsaXN0ZW5lcnNBdWRpb1ZpZGVvLnB1c2goZ2V0TG9jYWxTdHJlYW1DYik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGluaXRBdWRpb1ZpZGVvKHB1Ymxpc2hTdHJlYW1DYik7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmICghc3RyZWFtQXVkaW9WaWRlbykge1xuXHRcdFx0XHRcdGlmIChnZXRMb2NhbFN0cmVhbUNiICYmIHR5cGVvZiBnZXRMb2NhbFN0cmVhbUNiID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdGxpc3RlbmVyc0F1ZGlvVmlkZW8ucHVzaChnZXRMb2NhbFN0cmVhbUNiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aW5pdEF1ZGlvVmlkZW8ocHVibGlzaFN0cmVhbUNiKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAoZ2V0TG9jYWxTdHJlYW1DYikge1xuXHRcdFx0XHRcdFx0Z2V0TG9jYWxTdHJlYW1DYihzdHJlYW1BdWRpb1ZpZGVvKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogRGV0YWNoZXMgc3RyZWFtcyBhbmQgZGVsZXRlcyBsaXN0ZW5lcnNcblx0XHQgKi9cblx0XHRjbG9zZTogKCkgPT4ge1xuXHRcdFx0Y2xvc2UoKTtcblx0XHR9XG5cdH07XG5cbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGxvY2Fsc3RyZWFtO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2xvY2Fsc3RyZWFtLmpzXG4gKiovIiwiLyoqXG4gKiBAZmlsZSB3ZWJydGNtbmdyLmpzIC0gSlMgZmlsZSBmb3IgYSBXZWJSVEMgbWFuYWdlclxuICogQGF1dGhvciBXZWJjb21cbiAqL1xuXG4vKmVzbGludCBjb21wbGV4aXR5OjEsIG1heC1zdGF0ZW1lbnRzOiAxLCBtYXgtbGVuOiAxLCBtYXgtcGFyYW1zOiAxKi9cblxuaW1wb3J0IHV0aWxzIGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHdlYnJ0YyBmcm9tICcuL3dlYnJ0Yyc7XG5pbXBvcnQgbG9jYWxzdHJlYW0gZnJvbSAnLi9sb2NhbHN0cmVhbSc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZGVzY3JpcHRpb24gV2ViUlRDIG1hbmFnZXIgaGFuZGxpbmcgdGhlIFdlYlJUQyBzdGFja3MgaW4gdXNlXG4gKi9cbmNvbnN0IHdlYnJ0Y21uZ3IgPSBmdW5jdGlvbihkYXRhcmVmcykge1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQW4gYXJyYXkgY29udGFpbmcgdGhlIFdlYlJUQyBzdGFja3MgaW4gdXNlXG5cdCAqL1xuXHRjb25zdCB3ZWJydGNTdGFja3MgPSBbXTtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBBbiBhcnJheSBjb250YWludCB0aGUgdmlydHVhbCBXZWJSVEMgc3RhY2tzXG5cdCAqL1xuXHRjb25zdCB2aXJ0dWFsV2VicnRjU3RhY2tzID0gW107XG5cblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBXZWJSVEMgb2JqZWN0XG5cdCAqIEBwYXJhbSBwX1ZpZCAtIHRoZSB2aWRlbyBjb250YWluZXIgbGlua2VkIHRvIHRoZSBwZWVyY29ubmVjdGlvblxuXHQgKiBAcGFyYW0gcF9yZW1vdGVBcHBJbnN0SWQgLSB0aGUgcmVtb3RlIGFwcGxpY2F0aW9uIGluc3RhbmNlIGlkZW50aWZpZXJcblx0ICogQHBhcmFtIHBfb25DbG9zZUNiIC0gQSBjYWxsYmFjayB0byB0cmlnZ2VyIHdoZW4gdGhlIGNvbm5lY3Rpb24gaXMgY2xvc2VkXG5cdCAqIEBwYXJhbSBwX2lzUHVibGlzaCAtIHRydWUgaWYgaXQncyBhIHBlZXJjb25uZWN0aW9uIHJlbGF0ZWQgdG8gYSBwdWJsaXNoU3RyZWFtLCBmYWxzZSBpZiBpdCdzIHJlbGF0YXRlZCB0byBhIHN1YnNjcmliZVxuXHQgKiBAcGFyYW0gcF9hY3Rpb25UeXBlIC0gVGhlIGFjdGlvbiB0eXBlIChhdWRpbywgdmlkZW8sIGF1ZGlvLXZpZGVvKVxuXHQgKiBAcGFyYW0gcF9wZWVyY29JZCAtIFRoZSBQZWVyQ29ubmVjdGlvbiBJZFxuXHQgKiBAcGFyYW0gcF9wZWVyY29SZWYgLSBUaGUgUGVlckNvbm5lY3Rpb24gUmVmIGluIHRoZSB3ZWJydGMgbm9kZVxuXHQgKiBAcGFyYW0gcF9wZWVyY29SZWYgLSBUaGUgUGVlckNvbm5lY3Rpb24gSWQgaW4gdGhlIHdlYnJ0YyBub2RlXG5cdCAqIEBwYXJhbSBwX211dGVkQXVkaW8gLSBvcHRpb25hbCAtIGlmIHRydWUgcGVlcmNvbm5lY3Rpb24gd2lsbCBiZSBjcmVhdGVkIG11dGVkXG5cdCAqIEBwYXJhbSBwX211dGVWaWRlbyAtIG9wdGlvbmFsIC0gaWYgdHJ1ZSBwZWVyY29ubmVjdGlvbiB3aWxsIGJlIGNyZWF0ZWQgd2l0aCB2aWRlbyBtdXRlZFxuXHQgKiBAcGFyYW0gcF9nZXRTdHJlYW1DYiAtIGEgY2FsbGJhY2sgZnVuY3Rpb24gdG8gcmV0cmlldmUgdGhlIG1lZGlhc3RyZWFtIG9iamVjdFxuXHQgKi9cblx0ZnVuY3Rpb24gX2NyZWF0ZVdlYnJ0YyhwX1ZpZCwgcF9yZW1vdGVBcHBJbnN0SWQsIHBfb25DbG9zZUNiLCBwX2lzUHVibGlzaCwgcF9hY3Rpb25UeXBlLCBwX3BlZXJjb0lkLCBwX3BlZXJjb1JlZiwgcF9tdXRlZEF1ZGlvLCBwX211dGVWaWRlbywgcF9nZXRTdHJlYW1DYikge1xuXHRcdGNvbnN0XG5cdFx0XHR3ZWJydGNTdGFja0lkID0gcF9wZWVyY29JZCxcblx0XHRcdGxvY2FsRGF0YVJlZiA9IGRhdGFyZWZzLmdldFdlYnJ0YygpLmNoaWxkKGAke3BfcGVlcmNvUmVmfS8ke3V0aWxzLmFwcEluc3RhbmNlSWR9YCksXG5cdFx0XHRyZW1vdGVEYXRhUmVmID0gZGF0YXJlZnMuZ2V0V2VicnRjKCkuY2hpbGQoYCR7cF9wZWVyY29SZWZ9LyR7cF9yZW1vdGVBcHBJbnN0SWR9YCk7XG4vLyAgICBcdCBpZiAocF9pc1B1Ymxpc2gpIHtcbi8vICAgIFx0XHQgd2VicnRjU3RhY2tJZD11dGlscy5hcHBJbnN0YW5jZUlkK1wiX1wiK3BfcmVtb3RlQXBwSW5zdElkO1xuLy8gICAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgIFx0IHdlYnJ0Y1N0YWNrSWQ9cF9yZW1vdGVBcHBJbnN0SWQrXCJfXCIrdXRpbHMuYXBwSW5zdGFuY2VJZDtcbi8vICAgICAgICAgfVxuXHRcdGxldCB2aXJ0dWFsV2VicnRjU3RhY2sgO1xuXHRcdC8vIGNyZWF0ZSB0aGUgdmlydHVhbCB3ZWJydGNzdGFja1xuXHRcdGlmIChwX2lzUHVibGlzaCkge1xuXHRcdFx0dmlydHVhbFdlYnJ0Y1N0YWNrID0ge1xuXHRcdFx0XHR3ZWJSdGNTdGFja0lkOiB3ZWJydGNTdGFja0lkLFxuXHRcdFx0XHRsb2NhbFZpZDogcF9WaWRcblx0XHRcdH07XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZpcnR1YWxXZWJydGNTdGFjayA9IHtcblx0XHRcdFx0d2ViUnRjU3RhY2tJZDogd2VicnRjU3RhY2tJZCxcblx0XHRcdFx0cmVtb3RlVmlkOiBwX1ZpZFxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRjb25zdCBpZCA9IHZpcnR1YWxXZWJydGNTdGFja3MucHVzaCh2aXJ0dWFsV2VicnRjU3RhY2spIC0gMTtcblxuXHRcdC8vIGNyZWF0ZSB0aGUgcmVhbCB3ZWJydGNzdGFjayBpZiBpdCBkb2VzIG5vdCBhbHJlYWR5IGV4aXN0XG5cdFx0aWYgKCF3ZWJydGNTdGFja3Nbd2VicnRjU3RhY2tJZF0pIHtcblx0XHRcdGNvbnNvbGUuZGVidWcoJ1JlYWNoU0RLOjp3ZWJydGNtbmdyOjpjcmVhdGVXZWJydGMtPmNyZWF0ZSBhIG5ldyByZWFsIHdlYnJ0Y1N0YWNrJyk7XG5cdFx0XHQvLyBjcmVhdGUgdGhlIHJlYWwgd2VicnRjc3RhY2tcblx0XHRcdGNvbnN0IHdlYlJ0Y1N0YWNrID0gd2VicnRjKHRoaXMsIHBfaXNQdWJsaXNoLCBsb2NhbERhdGFSZWYsIHJlbW90ZURhdGFSZWYsIHdlYnJ0Y1N0YWNrSWQsIHBfYWN0aW9uVHlwZSwgcF9tdXRlZEF1ZGlvLCBwX211dGVWaWRlbyk7XG5cdFx0XHR3ZWJSdGNTdGFjay5zZXRPbkNsb3NlKHBfb25DbG9zZUNiKTtcblx0XHRcdGlmIChwX2lzUHVibGlzaCkge1xuXHRcdFx0XHR3ZWJydGNTdGFja3Nbd2VicnRjU3RhY2tJZF0gPSB7XG5cdFx0XHRcdFx0c3RhY2s6d2ViUnRjU3RhY2ssXG5cdFx0XHRcdFx0aXNQdWJsaXNoZWQ6MSxcblx0XHRcdFx0XHRpc1N1YnNjcmliZWQ6MFxuXHRcdFx0XHR9O1xuXHRcdFx0XHR3ZWJSdGNTdGFjay5jb25uZWN0TG9jYWxTdHJlYW0ocF9WaWQscF9nZXRTdHJlYW1DYik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR3ZWJydGNTdGFja3Nbd2VicnRjU3RhY2tJZF0gPSB7XG5cdFx0XHRcdFx0c3RhY2s6d2ViUnRjU3RhY2ssXG5cdFx0XHRcdFx0aXNQdWJsaXNoZWQ6MCxcblx0XHRcdFx0XHRpc1N1YnNjcmliZWQ6MVxuXHRcdFx0XHR9O1xuXHRcdFx0XHR3ZWJSdGNTdGFjay5jb25uZWN0UmVtb3RlU3RyZWFtKHBfVmlkLHBfZ2V0U3RyZWFtQ2IpO1xuXHRcdFx0fVxuXG5cblxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLmRlYnVnKCdSZWFjaFNESzo6d2VicnRjbW5ncjo6Y3JlYXRlV2VicnRjLT51c2UgZXhpc3RpbmcgcmVhbCB3ZWJydGNTdGFjaycpO1xuXHRcdFx0Ly8gaW5jcmVtZW50IHJlZiBjb3VudGVyXG5cdFx0XHRpZiAocF9pc1B1Ymxpc2gpIHtcblx0XHRcdFx0d2VicnRjU3RhY2tzW3dlYnJ0Y1N0YWNrSWRdLmlzUHVibGlzaGVkKys7XG5cdFx0XHRcdHdlYnJ0Y1N0YWNrc1t3ZWJydGNTdGFja0lkXS5zdGFjay5jb25uZWN0TG9jYWxTdHJlYW0ocF9WaWQsIHBfZ2V0U3RyZWFtQ2IpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0d2VicnRjU3RhY2tzW3dlYnJ0Y1N0YWNrSWRdLmlzU3Vic2NyaWJlZCsrO1xuXHRcdFx0XHR3ZWJydGNTdGFja3Nbd2VicnRjU3RhY2tJZF0uc3RhY2suY29ubmVjdFJlbW90ZVN0cmVhbShwX1ZpZCwgcF9nZXRTdHJlYW1DYik7XG5cdFx0XHR9XG5cblxuXHRcdH1cblx0XHRjb25zb2xlLmRlYnVnKGBSZWFjaFNESzo6d2VicnRjbW5ncjo6Y3JlYXRlV2VicnRjLT53ZWJydGNTdGFjazoke3dlYnJ0Y1N0YWNrSWR9IG5ldyBpc1B1Ymxpc2hlZCBjb3VudCA9JHt3ZWJydGNTdGFja3Nbd2VicnRjU3RhY2tJZF0uaXNQdWJsaXNoZWR9IG5ldyBpc1N1YnNjcmliZWQgY291bnQgPSR7d2VicnRjU3RhY2tzW3dlYnJ0Y1N0YWNrSWRdLmlzU3Vic2NyaWJlZH1gKTtcblx0XHRyZXR1cm4gaWQ7XG5cdH1cblxuXHQvKipcblx0ICogQ2xvc2UgV2ViUlRDIGZlYXR1cmVzIDogZGV0YWNoIG1lZGlhIHN0cmVhbXMgYW5kIHVucHVibGlzaCBzdGFja3MuXG5cdCAqIEBwYXJhbSBpZCAtXG5cdCAqIEBwYXJhbSBwX2lzVW5QdWJsaXNoXG5cdCAqIEBwYXJhbSBjYWxsYmFjayAtXG5cdCAqL1xuXHRmdW5jdGlvbiBfY2xvc2VXZWJydGMoaWQscF9pc1VuUHVibGlzaCxjYWxsYmFjaykge1xuXHRcdGNvbnNvbGUuZGVidWcoYFJlYWNoU0RLOjp3ZWJydGNtbmdyOjpjbG9zZVdlYnJ0Yy0+aWQ9JHtpZH1gKTtcblx0XHRpZiAoIXZpcnR1YWxXZWJydGNTdGFja3NbaWRdKSB7XG5cdFx0XHRjb25zb2xlLndhcm4oYFJlYWNoU0RLOjp3ZWJydGNtbmdyOjpjbG9zZVdlYnJ0YzogdmlydHVhbHN0YWNrICR7aWR9IG5vdCBmb3VuZGApO1xuXHRcdFx0aWYgKGNhbGxiYWNrICYmIHR5cGVvZiBjYWxsYmFjayA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Y29uc3Qgd2VicnRjU3RhY2tJZCA9IHZpcnR1YWxXZWJydGNTdGFja3NbaWRdLndlYlJ0Y1N0YWNrSWQ7XG5cdFx0aWYgKHdlYnJ0Y1N0YWNrSWQgJiYgd2VicnRjU3RhY2tzW3dlYnJ0Y1N0YWNrSWRdICApIHtcblx0XHRcdGlmIChwX2lzVW5QdWJsaXNoICYmIHdlYnJ0Y1N0YWNrc1t3ZWJydGNTdGFja0lkXS5pc1B1Ymxpc2hlZD4wKSB7XG5cdFx0XHRcdHdlYnJ0Y1N0YWNrc1t3ZWJydGNTdGFja0lkXS5pc1B1Ymxpc2hlZC0tO1xuXHRcdFx0fSBlbHNlIGlmICghcF9pc1VuUHVibGlzaCAmJiB3ZWJydGNTdGFja3Nbd2VicnRjU3RhY2tJZF0uaXNTdWJzY3JpYmVkPjApIHtcblx0XHRcdFx0d2VicnRjU3RhY2tzW3dlYnJ0Y1N0YWNrSWRdLmlzU3Vic2NyaWJlZC0tO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHdlYnJ0Y1N0YWNrc1t3ZWJydGNTdGFja0lkXS5pc1B1Ymxpc2hlZDwxICYmIHdlYnJ0Y1N0YWNrc1t3ZWJydGNTdGFja0lkXS5pc1N1YnNjcmliZWQ8MSkge1xuXHRcdFx0XHRjb25zb2xlLmRlYnVnKGBSZWFjaFNESzo6d2VicnRjbW5ncjo6Y2xvc2VXZWJydGMtPmRlc3Ryb3kgIHJlYWwgd2VicnRjU3RhY2s6JHt3ZWJydGNTdGFja0lkfWApO1xuXHRcdFx0XHQvLyBkZXN0cm95IHRoZSBzdGFja1xuXHRcdFx0XHR3ZWJydGNTdGFja3Nbd2VicnRjU3RhY2tJZF0uc3RhY2suY2xvc2UoY2FsbGJhY2spO1xuXHRcdFx0XHR3ZWJydGNTdGFja3Nbd2VicnRjU3RhY2tJZF0gPSBudWxsO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc29sZS5kZWJ1ZyhgUmVhY2hTREs6OndlYnJ0Y21uZ3I6OmNsb3NlV2VicnRjLT5kZWNyZW1lbnQgIHJlYWwgd2VicnRjU3RhY2s6JHt3ZWJydGNTdGFja0lkfSBuZXcgaXNQdWJsaXNoZWQgY291bnQgPSR7d2VicnRjU3RhY2tzW3dlYnJ0Y1N0YWNrSWRdLmlzUHVibGlzaGVkfSBuZXcgaXNTdWJzY3JpYmVkIGNvdW50ID0ke3dlYnJ0Y1N0YWNrc1t3ZWJydGNTdGFja0lkXS5pc1N1YnNjcmliZWR9YCk7XG5cdFx0XHRcdGlmIChjYWxsYmFjayAmJiB0eXBlb2YgY2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKGNhbGxiYWNrICYmIHR5cGVvZiBjYWxsYmFjayA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0XHR9XG5cdFx0XHRjb25zb2xlLndhcm4oJ1JlYWNoU0RLOjp3ZWJydGNtbmdyOjpjbG9zZVdlYnJ0YyBjYW5ub3QgZm91bmQgcmVhbCBzdGFjaycpO1xuXHRcdH1cblxuXHRcdGlmICh2aXJ0dWFsV2VicnRjU3RhY2tzW2lkXS5sb2NhbFZpZCkge1xuXHRcdFx0bG9jYWxzdHJlYW0uY2xvc2UoKTtcblx0XHRcdGRldGFjaE1lZGlhU3RyZWFtKHZpcnR1YWxXZWJydGNTdGFja3NbaWRdLmxvY2FsVmlkKTtcblx0XHR9XG5cdFx0aWYgKHZpcnR1YWxXZWJydGNTdGFja3NbaWRdLnJlbW90ZVZpZCkgeyBkZXRhY2hNZWRpYVN0cmVhbSh2aXJ0dWFsV2VicnRjU3RhY2tzW2lkXS5yZW1vdGVWaWQpO31cblxuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0LyoqXG5cdCAqIENsZWFycyBhIHNwZWNpZmljYWwgV2ViUlRDIHN0YWNrIGJ5IHNldHRpbmcgaXQgdG8gbnVsbC5cblx0ICogQHBhcmFtIHdlYnJ0Y1N0YWNrSWQgLSBUaGUgV2ViUlRDIHN0YWNrIElEIHRvIGNsZWFyXG5cdCAqL1xuXHRmdW5jdGlvbiBfY2xlYXJXZWJydGNTdGFja3Mod2VicnRjU3RhY2tJZCkge1xuXHRcdGNvbnNvbGUuZGVidWcoYFJlYWNoU0RLOjp3ZWJydGNtbmdyOjpjbGVhcldlYnJ0Y1N0YWNrcyBpZD0ke3dlYnJ0Y1N0YWNrSWR9YCk7XG5cdFx0aWYgKHdlYnJ0Y1N0YWNrSWQgJiYgd2VicnRjU3RhY2tzICYmIHdlYnJ0Y1N0YWNrc1t3ZWJydGNTdGFja0lkXSkge1xuXHRcdFx0d2VicnRjU3RhY2tzW3dlYnJ0Y1N0YWNrSWRdID0gbnVsbDtcblx0XHR9XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHQvKipcblx0ICogQXVkaW8gbXV0ZSB0aGUgd2VicnRjIHBlZXJjb25uZWN0aW9uXG5cdCAqIEBwYXJhbSB2aXJ0dWFsV2VicnRjU3RhY2tJZCAtIFRoZSBXZWJSVEMgc3RhY2sgSUQgdG8gbXV0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gX211dGVBdWRpb1dlYnJ0Y1N0YWNrKHZpcnR1YWxXZWJydGNTdGFja0lkKSB7XG5cdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6d2VicnRjbW5ncjo6bXV0ZUF1ZGlvV2VicnRjU3RhY2spIHZpcnR1YWxXZWJydGNTdGFja0lkPSR7dmlydHVhbFdlYnJ0Y1N0YWNrSWR9YCk7XG5cblx0XHRpZiAodmlydHVhbFdlYnJ0Y1N0YWNrcyAmJiB2aXJ0dWFsV2VicnRjU3RhY2tzW3ZpcnR1YWxXZWJydGNTdGFja0lkXSAmJiB2aXJ0dWFsV2VicnRjU3RhY2tzW3ZpcnR1YWxXZWJydGNTdGFja0lkXS53ZWJSdGNTdGFja0lkKSB7XG5cdFx0XHRjb25zdCB3ZWJSdGNTdGFja0lkID0gdmlydHVhbFdlYnJ0Y1N0YWNrc1t2aXJ0dWFsV2VicnRjU3RhY2tJZF0ud2ViUnRjU3RhY2tJZDtcblx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OndlYnJ0Y21uZ3I6Om11dGVBdWRpb1dlYnJ0Y1N0YWNrKSB2aXJ0dWFsV2VicnRjU3RhY2tJZD0ke3ZpcnR1YWxXZWJydGNTdGFja0lkfSB3ZWJSdGNTdGFja0lkPSR7d2ViUnRjU3RhY2tJZH1gKTtcblx0XHRcdGlmICh3ZWJydGNTdGFja3MgJiYgd2VicnRjU3RhY2tzW3dlYlJ0Y1N0YWNrSWRdICYmIHdlYnJ0Y1N0YWNrc1t3ZWJSdGNTdGFja0lkXS5zdGFjaykge1xuXHRcdFx0XHR3ZWJydGNTdGFja3Nbd2ViUnRjU3RhY2tJZF0uc3RhY2subXV0ZUF1ZGlvKCk7XG5cdFx0XHR9ICBlbHNlIHtcblx0XHRcdFx0Y29uc29sZS53YXJuKGAoUmVhY2hTREs6OndlYnJ0Y21uZ3I6Om11dGVBdWRpb1dlYnJ0Y1N0YWNrKSB3ZWJydGNTdGFjaz0ke3dlYlJ0Y1N0YWNrSWR9IG5vdCBmb3VuZGApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLndhcm4oYChSZWFjaFNESzo6d2VicnRjbW5ncjo6bXV0ZUF1ZGlvV2VicnRjU3RhY2spIHZpcnR1YWxXZWJydGNTdGFja0lkPSR7dmlydHVhbFdlYnJ0Y1N0YWNrSWR9IG5vdCBmb3VuZGApO1xuXHRcdH1cblxuXG5cdH1cblxuXHQvKipcblx0ICogQXVkaW8gdW5tdXRlIHRoZSB3ZWJydGMgcGVlcmNvbm5lY3Rpb25cblx0ICogQHBhcmFtIHZpcnR1YWxXZWJydGNTdGFja0lkIC0gVGhlIFdlYlJUQyBzdGFjayBJRCB0byB1bm11dGVcblx0ICovXG5cdGZ1bmN0aW9uICBfdW5tdXRlQXVkaW9XZWJydGNTdGFjayAodmlydHVhbFdlYnJ0Y1N0YWNrSWQpIHtcblx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjp3ZWJydGNtbmdyOjpfdW5tdXRlQXVkaW9XZWJydGNTdGFjaykgdmlydHVhbFdlYnJ0Y1N0YWNrSWQ9JHt2aXJ0dWFsV2VicnRjU3RhY2tJZH1gKTtcblxuXHRcdGlmICh2aXJ0dWFsV2VicnRjU3RhY2tzICYmIHZpcnR1YWxXZWJydGNTdGFja3NbdmlydHVhbFdlYnJ0Y1N0YWNrSWRdICYmIHZpcnR1YWxXZWJydGNTdGFja3NbdmlydHVhbFdlYnJ0Y1N0YWNrSWRdLndlYlJ0Y1N0YWNrSWQpIHtcblx0XHRcdGNvbnN0IHdlYlJ0Y1N0YWNrSWQgPSB2aXJ0dWFsV2VicnRjU3RhY2tzW3ZpcnR1YWxXZWJydGNTdGFja0lkXS53ZWJSdGNTdGFja0lkO1xuXHRcdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6d2VicnRjbW5ncjo6X3VubXV0ZUF1ZGlvV2VicnRjU3RhY2spIHZpcnR1YWxXZWJydGNTdGFja0lkPSR7dmlydHVhbFdlYnJ0Y1N0YWNrSWR9LHdlYlJ0Y1N0YWNrSWQ9JHt3ZWJSdGNTdGFja0lkfWApO1xuXHRcdFx0aWYgKHdlYnJ0Y1N0YWNrcyAmJiB3ZWJydGNTdGFja3Nbd2ViUnRjU3RhY2tJZF0gJiYgd2VicnRjU3RhY2tzW3dlYlJ0Y1N0YWNrSWRdLnN0YWNrKSB7XG5cdFx0XHRcdHdlYnJ0Y1N0YWNrc1t3ZWJSdGNTdGFja0lkXS5zdGFjay51bm11dGVBdWRpbygpO1xuXHRcdFx0fSAgZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUud2FybihgKFJlYWNoU0RLOjp3ZWJydGNtbmdyOjpfdW5tdXRlQXVkaW9XZWJydGNTdGFjaykgd2VicnRjU3RhY2s9JHt3ZWJSdGNTdGFja0lkfSBub3QgZm91bmRgKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc29sZS53YXJuKGAoUmVhY2hTREs6OndlYnJ0Y21uZ3I6Ol91bm11dGVBdWRpb1dlYnJ0Y1N0YWNrKSB2aXJ0dWFsV2VicnRjU3RhY2tJZD0ke3ZpcnR1YWxXZWJydGNTdGFja0lkfSBub3QgZm91bmRgKTtcblx0XHR9XG5cblx0fVxuXG5cblx0LyoqXG5cdCAqIFZpZGVvIG11dGUgdGhlIHdlYnJ0YyBwZWVyY29ubmVjdGlvblxuXHQgKiBAcGFyYW0gdmlydHVhbFdlYnJ0Y1N0YWNrSWQgLSBUaGUgV2ViUlRDIHN0YWNrIElEIHRvIG11dGVcblx0ICovXG5cdGZ1bmN0aW9uIF9tdXRlVmlkZW9XZWJydGNTdGFjayh2aXJ0dWFsV2VicnRjU3RhY2tJZCkge1xuXHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OndlYnJ0Y21uZ3I6Om11dGVBdWRpb1dlYnJ0Y1N0YWNrKSB2aXJ0dWFsV2VicnRjU3RhY2tJZD0ke3ZpcnR1YWxXZWJydGNTdGFja0lkfWApO1xuXG5cdFx0aWYgKHZpcnR1YWxXZWJydGNTdGFja3MgJiYgdmlydHVhbFdlYnJ0Y1N0YWNrc1t2aXJ0dWFsV2VicnRjU3RhY2tJZF0gJiYgdmlydHVhbFdlYnJ0Y1N0YWNrc1t2aXJ0dWFsV2VicnRjU3RhY2tJZF0ud2ViUnRjU3RhY2tJZCkge1xuXHRcdFx0Y29uc3Qgd2ViUnRjU3RhY2tJZCA9IHZpcnR1YWxXZWJydGNTdGFja3NbdmlydHVhbFdlYnJ0Y1N0YWNrSWRdLndlYlJ0Y1N0YWNrSWQ7XG5cdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjp3ZWJydGNtbmdyOjptdXRlQXVkaW9XZWJydGNTdGFjaykgdmlydHVhbFdlYnJ0Y1N0YWNrSWQ9JHt2aXJ0dWFsV2VicnRjU3RhY2tJZH0gd2ViUnRjU3RhY2tJZD0ke3dlYlJ0Y1N0YWNrSWR9YCk7XG5cdFx0XHRpZiAod2VicnRjU3RhY2tzICYmIHdlYnJ0Y1N0YWNrc1t3ZWJSdGNTdGFja0lkXSAmJiB3ZWJydGNTdGFja3Nbd2ViUnRjU3RhY2tJZF0uc3RhY2spIHtcblx0XHRcdFx0d2VicnRjU3RhY2tzW3dlYlJ0Y1N0YWNrSWRdLnN0YWNrLm11dGVWaWRlbygpO1xuXHRcdFx0fSAgZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUud2FybihgKFJlYWNoU0RLOjp3ZWJydGNtbmdyOjptdXRlQXVkaW9XZWJydGNTdGFjaykgd2VicnRjU3RhY2s9JHt3ZWJSdGNTdGFja0lkfSBub3QgZm91bmRgKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc29sZS53YXJuKGAoUmVhY2hTREs6OndlYnJ0Y21uZ3I6Om11dGVBdWRpb1dlYnJ0Y1N0YWNrKSB2aXJ0dWFsV2VicnRjU3RhY2tJZD0ke3ZpcnR1YWxXZWJydGNTdGFja0lkfSBub3QgZm91bmRgKTtcblx0XHR9XG5cblxuXHR9XG5cblx0LyoqXG5cdCAqIFZpZGVvIHVubXV0ZSB0aGUgd2VicnRjIHBlZXJjb25uZWN0aW9uXG5cdCAqIEBwYXJhbSB2aXJ0dWFsV2VicnRjU3RhY2tJZCAtIFRoZSBXZWJSVEMgc3RhY2sgSUQgdG8gdW5tdXRlXG5cdCAqL1xuXHRmdW5jdGlvbiAgX3VubXV0ZVZpZGVvV2VicnRjU3RhY2sgKHZpcnR1YWxXZWJydGNTdGFja0lkKSB7XG5cdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6d2VicnRjbW5ncjo6X3VubXV0ZUF1ZGlvV2VicnRjU3RhY2spIHZpcnR1YWxXZWJydGNTdGFja0lkPSR7dmlydHVhbFdlYnJ0Y1N0YWNrSWR9YCk7XG5cblx0XHRpZiAodmlydHVhbFdlYnJ0Y1N0YWNrcyAmJiB2aXJ0dWFsV2VicnRjU3RhY2tzW3ZpcnR1YWxXZWJydGNTdGFja0lkXSAmJiB2aXJ0dWFsV2VicnRjU3RhY2tzW3ZpcnR1YWxXZWJydGNTdGFja0lkXS53ZWJSdGNTdGFja0lkKSB7XG5cdFx0XHRjb25zdCB3ZWJSdGNTdGFja0lkID0gdmlydHVhbFdlYnJ0Y1N0YWNrc1t2aXJ0dWFsV2VicnRjU3RhY2tJZF0ud2ViUnRjU3RhY2tJZDtcblx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OndlYnJ0Y21uZ3I6Ol91bm11dGVBdWRpb1dlYnJ0Y1N0YWNrKSB2aXJ0dWFsV2VicnRjU3RhY2tJZD0ke3ZpcnR1YWxXZWJydGNTdGFja0lkfSwgd2ViUnRjU3RhY2tJZD0ke3dlYlJ0Y1N0YWNrSWR9YCk7XG5cdFx0XHRpZiAod2VicnRjU3RhY2tzICYmIHdlYnJ0Y1N0YWNrc1t3ZWJSdGNTdGFja0lkXSAmJiB3ZWJydGNTdGFja3Nbd2ViUnRjU3RhY2tJZF0uc3RhY2spIHtcblx0XHRcdFx0d2VicnRjU3RhY2tzW3dlYlJ0Y1N0YWNrSWRdLnN0YWNrLnVubXV0ZVZpZGVvKCk7XG5cdFx0XHR9ICBlbHNlIHtcblx0XHRcdFx0Y29uc29sZS53YXJuKGAoUmVhY2hTREs6OndlYnJ0Y21uZ3I6Ol91bm11dGVBdWRpb1dlYnJ0Y1N0YWNrKSB3ZWJydGNTdGFjaz0ke3dlYlJ0Y1N0YWNrSWR9IG5vdCBmb3VuZGApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLndhcm4oYChSZWFjaFNESzo6d2VicnRjbW5ncjo6X3VubXV0ZUF1ZGlvV2VicnRjU3RhY2spIHZpcnR1YWxXZWJydGNTdGFja0lkPSR7dmlydHVhbFdlYnJ0Y1N0YWNrSWR9IG5vdCBmb3VuZGApO1xuXHRcdH1cblxuXHR9XG5cblx0cmV0dXJuIHtcblxuXHRcdC8qKlxuXHRcdCAqIENyZWF0ZXMgYSBXZWJSVEMgb2JqZWN0XG5cdFx0ICogQHBhcmFtIHBfVmlkIC0gdGhlIHZpZGVvIGNvbnRhaW5lciBsaW5rZWQgdG8gdGhlIHBlZXJjb25uZWN0aW9uXG5cdFx0ICogQHBhcmFtIHBfcmVtb3RlQXBwSW5zdElkIC0gdGhlIHJlbW90ZSBhcHBsaWNhdGlvbiBpbnN0YW5jZSBpZGVudGlmaWVyXG5cdFx0ICogQHBhcmFtIHBfb25DbG9zZUNiIC0gQSBjYWxsYmFjayB0byB0cmlnZ2VyIHdoZW4gdGhlIGNvbm5lY3Rpb24gaXMgY2xvc2VkXG5cdFx0ICogQHBhcmFtIHBfaXNQdWJsaXNoIC0gdHJ1ZSBpZiBpdCdzIGEgcGVlcmNvbm5lY3Rpb24gcmVsYXRlZCB0byBhIHB1Ymxpc2hTdHJlYW0sIGZhbHNlIGlmIGl0J3MgcmVsYXRhdGVkIHRvIGEgc3Vic2NyaWJlXG5cdFx0ICogQHBhcmFtIHBfYWN0aW9uVHlwZSAtIFRoZSBhY3Rpb24gdHlwZSAoYXVkaW8sIHZpZGVvLCBhdWRpby12aWRlbylcblx0XHQgKiBAcGFyYW0gcF9wZWVyY29JZCAtIFRoZSBQZWVyQ29ubmVjdGlvbiBJZCBpbiB0aGUgd2VicnRjIG5vZGVcblx0XHQgKi9cblx0XHRjcmVhdGVXZWJydGM6IChwX1ZpZCwgcF9yZW1vdGVBcHBJbnN0SWQsIHBfb25DbG9zZUNiLCBwX2lzUHVibGlzaCwgcF9hY3Rpb25UeXBlLCBwX3BlZXJjb0lkLCBwX211dGVkQXVkaW8sIHBfbXV0ZVZpZGVvLCBwX2dldFN0cmVhbUNiKSA9PiB7XG5cdFx0XHRyZXR1cm4gIF9jcmVhdGVXZWJydGMuYmluZCh0aGlzKShwX1ZpZCwgcF9yZW1vdGVBcHBJbnN0SWQsIHBfb25DbG9zZUNiLCBwX2lzUHVibGlzaCwgcF9hY3Rpb25UeXBlLCBwX3BlZXJjb0lkLCBwX211dGVkQXVkaW8sIHBfbXV0ZVZpZGVvLCBwX2dldFN0cmVhbUNiKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogQ2xvc2UgV2ViUlRDIGZlYXR1cmVzIDogZGV0YWNoIG1lZGlhIHN0cmVhbXMgYW5kIHVucHVibGlzaCBzdGFja3MuXG5cdFx0ICogQHBhcmFtIGlkIC1cblx0XHQgKiBAcGFyYW0gcF9pc1VuUHVibGlzaFxuXHRcdCAqIEBwYXJhbSBjYWxsYmFjayAtXG5cdFx0ICovXG5cdFx0Y2xvc2VXZWJydGM6IF9jbG9zZVdlYnJ0YyxcblxuXHRcdC8qKlxuXHRcdCAqIENsZWFycyBhIHNwZWNpZmljYWwgV2ViUlRDIHN0YWNrIGJ5IHNldHRpbmcgaXQgdG8gbnVsbC5cblx0XHQgKiBAcGFyYW0gd2VicnRjU3RhY2tJZCAtIFRoZSBXZWJSVEMgc3RhY2sgSUQgdG8gY2xlYXJcblx0XHQgKi9cblx0XHRjbGVhcldlYnJ0Y1N0YWNrczogX2NsZWFyV2VicnRjU3RhY2tzLFxuXHRcdC8qKlxuXHRcdCAqIGF1ZGlvIG11dGUgdGhlIHdlYnJ0YyBwZWVyY29ubmVjdGlvblxuXHRcdCAqIEBwYXJhbSB2aXJ0dWFsV2VicnRjU3RhY2tJZCAtIFRoZSBXZWJSVEMgc3RhY2sgSUQgdG8gbXV0ZVxuXHRcdCAqL1xuXHRcdG11dGVBdWRpb1dlYnJ0Y1N0YWNrOiBfbXV0ZUF1ZGlvV2VicnRjU3RhY2ssXG5cdFx0LyoqXG5cdFx0ICogIGF1ZGlvIHVubXV0ZSB0aGUgd2VicnRjIHBlZXJjb25uZWN0aW9uXG5cdFx0ICogQHBhcmFtIHZpcnR1YWxXZWJydGNTdGFja0lkIC0gVGhlIFdlYlJUQyBzdGFjayBJRCB0byB1bm11dGVcblx0XHQgKi9cblx0XHR1bm11dGVBdWRpb1dlYnJ0Y1N0YWNrOiBfdW5tdXRlQXVkaW9XZWJydGNTdGFjayxcblx0XHQvKipcblx0XHQgKiB2aWRlbyBtdXRlIHRoZSB3ZWJydGMgcGVlcmNvbm5lY3Rpb25cblx0XHQgKiBAcGFyYW0gdmlydHVhbFdlYnJ0Y1N0YWNrSWQgLSBUaGUgV2ViUlRDIHN0YWNrIElEIHRvIG11dGVcblx0XHQgKi9cblx0XHRtdXRlVmlkZW9XZWJydGNTdGFjazogX211dGVWaWRlb1dlYnJ0Y1N0YWNrLFxuXHRcdC8qKlxuXHRcdCAqIHZpZGVvIHVubXV0ZSB0aGUgd2VicnRjIHBlZXJjb25uZWN0aW9uXG5cdFx0ICogQHBhcmFtIHZpcnR1YWxXZWJydGNTdGFja0lkIC0gVGhlIFdlYlJUQyBzdGFjayBJRCB0byB1bm11dGVcblx0XHQgKi9cblx0XHR1bm11dGVWaWRlb1dlYnJ0Y1N0YWNrOiBfdW5tdXRlVmlkZW9XZWJydGNTdGFja1xuXHR9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgd2VicnRjbW5ncjtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy93ZWJydGNtbmdyLmpzXG4gKiovIiwiLyoqXG4gKiBAZmlsZSB3ZWJydGMuanMgLSBKUyBmaWxlIHVzZWQgZm9yIFdlYlJUQyBhc3BlY3RzXG4gKiBAYXV0aG9yIFdlYmNvbVxuICovXG5cbi8qZXNsaW50IGNvbXBsZXhpdHk6MSwgbWF4LXN0YXRlbWVudHM6IDEsIG1heC1sZW46IDEsIG1heC1wYXJhbXM6IDEsIHJlcXVpcmUtanNkb2M6IDEqL1xuXG5pbXBvcnQgYWN0aW9ucyBmcm9tICcuL2FjdGlvbnMnO1xuaW1wb3J0IGxvY2Fsc3RyZWFtIGZyb20gJy4vbG9jYWxzdHJlYW0nO1xuaW1wb3J0IHZhcnMgZnJvbSAnLi9hY3Rpb25zJztcblxuLyoqXG4gKiBJQ0UgY29ubmVjdGlvbiBzdGF0dXMgOiBkaXNjb25uZWN0ZWRcbiAqIEBjb25zdGFudFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuY29uc3QgSUNFX0NPTk5FQ1RJT05fU1RBVEVfRElTQ09OTkVDVEVEID0gJ2Rpc2Nvbm5lY3RlZCc7XG5cbi8qKlxuICogSUNFIGNvbm5lY3Rpb24gc3RhdHVzIDogY29ubmVjdGVkXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmNvbnN0IElDRV9DT05ORUNUSU9OX1NUQVRFX0NPTk5FQ1RFRD0gJ2Nvbm5lY3RlZCc7XG5cbi8qKlxuICogSUNFIGNvbm5lY3Rpb24gc3RhdHVzIDogY29tcGxldGVkXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmNvbnN0IElDRV9DT05ORUNUSU9OX1NUQVRFX0NPTVBMRVRFRD0gJ2NvbXBsZXRlZCc7XG5cbi8qKlxuICogSUNFIGNvbm5lY3Rpb24gc3RhdHVzIDogY2hlY2tpbmdcbiAqIEBjb25zdGFudFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuY29uc3QgSUNFX0NPTk5FQ1RJT05fU1RBVEVfQ0hFQ0tJTkc9ICdjaGVja2luZyc7XG5cbi8qKlxuICogSUNFIGNvbm5lY3Rpb24gc3RhdHVzIDogY2xvc2VkXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmNvbnN0IElDRV9DT05ORUNUSU9OX1NUQVRFX0NMT1NFRD0gJ2Nsb3NlZCc7XG5cbi8qKlxuICogSUNFIGNvbm5lY3Rpb24gc3RhdHVzIDogZmFpbGVkXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmNvbnN0IElDRV9DT05ORUNUSU9OX1NUQVRFX0ZBSUxFRD0gJ2ZhaWxlZCc7XG5cbi8qKlxuICogSUNFIGNvbm5lY3Rpb24gc3RhdHVzIDogYW5vdGhlciBzdGF0dXNcbiAqIEBjb25zdGFudFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuY29uc3QgSUNFX0NPTk5FQ1RJT05fU1RBVEVfT1RIRVI9ICdvdGhlcic7XG5cblxuLyoqXG4gKiBUaGUgZGVmYXVsdCBJQ0UgY29uZmlndXJhdGlvbiBmb3IgVFVSTiBhbmQgU1RVTiBzZXJ2ZXJzIHRvIHVzZSBmb3IgV2ViUlRDIGNvbW11bmljYXRpb254XG4gKiBOQiA6IHRoZXNlIGNvbmZpZ3VyYXRpb24gd2lsbCBiZSBvdmVyd3JpdGVuIGJ5IHRoZSBjb25maWd1cmF0aW9uIG9uIHRoZSBXZWJjb20gc2VydmVyIGlmIHByZXNlbnRcbiAqIEBjb25zdGFudFxuICogQHR5cGUge2pzb259XG4gKi9cblxuY29uc3QgREVGQVVMVF9JQ0VfQ09ORklHID0ge1xuXHRpY2VTZXJ2ZXJzOiBbXG5cdFx0e1xuXHRcdFx0dXJsOiAndHVybnM6dHVybjEud2ViY29tLm9yYW5nZS5jb206NDQzJyxcblx0XHRcdHVzZXJuYW1lOiAnYWRtaW4nLFxuXHRcdFx0Y3JlZGVudGlhbDogJ3dlYmNvbTEyMzQnXG5cdFx0fSxcblx0XHR7XG5cdFx0XHR1cmw6ICd0dXJuOnR1cm4yLndlYmNvbS5vcmFuZ2UuY29tOjQ0MycsXG5cdFx0XHR1c2VybmFtZTogJ2FkbWluJyxcblx0XHRcdGNyZWRlbnRpYWw6ICd3ZWJjb20xMjM0J1xuXHRcdH0sXG5cdFx0e1xuXHRcdFx0dXJsOiAndHVybnM6dHVybjMud2ViY29tLm9yYW5nZS5jb206NDQzJyxcblx0XHRcdHVzZXJuYW1lOiAnYWRtaW4nLFxuXHRcdFx0Y3JlZGVudGlhbDogJ3dlYmNvbTEyMzQnXG5cdFx0fVxuXHRdXG59O1xuXG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZGVzY3JpcHRpb24gV2ViUlRDIGNvbm5lY3Rpb24gb2JqZWN0LiBNYW5hZ2VzIGEgV2ViUlRDIGNvbm5lY3Rpb24sIGkuZS4gb25lIHBlZXJjb25uZWN0aW9uXG4gKiBAcGFyYW0gcF93ZWJydGNtbmdyIC0gUmVmZXJlbmNlIHRvIFdlYlJUQ01hbmFnZXJcbiAqIEBwYXJhbSBwX2lzUHVibGlzaCAtIEZsYWcgaW5kaWNhdGluZyBpZiB0aGVyZSBpcyBhIHBsdWJsaXNoIGFjdGlvblxuICogQHBhcmFtIHBfbG9jYWxEYXRhUmVmIC0gVGhlIGxvY2FsIGRhdGEgcmVmXG4gKiBAcGFyYW0gcF9yZW1vdGVEYXRhUmVmIC0gVGhlIHJlbW90ZSBkYXRhIHJlZlxuICogQHBhcmFtIHBfd2VicnRjU3RhY2tJZCAtIFRoZSBzdGFjayBJRCBpbiB1c2VcbiAqIEBwYXJhbSBwX2FjdGlvblR5cGUgLVxuICogQHBhcmFtIHBfbXV0ZUF1ZGlvIC0gb3B0aW9uYWwgLSBpZiB0cnVlIHBlZXJjb25uZWN0aW9uIHdpbGwgYmUgY3JlYXRlZCB3aXRoIGF1ZGlvIG11dGVkXG4gKiBAcGFyYW0gcF9tdXRlVmlkZW8gLSBvcHRpb25hbCAtIGlmIHRydWUgcGVlcmNvbm5lY3Rpb24gd2lsbCBiZSBjcmVhdGVkIHdpdGggdmlkZW8gbXV0ZWRcblxuICovXG5jb25zdCB3ZWJydGMgPSBmdW5jdGlvbiAocF93ZWJydGNtbmdyLCBwX2lzUHVibGlzaCwgcF9sb2NhbERhdGFSZWYsIHBfcmVtb3RlRGF0YVJlZiwgcF93ZWJydGNTdGFja0lkLCBwX2FjdGlvblR5cGUsIHBfbXV0ZUF1ZGlvLCBwX211dGVWaWRlbykge1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gV2ViUlRDIG1hbmFnZXIgb2JqZWN0LiBVc2VmdWwgdG8gY2xlYXIgd2VicnRjIHN0YWNrXG5cdCAqL1xuXHRjb25zdCB3ZWJydGNtbmdyID0gcF93ZWJydGNtbmdyO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFRoZSBXZWJSVEMgc3RhY2sgaWRlbnRpZmllciwgaGVyZSB0aGUgY3VycmVudCB0aW1lc3RhbXBcblx0ICovXG5cdGNvbnN0IHN0YWNrSWQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBJZiB0aGVyZSBpcyBhIHB1Ymxpc2ggYWN0aW9uIG9yIG5vdFxuXHQgKi9cblx0Y29uc3QgaXNQdWJsaXNoID0gcF9pc1B1Ymxpc2g7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gVGhlIHBlZXIgY29ubmVjdGlvblxuXHQgKi9cblx0bGV0IHBjID0gbnVsbDtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBUaGUgbG9jYWwgZGF0YSByZWZcblx0ICovXG5cdGNvbnN0IGxvY2FsRGF0YVJlZiA9IHBfbG9jYWxEYXRhUmVmO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFRoZSByZW10b2UgZGF0YSByZWZcblx0ICovXG5cdGNvbnN0IHJlbW90ZURhdGFSZWYgPSBwX3JlbW90ZURhdGFSZWY7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQSBjYWxsYmFjayB0byB0cmlnZ2VyIHdoZXJlIGEgbGlzdCBvZiBJQ0UgY2FuZGlkYXRlcyBpcyBwcm92aWRlZFxuXHQgKi9cblx0bGV0IGljZUNhbmRpZGF0ZXNMaXN0Q2IgPSBudWxsO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIEEgY2FsbGJhY2sgdHJpZ2dlcmVkIHdoZW4gYSBTRFAgb2ZmZXIgaGFzIGJlZW4gcmVjZWl2ZWRcblx0ICovXG5cdGxldCBzZHBPZmZlckNiID0gbnVsbDtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBBIGNhbGxiYWNrIHRyaWdnZXJlZCB3aGVuIGEgU0RQIGFuc3dlciBoYXMgYmVlbiByZWNlaXZlZFxuXHQgKi9cblx0bGV0IHNkcEFuc3dlckNiID0gbnVsbDtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBBIGNhbGxiYWNrIHRyaWdnZXJlZCBvbiBhIHJlbW90ZSBkYXRhcmVmIGV2ZW50XG5cdCAqL1xuXHRsZXQgcmVtb3RlZGF0YXJlZkNiID0gbnVsbDtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBBIGNhbGxiYWNrIHRyaWdnZXJlZCB3aGVuIHRoZSBjb25uZWN0aW9uIGlzIGNsb3Npbmdcblx0ICovXG5cdGxldCBvbkNsb3NlQ2IgPSBudWxsO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFRoZSBXZWJSVEMgc3RhY2sgSURcblx0ICovXG5cdGNvbnN0IHdlYnJ0Y1N0YWNrSWQgPSBwX3dlYnJ0Y1N0YWNrSWQ7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gVGhlIGFjdGlvbiB0eXBlIHRvIHByb2Nlc3Ncblx0ICovXG5cdGNvbnN0IGFjdGlvblR5cGUgPSBwX2FjdGlvblR5cGU7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gVGhlIGNvbmZpZ3VyYXRpb25cblx0ICovXG5cdGxldCBjb25maWcgPSBudWxsO1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQSBwZWVyIGNvbm5lY3Rpb24gb2JqZWN0LCBmb3IgY3Jvc3MgYnJvd3NlcnMgY29tcGF0aWJpbGl0aWVzXG5cdCAqL1xuXHRsZXQgbXlQZWVyQ29ubmVjdGlvbiA9IG51bGw7XG5cdC8vdmFyIG15Q3JlYXRlT2JqZWN0VVJMID0gbnVsbDtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBBbiBSVEMgc2Vzc2lvbiBkZXNjcmlwdGlvbiwgZm9yIGNyb3NzIGJyb3dzZXJzIGNvbXBhdGliaWxpdGllc1xuXHQgKi9cblx0bGV0IG15UlRDU2Vzc2lvbkRlc2NyaXB0aW9uID0gbnVsbDtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBBbiBSVEMgSUNFIGNhbmRpZGF0ZSwgZm9yIGNyb3NzIGJyb3dzZXJzIGNvbXBhdGliaWxpdGllc1xuXHQgKi9cblx0bGV0IG15UlRDSWNlQ2FuZGlkYXRlID0gbnVsbDtcblxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIEFuIGFycmF5IGNvbnRhaW5pbmcgbG9jYWwgc3RyZWFtc1xuXHQgKi9cblx0Y29uc3QgbG9jYWxTdHJlYW1zID0gW107XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQW4gYXJyYXkgY29udGFpbmluZyByZW1vdGUgc3RyZWFtc1xuXHQgKi9cblx0Y29uc3QgcmVtb3RlU3RyZWFtcyA9IFtdO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIEFuIGFycmF5IGNvbnRhaW5pbmcgcmVtb3RlIHN0cmVhbXMgQ0Jcblx0ICovXG5cdGxldCByZW1vdGVTdHJlYW1zQ2IgPSBbXTtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBUaGUgcmVjZWl2ZWQgc3RyZWFtXG5cdCAqL1xuXHRsZXQgcmVjZWl2ZWRTdHJlYW0gPSBudWxsO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFRoZSBzZW50IHN0cmVhbVxuXHQgKi9cblx0bGV0IHNlbnRTdHJlYW0gPSBudWxsO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIEZsYWcgaW5kaWNhdGluZyBpZiB0aGUgY29ubmVjdGlvbiBpcyBjbG9zZWRcblx0ICovXG5cdGxldCBpc0Nsb3NlZCA9IGZhbHNlO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIEZsYWcgaW5kaWNhdGluZyBpZiB0aGUgY2xvc2UgcHJvY2VzcyBpcyBvbiBnb2luZ1xuXHQgKi9cblx0bGV0IGNsb3NlSW5Qcm9ncmVzcyA9IGZhbHNlO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFRoZSBJQ0UgY29ubmVjdGlvbiBzdGF0ZVxuXHQgKi9cblx0bGV0IGljZUNvbm5lY3Rpb25TdGF0ZSA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQW5vdGhlciBjYWxsYmFjayB0byB0cmlnZ2VyIHdoZW4gdGhlIGNvbm5lY3Rpb24gc2hvdWxkIGJlIGNsb3NlZFxuXHQgKi9cblx0bGV0IG9uQ2xvc2VDYjIgPSBudWxsO1xuXG5cdGxldCBpc0F1ZGlvTXV0ZSA9IGZhbHNlO1xuXG5cdGxldCBpc1ZpZGVvTXV0ZSA9IGZhbHNlO1xuXG5cblx0Y29uc29sZS5sb2coJyhSZWFjaFNESzo6d2VicnRjOjopc3RhY2tJZD0ke3N0YWNrSWR9IGlzUHVibGlzaD0ke2lzUHVibGlzaH0sbG9jYWxEYXRhUmVmPSR7bG9jYWxEYXRhUmVmfSxyZW1vdGVEYXRhUmVmPSR7cmVtb3RlRGF0YVJlZn0pJyk7XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBBIERhdGFncmFtIFRyYW5zcG9ydCBMYXllciBTZWN1cml0eSAoRFRMUykga2V5IGFncmVlbWVudFxuXHQgKi9cblx0Y29uc3QgRHRsc1NydHBLZXlBZ3JlZW1lbnQgPSB7XG5cdFx0RHRsc1NydHBLZXlBZ3JlZW1lbnQ6IHRydWVcblx0fTtcblxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIC0gU29tZSBvcHRpb25zXG5cdCAqL1xuXHRjb25zdCBvcHRpb25hbCA9IHtcblx0XHRvcHRpb25hbDogW0R0bHNTcnRwS2V5QWdyZWVtZW50XVxuXHR9O1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gVGhlIHB1Ymxpc2hlciBtZWRpYSBjb25zdHJhaW50cyBhcyBhIEpTT04gYXJyYXlcblx0ICovXG5cdGNvbnN0IHB1Ymxpc2hlck1lZGlhQ29uc3RyYWludHMgPSB7XG5cdFx0J21hbmRhdG9yeSc6IHtcblx0XHRcdCdPZmZlclRvUmVjZWl2ZUF1ZGlvJzogZmFsc2UsXG5cdFx0XHQnT2ZmZXJUb1JlY2VpdmVWaWRlbyc6IGZhbHNlXG5cdFx0fVxuXHR9O1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gVGhlIHN1YnNjcmliZXIgbWVkaWEgY29uc3RyYWludHMgYXMgYSBKU09OIGFycmF5XG5cdCAqL1xuXHRjb25zdCBzdWJzY3JpYmVyTWVkaWFDb25zdHJhaW50cyA9IHtcblx0XHQnbWFuZGF0b3J5Jzoge1xuXHRcdFx0J09mZmVyVG9SZWNlaXZlQXVkaW8nOiB0cnVlLFxuXHRcdFx0J09mZmVyVG9SZWNlaXZlVmlkZW8nOiB0cnVlXG5cdFx0fVxuXHR9O1xuXG5cdC8qKlxuXHQgKiBDYWxsYmFjayB0byB0cmlnZ2VyIHdoZW4gYW4gZXJyb3Igb2NjdXJzXG5cdCAqIEBwYXJhbSBlIC0gVGhlIGVycm9yXG5cdCAqL1xuXHRmdW5jdGlvbiBvbkVycm9yKGUpIHtcblx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjp3ZWJydGM6OilzdGFja0lkPSR7c3RhY2tJZH1lcnJvcj0ke2V9YCk7XG5cdFx0Y29uc29sZS5kaXIoZSk7XG5cdH1cblxuXHQvKipcblx0ICogR2V0cyB0aGUgSUNFIHNlcnZlcnMgY29uZmlndXJhdGlvblxuXHQgKiBAcGFyYW0gY2FsbGJhY2tPayAtIFRoZSBjYWxsYmFjayB0byB0cmlnZ2VyIHdoZW4gdGhlIGNvbmZpZyByZXRyaWV2ZW1lbnQgaXMgZG9uZVxuXHQgKiBAcGFyYW0gY2FsbGJhY2tLbyAtIFRoZSBjYWxsYmFjayB0byB0cmlnZ2VyIHdoZW4gYW4gZXJyb3Igb2NjdXJzXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRJY2VTZXJ2ZXJzQ29uZmlnRnJvbVNlcnZlcihjYWxsYmFja09rLCBjYWxsYmFja0tvKSB7XG5cdFx0Y29uc29sZS5sb2coJ1JlYWNoU0RLOjp3ZWJydGM6OmdldEljZVNlcnZlcnNDb25maWdGcm9tU2VydmVyJyk7XG5cdFx0aWYgKGxvY2FsRGF0YVJlZikge1xuXHRcdFx0bG9jYWxEYXRhUmVmLnJvb3QoKS5jaGlsZCgnY29uZmlnJykub25jZSgndmFsdWUnLCAoc25hcHNob3QpID0+IHtcblx0XHRcdFx0Y29uc3QgX2NvbmZpZyA9IHNuYXBzaG90ID8gc25hcHNob3QudmFsKCkgOiBudWxsO1xuXHRcdFx0XHRpZiAoX2NvbmZpZykge1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgY2FsbGJhY2tPayA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRjYWxsYmFja09rKF9jb25maWcpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmICh0eXBlb2YgY2FsbGJhY2tLbyA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2tLbygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCAoZXJyb3IpID0+IHtcblx0XHRcdFx0aWYgKHR5cGVvZiBjYWxsYmFja0tvID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRjYWxsYmFja0tvKGVycm9yKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIGlmICh0eXBlb2YgY2FsbGJhY2tLbyA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRjYWxsYmFja0tvKCk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFN0YXJ0cyB0aGUgbGlzdGluZyB0byBhIHJlbW90ZSBJQ0UgY2FuZGlkYXRlIGJ5IGVuYWJsaW5nIHRoZSBkZWRpY2F0ZWQgY2FsbGJhY2tcblx0ICogZm9yIHRoZSBcImNoaWxkX2FkZGVkXCIgZXZlbnQgb24gdGhlIFwiaWNlQ2FuZGlkYXRlc0xpc3RcIiBub2RlIGluIHRoZSBkYXRhYmFzZS5cblx0ICovXG5cdGZ1bmN0aW9uIHN0YXJ0TGlzdGVuaW5nVG9SZW1vdGVJY2VDYW5kaWRhdGUoKSB7XG5cdFx0cmVtb3RlRGF0YVJlZi5jaGlsZCgnaWNlQ2FuZGlkYXRlc0xpc3QnKS5vbignY2hpbGRfYWRkZWQnLCBpY2VDYW5kaWRhdGVzTGlzdENiKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBTdG9wcyB0aGUgbGlzdGVuaW5nIHRvIHJlbW90ZSBJQ0UgY2FuZGlzZGF0ZSBieSBkaXNhYmxpbmcgdGhlIGRlZGljYXRlZCBjYWxsYmFja1xuXHQgKiBmb3IgdGhlIFwiY2hpbGRfYWRkZWRcIiBldmVudCBvbiB0aGUgXCJpY2VDYW5kaWRhdGVzTGlzdFwiIG5vZGUgaW4gdGhlIGRhdGFiYXNlLlxuXHQgKi9cblx0ZnVuY3Rpb24gc3RvcExpc3RlbmluZ1RvUmVtb3RlSWNlQ2FuZGlkYXRlKCkge1xuXHRcdHJlbW90ZURhdGFSZWYuY2hpbGQoJ2ljZUNhbmRpZGF0ZXNMaXN0Jykub2ZmKCdjaGlsZF9hZGRlZCcsIGljZUNhbmRpZGF0ZXNMaXN0Q2IpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEVuYWJsZS9EaXNhYmxlIHRyYWNrc1xuXHQgKiBAcGFyYW0gZW5hYmxlZCB0cnVlIHRvIGVuYWJsZSB0cmFja3Ncblx0ICogQHBhcmFtIHRyYWNrcyB0aGUgdHJhY2tzXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBfbXV0ZVRyYWNrcygvKkJvb2xlYW4qL2VuYWJsZWQsIC8qQXJyYXkqL3RyYWNrcykge1xuXHRcdGlmKHRyYWNrcykge1xuXHRcdFx0dHJhY2tzLmZvckVhY2goKHRyYWNrKSA9PiB7XG5cdFx0XHRcdGlmKHRyYWNrKSB7XG5cdFx0XHRcdFx0dHJhY2suZW5hYmxlZCA9IGVuYWJsZWQ7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBNdXRlL1VuTXV0ZSBhdWRpbyB0cmFja3Ncblx0ICogQHBhcmFtIG11dGUgdHJ1ZSB0byBtdXRlIHRyYWNrc1xuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gX211dGVBdWRpb1RyYWNrcyhtdXRlKSB7XG5cdFx0aXNBdWRpb011dGUgPSBtdXRlO1xuXHRcdGNvbnN0IHN0cmVhbSA9IGlzUHVibGlzaCAmJiBzZW50U3RyZWFtID8gc2VudFN0cmVhbSA6ICghaXNQdWJsaXNoICYmIHJlY2VpdmVkU3RyZWFtID8gcmVjZWl2ZWRTdHJlYW0gOiBudWxsKTtcblx0XHRpZihzdHJlYW0pe1xuXHRcdFx0X211dGVUcmFja3MoIWlzQXVkaW9NdXRlLCBzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIE11dGUgYXVkaW8gdHJhY2tzXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBfbXV0ZUF1ZGlvKCkge1xuXHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OndlYnJ0Yzo6X211dGVBdWRpbylzdGFja0lkPSR7c3RhY2tJZH1gKTtcblx0XHRfbXV0ZUF1ZGlvVHJhY2tzKHRydWUpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVubXV0ZSBhdWRpbyB0cmFja3Ncblx0ICogQHByaXZhdGVcblx0ICovXG5cdGZ1bmN0aW9uIF91bm11dGVBdWRpbygpIHtcblx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjp3ZWJydGM6Ol91bm11dGVBdWRpbylzdGFja0lkPSR7c3RhY2tJZH1gKTtcblx0XHRfbXV0ZUF1ZGlvVHJhY2tzKGZhbHNlKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBNdXRlL1VuTXV0ZSB2aWRlbyB0cmFja3Ncblx0ICogQHBhcmFtIG11dGUgdHJ1ZSB0byBtdXRlIHRyYWNrc1xuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gX211dGVWaWRlb1RyYWNrcyhtdXRlKSB7XG5cdFx0aXNWaWRlb011dGUgPSBtdXRlO1xuXHRcdGNvbnN0IHN0cmVhbSA9IGlzUHVibGlzaCAmJiBzZW50U3RyZWFtID8gc2VudFN0cmVhbSA6ICghaXNQdWJsaXNoICYmIHJlY2VpdmVkU3RyZWFtID8gcmVjZWl2ZWRTdHJlYW0gOiBudWxsKTtcblx0XHRpZihzdHJlYW0pe1xuXHRcdFx0X211dGVUcmFja3MoIWlzQXVkaW9NdXRlLCBzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIE11dGUgdmlkZW8gdHJhY2tzXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBfbXV0ZVZpZGVvKCkge1xuXHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OndlYnJ0Yzo6X211dGVWaWRlbylzdGFja0lkPSR7c3RhY2tJZH1gKTtcblx0XHRfbXV0ZVZpZGVvVHJhY2tzKHRydWUpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVubXV0ZSB2aWRlbyB0cmFja3Ncblx0ICogQHByaXZhdGVcblx0ICovXG5cdGZ1bmN0aW9uIF91bm11dGVWaWRlbygpIHtcblx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjp3ZWJydGM6Ol91bm11dGVWaWRlbylzdGFja0lkPSR7c3RhY2tJZH1gKTtcblx0XHRfbXV0ZVZpZGVvVHJhY2tzKGZhbHNlKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBJbml0aWFsaXplcyB0aGUgbG9jYWwgc3RyZWFtXG5cdCAqIEBwYXJhbSBjYWxsYmFjayAtIEEgY2FsbGJhY2sgdG8gdHJpZ2dlciB3aGVuIHRoZSBpbml0aWFsaXNhdGlvbiBpcyBkb25lXG5cdCAqL1xuXHRmdW5jdGlvbiBfaW5pdGxvY2FsU3RyZWFtKGNhbGxiYWNrKSB7XG5cdFx0Ly8gZ2V0IGxvY2FsIHZpZGVvIHN0cmVhbSBhbmQgcmVuZGVycyB0byBsb2NhbFZpZFxuXHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OndlYnJ0Yzo6X2luaXRsb2NhbFN0cmVhbSlzdGFja0lkPSR7c3RhY2tJZH0gZ2V0IGxvY2FsIHZpZGVvIHN0cmVhbSBhbmQgcmVuZGVycyB0byBsb2NhbCB2aWRlb2ApO1xuXHRcdGlmIChhY3Rpb25UeXBlKSB7XG5cdFx0XHRsZXQgaW5pdGxvY2FsU3RyZWFtO1xuXHRcdFx0aWYgKGFjdGlvblR5cGUgPT09IHZhcnMuQUNUSU9OX1RZUEVfVklERU8pIHtcblx0XHRcdFx0aW5pdGxvY2FsU3RyZWFtID0gKCkgPT4ge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCcoUmVhY2hTREs6OndlYnJ0Yzo6X2luaXRsb2NhbFN0cmVhbSlpbml0bG9jYWxTdHJlYW1fdmlkZW8nKTtcblx0XHRcdFx0XHRpZiAobG9jYWxzdHJlYW0uZ2V0VmlkZW9TdHJlYW0oKSAmJiBsb2NhbHN0cmVhbS5nZXRWaWRlb1N0cmVhbSgpLmNsb25lICYmIHR5cGVvZiBsb2NhbHN0cmVhbS5nZXRWaWRlb1N0cmVhbSgpLmNsb25lID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdHNlbnRTdHJlYW0gPSBsb2NhbHN0cmVhbS5nZXRWaWRlb1N0cmVhbSgpLmNsb25lKCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHNlbnRTdHJlYW0gPSBsb2NhbHN0cmVhbS5nZXRWaWRlb1N0cmVhbSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoaXNBdWRpb011dGUpIHtcblx0XHRcdFx0XHRcdF9tdXRlQXVkaW8oKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGlzVmlkZW9NdXRlKSB7XG5cdFx0XHRcdFx0XHRfbXV0ZVZpZGVvKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHBjLmFkZFN0cmVhbShzZW50U3RyZWFtKTtcblx0XHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxvY2FsU3RyZWFtcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6d2VicnRjOjpfaW5pdGxvY2FsU3RyZWFtKXN0YWNrSWQ9JHtzdGFja0lkfSByZW5kZXJpbmcgbG9jYWwgdmlkZW8gdG8gJHtsb2NhbFN0cmVhbXNbaV0uaWR9YCk7XG5cdFx0XHRcdFx0XHRhdHRhY2hNZWRpYVN0cmVhbShsb2NhbFN0cmVhbXNbaV0sIGxvY2Fsc3RyZWFtLmdldFZpZGVvU3RyZWFtKCkpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChjYWxsYmFjayAmJiB0eXBlb2YgY2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0XHRcdGlmIChsb2NhbHN0cmVhbS5nZXRWaWRlb1N0cmVhbSgpKSB7XG5cdFx0XHRcdFx0aW5pdGxvY2FsU3RyZWFtKCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bG9jYWxzdHJlYW0uYWRkVmlkZW9MaXN0ZW5lcihpbml0bG9jYWxTdHJlYW0pO1xuXHRcdFx0XHRcdGxvY2Fsc3RyZWFtLmluaXRWaWRlbygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKGFjdGlvblR5cGUgPT09IHZhcnMuQUNUSU9OX1RZUEVfQVVESU8pIHtcblx0XHRcdFx0aW5pdGxvY2FsU3RyZWFtID0gKCkgPT4ge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCcoUmVhY2hTREs6OndlYnJ0Yzo6X2luaXRsb2NhbFN0cmVhbSlpbml0bG9jYWxTdHJlYW1fYXVkaW8nKTtcblx0XHRcdFx0XHRpZiAobG9jYWxzdHJlYW0uZ2V0QXVkaW9TdHJlYW0oKSAmJiBsb2NhbHN0cmVhbS5nZXRBdWRpb1N0cmVhbSgpLmNsb25lICYmIHR5cGVvZiBsb2NhbHN0cmVhbS5nZXRBdWRpb1N0cmVhbSgpLmNsb25lID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdHNlbnRTdHJlYW0gPSBsb2NhbHN0cmVhbS5nZXRBdWRpb1N0cmVhbSgpLmNsb25lKCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHNlbnRTdHJlYW0gPSBsb2NhbHN0cmVhbS5nZXRBdWRpb1N0cmVhbSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoaXNBdWRpb011dGUpIHtcblx0XHRcdFx0XHRcdF9tdXRlQXVkaW8oKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGlzVmlkZW9NdXRlKSB7XG5cdFx0XHRcdFx0XHRfbXV0ZVZpZGVvKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHBjLmFkZFN0cmVhbShzZW50U3RyZWFtKTtcblx0XHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxvY2FsU3RyZWFtcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6d2VicnRjOjpfaW5pdGxvY2FsU3RyZWFtKXN0YWNrSWQ9JHtzdGFja0lkfSByZW5kZXJpbmcgbG9jYWwgQXVkaW8gdG8gJHtsb2NhbFN0cmVhbXNbaV0uaWR9YCk7XG5cdFx0XHRcdFx0XHRhdHRhY2hNZWRpYVN0cmVhbShsb2NhbFN0cmVhbXNbaV0sIGxvY2Fsc3RyZWFtLmdldEF1ZGlvU3RyZWFtKCkpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChjYWxsYmFjayAmJiB0eXBlb2YgY2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0XHRcdGlmIChsb2NhbHN0cmVhbS5nZXRBdWRpb1N0cmVhbSgpKSB7XG5cdFx0XHRcdFx0aW5pdGxvY2FsU3RyZWFtKCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bG9jYWxzdHJlYW0uYWRkQXVkaW9MaXN0ZW5lcihpbml0bG9jYWxTdHJlYW0pO1xuXHRcdFx0XHRcdGxvY2Fsc3RyZWFtLmluaXRBdWRpbygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKGFjdGlvblR5cGUgPT09IGFjdGlvbnMuQUNUSU9OX1RZUEVfQVVESU9fVklERU8pIHtcblx0XHRcdFx0aW5pdGxvY2FsU3RyZWFtID0gKCkgPT4ge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCcoUmVhY2hTREs6OndlYnJ0Yzo6X2luaXRsb2NhbFN0cmVhbSlpbml0bG9jYWxTdHJlYW1fYXVkaW9fdmlkZW8nKTtcblx0XHRcdFx0XHRpZiAobG9jYWxzdHJlYW0uZ2V0QXVkaW9WaWRlb1N0cmVhbSgpICYmIGxvY2Fsc3RyZWFtLmdldEF1ZGlvVmlkZW9TdHJlYW0oKS5jbG9uZSAmJiB0eXBlb2YgbG9jYWxzdHJlYW0uZ2V0QXVkaW9WaWRlb1N0cmVhbSgpLmNsb25lID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdHNlbnRTdHJlYW0gPSBsb2NhbHN0cmVhbS5nZXRBdWRpb1ZpZGVvU3RyZWFtKCkuY2xvbmUoKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0c2VudFN0cmVhbSA9IGxvY2Fsc3RyZWFtLmdldEF1ZGlvVmlkZW9TdHJlYW0oKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGlzQXVkaW9NdXRlKSB7XG5cdFx0XHRcdFx0XHRfbXV0ZUF1ZGlvKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChpc1ZpZGVvTXV0ZSkge1xuXHRcdFx0XHRcdFx0X211dGVWaWRlbygpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHBjLmFkZFN0cmVhbShzZW50U3RyZWFtKTtcblxuXHRcdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbG9jYWxTdHJlYW1zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjp3ZWJydGM6Ol9pbml0bG9jYWxTdHJlYW0pc3RhY2tJZD0ke3N0YWNrSWR9IHJlbmRlcmluZyBsb2NhbCBBdWRpb1ZpZGVvIHRvICR7bG9jYWxTdHJlYW1zW2ldLmlkfWApO1xuXHRcdFx0XHRcdFx0YXR0YWNoTWVkaWFTdHJlYW0obG9jYWxTdHJlYW1zW2ldLCBsb2NhbHN0cmVhbS5nZXRBdWRpb1ZpZGVvU3RyZWFtKCkpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChjYWxsYmFjayAmJiB0eXBlb2YgY2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdFx0XHR9XG5cblxuXHRcdFx0XHR9O1xuXHRcdFx0XHRpZiAobG9jYWxzdHJlYW0uZ2V0QXVkaW9WaWRlb1N0cmVhbSgpKSB7XG5cdFx0XHRcdFx0aW5pdGxvY2FsU3RyZWFtKCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bG9jYWxzdHJlYW0uYWRkQXVkaW9WaWRlb0xpc3RlbmVyKGluaXRsb2NhbFN0cmVhbSk7XG5cdFx0XHRcdFx0bG9jYWxzdHJlYW0uaW5pdEF1ZGlvVmlkZW8oKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLndhcm4oJyhSZWFjaFNESzo6d2VicnRjOjpfaW5pdGxvY2FsU3RyZWFtKW5vIGFjdGlvblR5cGUgc3BlY2lmaWVkJyk7XG5cdFx0fVxuXG5cdH1cblxuXHQvKipcblx0ICogUHJlcGFyZXMgdGhlIFNEUCBjYWxsYmFja3MuXG5cdCAqIFJlbW90ZSBkZXNjcmlwdGlvbiB3aWxsIGJ5IGRlZmluZWQgZm9yIHRoZSBwZWVyIGNvbm5lY3Rpb24gYW5kIGNhbGxiYWNrcyBhcmUgZGVmaW5lZCBmb3IgU0RQIGFuc3dzZXIgYW5kIHJlc3BvbnNlIG1hbmFnZW1lbnQuXG5cdCAqIElmIHRoZXJlIGlzIG5vIHB1Ymxpc2hpbmcsIGxvY2FsIGRlc2NyaXB0aW9uIHdpbGwgYmUgZGVmaW5lZC5cblx0ICovXG5cdGZ1bmN0aW9uIF9pbml0U2RwQ2FsbGJhY2tzKCkge1xuXHRcdGNvbnNvbGUuZGVidWcoYChSZWFjaFNESzo6d2VicnRjOjpfaW5pdFNkcENhbGxiYWNrcylzdGFja0lkPSR7c3RhY2tJZH1gKTtcblx0XHRpZiAoaXNQdWJsaXNoKSB7XG5cdFx0XHRpZiAoc2RwT2ZmZXJDYikge1xuXHRcdFx0XHRyZW1vdGVEYXRhUmVmLm9mZignY2hpbGRfYWRkZWQnLCBzZHBPZmZlckNiKTtcblx0XHRcdH1cblx0XHRcdHNkcEFuc3dlckNiID0gKHNuYXBzaG90KSA9PiB7XG5cdFx0XHRcdGlmICghaXNDbG9zZWQgJiYgc25hcHNob3QubmFtZSgpID09PSAnc2RwQW5zd2VyJykge1xuXHRcdFx0XHRcdGNvbnN0IGRhdGEgPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdFx0XHRjb25zb2xlLmRlYnVnKGAoUmVhY2hTREs6OndlYnJ0Yzo6c2RwQW5zd2VyQ2Ipc3RhY2tJZD0ke3N0YWNrSWR9LXJlY2VpdmVkIHNkcEFuc3dlcjogJHtKU09OLnN0cmluZ2lmeShkYXRhKX1gKTtcblx0XHRcdFx0XHRwYy5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgbXlSVENTZXNzaW9uRGVzY3JpcHRpb24oZGF0YSksICgpID0+IHtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZGVidWcoYChSZWFjaFNESzo6d2VicnRjOjpzZHBBbnN3ZXJDYilzdGFja0lkPSR7c3RhY2tJZH0tcmVtb3RlIGRlc2NyaXB0aW9uIHNldGApO1xuXHRcdFx0XHRcdFx0Ly8gcmVtb3ZlIHNkcEFuc3dlciBmcm9tIHdlYmNvbVxuXHRcdFx0XHRcdFx0Ly9zbmFwc2hvdC5yZWYoKS5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdHN0YXJ0TGlzdGVuaW5nVG9SZW1vdGVJY2VDYW5kaWRhdGUoKTtcblx0XHRcdFx0XHR9LCBvbkVycm9yKTtcblx0XHRcdFx0XHRyZW1vdGVEYXRhUmVmLm9mZignY2hpbGRfYWRkZWQnLCBzZHBBbnN3ZXJDYik7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRyZW1vdGVEYXRhUmVmLm9uKCdjaGlsZF9hZGRlZCcsIHNkcEFuc3dlckNiKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKHNkcEFuc3dlckNiKSB7XG5cdFx0XHRcdHJlbW90ZURhdGFSZWYub2ZmKCdjaGlsZF9hZGRlZCcsIHNkcEFuc3dlckNiKTtcblx0XHRcdH1cblx0XHRcdHNkcE9mZmVyQ2IgPSBmdW5jdGlvbiAoc25hcHNob3QpIHtcblx0XHRcdFx0aWYgKCFpc0Nsb3NlZCAmJiBzbmFwc2hvdC5uYW1lKCkgPT09ICdzZHBPZmZlcicpIHtcblx0XHRcdFx0XHRjb25zdCBkYXRhID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcdFx0Y29uc29sZS5kZWJ1ZyhgKFJlYWNoU0RLOjp3ZWJydGM6OnNkcE9mZmVyQ2Ipc3RhY2tJZD0ke3N0YWNrSWR9LXJlY2VpdmVkIHNkcE9mZmVyOiAke0pTT04uc3RyaW5naWZ5KGRhdGEpfWApO1xuXHRcdFx0XHRcdHBjLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBteVJUQ1Nlc3Npb25EZXNjcmlwdGlvbihkYXRhKSwgKCkgPT4ge1xuXHRcdFx0XHRcdFx0cGMuY3JlYXRlQW5zd2VyKChkZXNjcmlwdGlvbikgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjp3ZWJydGM6OnNkcE9mZmVyQ2Ipc3RhY2tJZD0ke3N0YWNrSWR9LXNlbmRpbmcgYW5zd2VyYCk7XG5cdFx0XHRcdFx0XHRcdHBjLnNldExvY2FsRGVzY3JpcHRpb24oZGVzY3JpcHRpb24sICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmRlYnVnKGAoUmVhY2hTREs6OndlYnJ0Yzo6c2RwT2ZmZXJDYilzdGFja0lkPSR7c3RhY2tJZH0tc2V0IHNkcEFuc3dlciBpbiBiYXNlIDogJHtKU09OLnN0cmluZ2lmeShkZXNjcmlwdGlvbil9YCk7XG5cdFx0XHRcdFx0XHRcdFx0bG9jYWxEYXRhUmVmLmNoaWxkKCdzZHBBbnN3ZXInKS5zZXQoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkZXNjcmlwdGlvbikpKTsgLy8gZGVjb2RpbmcvZW5jb2RpbmcgYmVjYXVzZSBvZiBGaXJlZm94IGJ1Z1xuXHRcdFx0XHRcdFx0XHRcdC8vIHJlbW92ZSBzZHBPZmZlciBmcm9tIHdlYmNvbVxuXHRcdFx0XHRcdFx0XHRcdC8vc25hcHNob3QucmVmKCkucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHRcdFx0c3RhcnRMaXN0ZW5pbmdUb1JlbW90ZUljZUNhbmRpZGF0ZSgpO1xuXHRcdFx0XHRcdFx0XHR9LCBvbkVycm9yKTtcblx0XHRcdFx0XHRcdH0sIG9uRXJyb3IsIHN1YnNjcmliZXJNZWRpYUNvbnN0cmFpbnRzKTtcblx0XHRcdFx0XHR9LCBvbkVycm9yKTtcblx0XHRcdFx0XHRyZW1vdGVEYXRhUmVmLm9mZignY2hpbGRfYWRkZWQnLCBzZHBPZmZlckNiKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdHJlbW90ZURhdGFSZWYub24oJ2NoaWxkX2FkZGVkJywgc2RwT2ZmZXJDYik7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIENsb3NlcyB0aGUgU0RQIGNhbGxiYWNrcyBieSBkaXNhYmxpbmcgY2FsbGJhY2tzIGZvciB0aGUgXCJjaGlsZF9hZGRlZFwiIGV2ZW50IGFuZCBieSBkZWZpbmluZyB0aGVtIHRvIG51bGwuXG5cdCAqL1xuXHRmdW5jdGlvbiBfY2xvc2VTZHBDYWxsYmFja3MoKSB7XG5cdFx0aWYgKHNkcEFuc3dlckNiKSB7XG5cdFx0XHRyZW1vdGVEYXRhUmVmLm9mZignY2hpbGRfYWRkZWQnLCBzZHBBbnN3ZXJDYik7XG5cdFx0XHRzZHBBbnN3ZXJDYiA9IG51bGw7XG5cdFx0fVxuXHRcdGlmIChzZHBPZmZlckNiKSB7XG5cdFx0XHRyZW1vdGVEYXRhUmVmLm9mZignY2hpbGRfYWRkZWQnLCBzZHBPZmZlckNiKTtcblx0XHRcdHNkcE9mZmVyQ2IgPSBudWxsO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBTZW5kcyBhbiBTRFAgb2ZmZXIgdGhyb3VnaCB0aGUgcGVlciBjb25uZWN0aW9uLlxuXHQgKiBBbiBTRFAgb2ZmZXIgaXMgY3JlYXRlZCwgd2l0aCBhIGxvY2FsIGRlc2NyaXB0aW9uLCBhbmQgaXMgc2VudC5cblx0ICogVGhlIGRlc2NyaXB0aW9uIGlzIGJvdGggZGVjb2RlZCBhbmQgZW5jb2RlZCBiZWNhdXNlIG9mIEZpcmVmb3ggYnVncy5cblx0ICovXG5cdGZ1bmN0aW9uIHNlbmRPZmZlcigpIHtcblx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHQvLyBwdWJsaWUgbCdvZmZyZSBpbml0aWFsZVxuXHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdGNvbnNvbGUubG9nKGAod2VicnRjOjpzZW5kT2ZmZXIpc3RhY2tpZD0ke3N0YWNrSWR9LWNyZWF0aW5nIHNkcE9mZmVyYCk7XG5cdFx0cGMuY3JlYXRlT2ZmZXIoKGRlc2NyaXB0aW9uKSA9PiB7XG5cdFx0XHRwYy5zZXRMb2NhbERlc2NyaXB0aW9uKGRlc2NyaXB0aW9uLCAoKSA9PiB7XG5cdFx0XHRcdGNvbnNvbGUuZGVidWcoYChSZWFjaFNESzo6d2VicnRjOjpjcmVhdGVPZmZlcilzdGFja0lkPSR7c3RhY2tJZH0tc2V0IHNkcE9mZmVyIGluIGJhc2UgOiAke0pTT04uc3RyaW5naWZ5KGRlc2NyaXB0aW9uKX1gKTtcblx0XHRcdFx0bG9jYWxEYXRhUmVmLmNoaWxkKCdzZHBPZmZlcicpLnNldChKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRlc2NyaXB0aW9uKSkpOyAvLyBkZWNvZGluZy9lbmNvZGluZyBiZWNhdXNlIG9mIEZpcmVmb3ggYnVnXG5cdFx0XHR9LCBvbkVycm9yKTtcblx0XHR9LCBvbkVycm9yLCBwdWJsaXNoZXJNZWRpYUNvbnN0cmFpbnRzKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDbG9zZXMgdGhlIGNvbm5lY3Rpb24gYW5kIHRyaWdnZXJzIHRoZSBjYWxsYmFjayB3aGVuIHRoZSBvcGVyYXRpb24gaXMgZG9uZVxuXHQgKiBAcGFyYW0gY2FsbGJhY2tcblx0ICovXG5cdGZ1bmN0aW9uIF9jbG9zZShjYWxsYmFjaykge1xuXG5cdFx0aWYgKCFjbG9zZUluUHJvZ3Jlc3MgJiYgIWlzQ2xvc2VkKSB7XG5cdFx0XHRjbG9zZUluUHJvZ3Jlc3MgPSB0cnVlO1xuXHRcdFx0b25DbG9zZUNiMiA9IGNhbGxiYWNrO1xuXHRcdFx0Y29uc29sZS5kZWJ1ZyhgKFJlYWNoU0RLOjp3ZWJydGM6Ol9jbG9zZSlzdGFja0lkPSR7c3RhY2tJZH0tY2xvc2luZyB3ZWJydGMgc3RhY2tgKTtcblx0XHRcdGlmIChwYykge1xuXHRcdFx0XHRwYy5jbG9zZSgpO1xuXG5cdFx0XHR9XG5cblx0XHRcdC8vIHJlbW92ZSB3ZWJjb20gY2FsbGJhY2tzXG5cdFx0XHRpZiAocmVtb3RlZGF0YXJlZkNiKSB7XG5cdFx0XHRcdHJlbW90ZURhdGFSZWYub2ZmKCdjaGlsZF9hZGRlZCcsIHJlbW90ZWRhdGFyZWZDYik7XG5cdFx0XHRcdHJlbW90ZWRhdGFyZWZDYiA9IG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChpY2VDYW5kaWRhdGVzTGlzdENiKSB7XG5cdFx0XHRcdHN0b3BMaXN0ZW5pbmdUb1JlbW90ZUljZUNhbmRpZGF0ZSgpO1xuXHRcdFx0XHRpY2VDYW5kaWRhdGVzTGlzdENiID0gbnVsbDtcblx0XHRcdH1cblx0XHRcdF9jbG9zZVNkcENhbGxiYWNrcygpO1xuXG5cdFx0XHQvLyByZW1vdmUgd2ViY29tIGRhdGFcbi8vXHRcdFx0bG9jYWxEYXRhUmVmLnBhcmVudCgpLm9uRGlzY29ubmVjdCgpLmNhbmNlbCgpO1xuLy9cdFx0XHRsb2NhbERhdGFSZWYucGFyZW50KCkub25EaXNjb25uZWN0KCkucmVtb3ZlKCk7XG5cdFx0XHQvL3JlbW90ZURhdGFSZWYucmVtb3ZlKCk7XG5cblx0XHRcdC8vIHN0b3AgdmlkZW9cblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbG9jYWxTdHJlYW1zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmIChsb2NhbFN0cmVhbXNbaV0pIHtcblx0XHRcdFx0XHQvL2xvY2FsU3RyZWFtc1tpXS5zcmM9XCJcIjsgbm90IHN1cHBvcnRlZCBieSBGaXJlZm94XG5cdFx0XHRcdFx0ZGV0YWNoTWVkaWFTdHJlYW0obG9jYWxTdHJlYW1zW2ldKTtcblx0XHRcdFx0XHQvL2xvY2FsU3RyZWFtc1tpXS5yZW1vdmVBdHRyaWJ1dGUoXCJzcmNcIik7XG5cdFx0XHRcdFx0Y29uc29sZS5kZWJ1ZyhgKFJlYWNoU0RLOjp3ZWJydGM6Ol9jbG9zZSlzdGFja0lkPSR7c3RhY2tJZH0tc3RvcHBpbmcgbG9jYWwgdmlkZW8gdG8gJHtsb2NhbFN0cmVhbXNbaV0uaWR9YCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGZvciAobGV0IGogPSAwOyBqIDwgcmVtb3RlU3RyZWFtcy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRpZiAocmVtb3RlU3RyZWFtc1tqXSkge1xuXHRcdFx0XHRcdC8vcmVtb3RlU3RyZWFtc1tqXS5zcmM9XCJcIjsgbm90IHN1cHBvcnRlZCBieSBGaXJlZm94XG5cdFx0XHRcdFx0ZGV0YWNoTWVkaWFTdHJlYW0ocmVtb3RlU3RyZWFtc1tqXSk7XG5cdFx0XHRcdFx0Ly9yZW1vdGVTdHJlYW1zW2pdLnJlbW92ZUF0dHJpYnV0ZShcInNyY1wiKTtcblx0XHRcdFx0XHRjb25zb2xlLmRlYnVnKGAoUmVhY2hTREs6OndlYnJ0Yzo6X2Nsb3NlKXN0YWNrSWQ9JHtzdGFja0lkfS1zdG9wcGluZyByZW1vdGUgdmlkIHRvICR7cmVtb3RlU3RyZWFtc1tqXS5pZH1gKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cblx0XHRcdGlzQ2xvc2VkID0gdHJ1ZTtcblx0XHRcdGNvbnNvbGUuZGVidWcoYChSZWFjaFNESzo6d2VicnRjOjpfY2xvc2Upc3RhY2tJZD0ke3N0YWNrSWR9LWNsb3Npbmcgd2VicnRjIHN0YWNrIC0+IHdhaXRpbmcgZm9yIElDRV9DT05ORUNUSU9OX1NUQVRFX0RJU0NPTk5FQ1RFRGApO1xuXHRcdFx0aWYgKGlzQ2xvc2VkICYmIChpY2VDb25uZWN0aW9uU3RhdGUgPT09IElDRV9DT05ORUNUSU9OX1NUQVRFX0RJU0NPTk5FQ1RFRCB8fCBpY2VDb25uZWN0aW9uU3RhdGUgPT09IElDRV9DT05ORUNUSU9OX1NUQVRFX0NMT1NFRCB8fCBpY2VDb25uZWN0aW9uU3RhdGUgPT09IElDRV9DT05ORUNUSU9OX1NUQVRFX0ZBSUxFRCkpIHtcblx0XHRcdFx0Y29uc29sZS5kZWJ1ZyhgKFJlYWNoU0RLOjp3ZWJydGM6Ol9jbG9zZSlzdGFja0lkPSR7c3RhY2tJZH0tY2xvc2VkIHdlYnJ0YyBzdGFjayBjb21wbGV0ZWApO1xuXHRcdFx0XHRwYyA9IG51bGw7XG5cdFx0XHRcdGNsb3NlSW5Qcm9ncmVzcyA9IGZhbHNlO1xuXHRcdFx0XHR3ZWJydGNtbmdyLmNsZWFyV2VicnRjU3RhY2tzKHdlYnJ0Y1N0YWNrSWQpO1xuXHRcdFx0XHRpZiAob25DbG9zZUNiMiAmJiB0eXBlb2Ygb25DbG9zZUNiMiA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0b25DbG9zZUNiMigpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnNvbGUuZGVidWcoYChSZWFjaFNESzo6d2VicnRjOjpfY2xvc2Upc3RhY2tJZD0ke3N0YWNrSWR9LWNsb3Npbmcgd2VicnRjIHN0YWNrIGFscmVhZHkgaW4gcHJvZ3Jlc3NgKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBfY29ubmVjdExvY2FsU3RyZWFtKHZpZGVvRWx0LCBnZXRTdHJlYW1DYikge1xuXHRcdGlmIChhY3Rpb25UeXBlKSB7XG5cdFx0XHRpZiAoYWN0aW9uVHlwZSA9PT0gYWN0aW9ucy5BQ1RJT05fVFlQRV9WSURFTykge1xuXHRcdFx0XHRsb2NhbHN0cmVhbS5jb25uZWN0TG9jYWxWaWRlb1N0cmVhbSh2aWRlb0VsdCwgZ2V0U3RyZWFtQ2IpO1xuXHRcdFx0fSBlbHNlIGlmIChhY3Rpb25UeXBlID09PSBhY3Rpb25zLkFDVElPTl9UWVBFX0FVRElPKSB7XG5cdFx0XHRcdGxvY2Fsc3RyZWFtLmNvbm5lY3RMb2NhbEF1ZGlvU3RyZWFtKHZpZGVvRWx0LCBnZXRTdHJlYW1DYik7XG5cdFx0XHR9IGVsc2UgaWYgKGFjdGlvblR5cGUgPT09IGFjdGlvbnMuQUNUSU9OX1RZUEVfQVVESU9fVklERU8pIHtcblx0XHRcdFx0bG9jYWxzdHJlYW0uY29ubmVjdExvY2FsQXVkaW9WaWRlb1N0cmVhbSh2aWRlb0VsdCwgZ2V0U3RyZWFtQ2IpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIF9jb25uZWN0UmVtb3RlU3RyZWFtKHZpZGVvRWx0LCBnZXRTdHJlYW1DYikge1xuXHRcdGlmICh2aWRlb0VsdCkge1xuXHRcdFx0aWYgKHJlY2VpdmVkU3RyZWFtKSB7XG5cdFx0XHRcdGF0dGFjaE1lZGlhU3RyZWFtKHZpZGVvRWx0LCByZWNlaXZlZFN0cmVhbSk7XG5cdFx0XHRcdGlmIChnZXRTdHJlYW1DYiAmJiB0eXBlb2YgZ2V0U3RyZWFtQ2IgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdGdldFN0cmVhbUNiKHJlY2VpdmVkU3RyZWFtKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVtb3RlU3RyZWFtcy5wdXNoKHZpZGVvRWx0KTtcblx0XHRcdFx0aWYgKGdldFN0cmVhbUNiICYmIHR5cGVvZiBnZXRTdHJlYW1DYiA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0cmVtb3RlU3RyZWFtc0NiLnB1c2goZ2V0U3RyZWFtQ2IpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmIChyZWNlaXZlZFN0cmVhbSkge1xuXHRcdFx0XHRpZiAoZ2V0U3RyZWFtQ2IgJiYgdHlwZW9mIGdldFN0cmVhbUNiID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRnZXRTdHJlYW1DYihyZWNlaXZlZFN0cmVhbSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmIChnZXRTdHJlYW1DYiAmJiB0eXBlb2YgZ2V0U3RyZWFtQ2IgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdHJlbW90ZVN0cmVhbXNDYi5wdXNoKGdldFN0cmVhbUNiKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0fVxuXHR9XG5cblxuXHQvKipcblx0ICogSW5pdGlhbGl6ZXMgdGhlIHBlZXIgY29ubmVjdGlvblxuXHQgKi9cblx0ZnVuY3Rpb24gaW5pdF9wYygpIHtcblx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjp3ZWJydGM6OmluaXRfcGMpc3RhY2tJZD0ke3N0YWNrSWR9X2NvbmZpZz1gLCBKU09OLnN0cmluZ2lmeShjb25maWcpKTtcblx0XHQvLyBUT0RPIHRlc3QgaXMgY29uZmlnIGlzIG1hbGZvcm1hdGVkIG9yIGVtcHR5XG5cdFx0cGMgPSBuZXcgbXlQZWVyQ29ubmVjdGlvbihjb25maWcsIG9wdGlvbmFsKTtcblxuXG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0Ly8gUmVjZWl2ZWQgSWNlIGNhbmRpZGF0ZSBmcm9tIHRoZSBzdGFjazogc2VuZCBpdCB0byB0aGUgcGVlclxuXHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdHBjLm9uaWNlY2FuZGlkYXRlID0gZnVuY3Rpb24gKGUpIHtcblx0XHRcdGlmIChlLmNhbmRpZGF0ZSkge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjp3ZWJydGM6OnBjLm9uaWNlY2FuZGlkYXRlKXN0YWNrSWQ9JHtzdGFja0lkfSBzZW5kIGljZSBjYW5kaWRhdGU9JHtKU09OLnN0cmluZ2lmeShlLmNhbmRpZGF0ZSl9YCk7XG5cdFx0XHRcdGxvY2FsRGF0YVJlZi5jaGlsZCgnaWNlQ2FuZGlkYXRlc0xpc3QnKS5wdXNoKHtcblx0XHRcdFx0XHRsYWJlbDogZS5jYW5kaWRhdGUuc2RwTUxpbmVJbmRleCxcblx0XHRcdFx0XHRpZDogZS5jYW5kaWRhdGUuc2RwTWlkLFxuXHRcdFx0XHRcdGNhbmRpZGF0ZTogZS5jYW5kaWRhdGUuY2FuZGlkYXRlXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHQvLyBSZWNlaXZlZCBhIHJlbW90ZSBzdHJlYW0gZnJvbSB0aGUgc3RhY2s6IHBsYXkgaXQgb24gdGhlIHZpZGVvIHBsYXllclxuXHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdHBjLm9uYWRkc3RyZWFtID0gZnVuY3Rpb24gKGUpIHtcblx0XHRcdGNvbnNvbGUuZGVidWcoYChSZWFjaFNESzo6d2VicnRjOjpvbmFkZHN0cmVhbSlzdGFja0lkPSR7c3RhY2tJZH0tc3RyZWFtOiR7SlNPTi5zdHJpbmdpZnkoZS5zdHJlYW0pfWApO1xuXHRcdFx0aWYgKGUgJiYgZS5zdHJlYW0pIHtcblx0XHRcdFx0cmVjZWl2ZWRTdHJlYW0gPSBlLnN0cmVhbTtcblx0XHRcdFx0aWYgKGlzQXVkaW9NdXRlKSB7XG5cdFx0XHRcdFx0X211dGVBdWRpbygpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChpc1ZpZGVvTXV0ZSkge1xuXHRcdFx0XHRcdF9tdXRlVmlkZW8oKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuLy8gICAgICAgICAgICBfcmVtb3RlU3RyZWFtID0gZS5zdHJlYW07XG4vL1xuLy9cdFx0XHRmb3IgKHZhciBpPTA7aTxyZW1vdGVTdHJlYW1zLmxlbmd0aDtpKyspIHtcbi8vXHRcdFx0ICAgIGlmIChyZW1vdGVTdHJlYW1zW2ldKSB7XG4vL1x0XHRcdCAgICBcdCAgY29uc29sZS5kZWJ1ZyhcIihSZWFjaFNESzo6d2VicnRjOjpvbmFkZHN0cmVhbSlwYy5vbmFkZHN0cmVhbSBzdGFja0lkPVwiK3N0YWNrSWQgKyBcIi1cIiArXCJyZW5kZXJpbmcgcmVtb3RlIHZpZCB0byBcIityZW1vdGVTdHJlYW1zW2ldLmlkKTtcbi8vXHRcdFx0ICAgIFx0ICBhdHRhY2hNZWRpYVN0cmVhbSggcmVtb3RlU3RyZWFtc1tpXSxfcmVtb3RlU3RyZWFtKTtcbi8vXHRcdFx0ICAgIH1cbi8vXHRcdFx0fVxuXHRcdH07XG5cblx0XHRwYy5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZSA9ICgpID0+IHtcblxuXHRcdFx0aWYgKCEhcGMgJiYgcGMuaWNlQ29ubmVjdGlvblN0YXRlID09PSBJQ0VfQ09OTkVDVElPTl9TVEFURV9DSEVDS0lORykge1xuXHRcdFx0XHRjb25zb2xlLmRlYnVnKGAoUmVhY2hTREs6OndlYnJ0Yzo6b25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2Upc3RhY2tJZD0ke3N0YWNrSWR9LWNoZWNraW5nYCk7XG5cdFx0XHRcdGljZUNvbm5lY3Rpb25TdGF0ZSA9IElDRV9DT05ORUNUSU9OX1NUQVRFX0NIRUNLSU5HO1xuXHRcdFx0fSBlbHNlIGlmICghIXBjICYmIHBjLmljZUNvbm5lY3Rpb25TdGF0ZSA9PT0gSUNFX0NPTk5FQ1RJT05fU1RBVEVfQ09OTkVDVEVEKSB7XG5cdFx0XHRcdGljZUNvbm5lY3Rpb25TdGF0ZSA9IElDRV9DT05ORUNUSU9OX1NUQVRFX0NPTk5FQ1RFRDtcblx0XHRcdFx0Y29uc29sZS5kZWJ1ZyhgKFJlYWNoU0RLOjp3ZWJydGM6Om9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlKXN0YWNrSWQ9JHtzdGFja0lkfS1jb25uZWN0ZWRgKTtcblx0XHRcdFx0aWYgKHJlY2VpdmVkU3RyZWFtKSB7XG5cdFx0XHRcdFx0cmVtb3RlU3RyZWFtcy5mb3JFYWNoKChyZW1vdGVTdHJlYW0pID0+IHtcblx0XHRcdFx0XHRcdGlmKHJlbW90ZVN0cmVhbSkge1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmRlYnVnKGAoUmVhY2hTREs6OndlYnJ0Yzo6b25hZGRzdHJlYW0pcGMub25hZGRzdHJlYW0gc3RhY2tJZD0ke3N0YWNrSWR9LXJlbmRlcmluZyByZW1vdGUgdmlkIHRvICR7cmVtb3RlU3RyZWFtLmlkfWApO1xuXHRcdFx0XHRcdFx0XHRhdHRhY2hNZWRpYVN0cmVhbShyZW1vdGVTdHJlYW0sIHJlY2VpdmVkU3RyZWFtKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRyZW1vdGVTdHJlYW1zQ2IuZm9yRWFjaCgocmVtb3RlU3RyZWFtQ2IpID0+IHtcblx0XHRcdFx0XHRcdGlmKHJlbW90ZVN0cmVhbUNiKSB7XG5cdFx0XHRcdFx0XHRcdHJlbW90ZVN0cmVhbUNiKHJlY2VpdmVkU3RyZWFtKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRyZW1vdGVTdHJlYW1zQ2IgPSBbXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzdG9wTGlzdGVuaW5nVG9SZW1vdGVJY2VDYW5kaWRhdGUoKTtcblx0XHRcdH0gZWxzZSBpZiAoISFwYyAmJiBwYy5pY2VDb25uZWN0aW9uU3RhdGUgPT09IElDRV9DT05ORUNUSU9OX1NUQVRFX0NPTVBMRVRFRCkge1xuXHRcdFx0XHRpY2VDb25uZWN0aW9uU3RhdGUgPSBJQ0VfQ09OTkVDVElPTl9TVEFURV9DT01QTEVURUQ7XG5cdFx0XHRcdGNvbnNvbGUuZGVidWcoYChSZWFjaFNESzo6d2VicnRjOjpvbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZSlzdGFja0lkPSR7c3RhY2tJZH0tJHtJQ0VfQ09OTkVDVElPTl9TVEFURV9DT01QTEVURUR9YCk7XG5cdFx0XHRcdHN0b3BMaXN0ZW5pbmdUb1JlbW90ZUljZUNhbmRpZGF0ZSgpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCEhcGMgJiYgcGMuaWNlQ29ubmVjdGlvblN0YXRlID09PSBJQ0VfQ09OTkVDVElPTl9TVEFURV9ESVNDT05ORUNURUQpIHtcblx0XHRcdFx0aWNlQ29ubmVjdGlvblN0YXRlID0gSUNFX0NPTk5FQ1RJT05fU1RBVEVfRElTQ09OTkVDVEVEO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjp3ZWJydGM6Om9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlKXN0YWNrSWQ9JHtzdGFja0lkfS1yZW1vdGUgZGlzY29ubmVjdGlvbiwgY2xvc2luZyBwZWVyIGNvbm5lY3Rpb25gKTtcblx0XHRcdFx0X2Nsb3NlKCk7XG5cdFx0XHR9IGVsc2UgaWYgKCEhcGMgJiYgcGMuaWNlQ29ubmVjdGlvblN0YXRlID09PSBJQ0VfQ09OTkVDVElPTl9TVEFURV9DTE9TRUQpIHtcblx0XHRcdFx0Y29uc29sZS5kZWJ1ZyhgKFJlYWNoU0RLOjp3ZWJydGM6Om9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlKXN0YWNrSWQ9JHtzdGFja0lkfS1jbG9zZWRgKTtcblx0XHRcdFx0aWNlQ29ubmVjdGlvblN0YXRlID0gSUNFX0NPTk5FQ1RJT05fU1RBVEVfQ0xPU0VEO1xuXHRcdFx0XHRfY2xvc2UoKTtcblx0XHRcdH0gZWxzZSBpZiAoISFwYyAmJiBwYy5pY2VDb25uZWN0aW9uU3RhdGUgPT09IElDRV9DT05ORUNUSU9OX1NUQVRFX0ZBSUxFRCkge1xuXHRcdFx0XHRjb25zb2xlLmRlYnVnKGAoUmVhY2hTREs6OndlYnJ0Yzo6b25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2Upc3RhY2tJZD0ke3N0YWNrSWR9LWZhaWxlZGApO1xuXHRcdFx0XHRpY2VDb25uZWN0aW9uU3RhdGUgPSBJQ0VfQ09OTkVDVElPTl9TVEFURV9GQUlMRUQ7XG5cdFx0XHRcdF9jbG9zZSgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKHBjKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5kZWJ1ZyhgKFJlYWNoU0RLOjp3ZWJydGM6Om9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlKXN0YWNrSWQ9JHtzdGFja0lkfS0ke3BjLmljZUNvbm5lY3Rpb25TdGF0ZX1gKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb25zb2xlLmRlYnVnKGAoUmVhY2hTREs6OndlYnJ0Yzo6b25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2Upc3RhY2tJZD0ke3N0YWNrSWR9LXBjID0gbnVsbGApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWNlQ29ubmVjdGlvblN0YXRlID0gSUNFX0NPTk5FQ1RJT05fU1RBVEVfT1RIRVI7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChpc0Nsb3NlZCAmJiAoaWNlQ29ubmVjdGlvblN0YXRlID09PSBJQ0VfQ09OTkVDVElPTl9TVEFURV9ESVNDT05ORUNURUQgfHwgaWNlQ29ubmVjdGlvblN0YXRlID09PSBJQ0VfQ09OTkVDVElPTl9TVEFURV9DTE9TRUQgfHwgaWNlQ29ubmVjdGlvblN0YXRlID09PSBJQ0VfQ09OTkVDVElPTl9TVEFURV9GQUlMRUQpKSB7XG5cdFx0XHRcdGNvbnNvbGUuZGVidWcoYChSZWFjaFNESzo6d2VicnRjOjpfY2xvc2Upc3RhY2tJZD0ke3N0YWNrSWR9LWNsb3NlZCB3ZWJydGMgc3RhY2sgY29tcGxldGVgKTtcblx0XHRcdFx0cGMgPSBudWxsO1xuXHRcdFx0XHRjbG9zZUluUHJvZ3Jlc3MgPSBmYWxzZTtcblx0XHRcdFx0d2VicnRjbW5nci5jbGVhcldlYnJ0Y1N0YWNrcyh3ZWJydGNTdGFja0lkKTtcblx0XHRcdFx0aWYgKG9uQ2xvc2VDYiAmJiB0eXBlb2Ygb25DbG9zZUNiID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRvbkNsb3NlQ2IoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAob25DbG9zZUNiMiAmJiB0eXBlb2Ygb25DbG9zZUNiMiA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0b25DbG9zZUNiMigpO1xuXHRcdFx0XHR9XG5cblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly8gc3Vic2NyaWJlIHRvIHJlbW90ZSBkYXRhXG5cdFx0aWNlQ2FuZGlkYXRlc0xpc3RDYiA9IChzbmFwc2hvdCkgPT4ge1xuXHRcdFx0Y29uc3Rcblx0XHRcdFx0ZGF0YSA9IHNuYXBzaG90LnZhbCgpLFxuXHRcdFx0XHRjYW5kaWRhdGUgPSBuZXcgbXlSVENJY2VDYW5kaWRhdGUoe1xuXHRcdFx0XHRcdHNkcE1MaW5lSW5kZXg6IGRhdGEubGFiZWwsXG5cdFx0XHRcdFx0Y2FuZGlkYXRlOiBkYXRhLmNhbmRpZGF0ZSxcblx0XHRcdFx0XHRzZHBNaWQ6IGRhdGEuaWRcblx0XHRcdFx0fSk7XG5cdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjp3ZWJydGM6OmljZUNhbmRpZGF0ZXNMaXN0Q2Ipc3RhY2tJZD0ke3N0YWNrSWR9cmVjZWl2ZWQgaWNlIGNhbmRpZGF0ZT0ke0pTT04uc3RyaW5naWZ5KGNhbmRpZGF0ZSl9YCk7XG5cblx0XHRcdHBjLmFkZEljZUNhbmRpZGF0ZShjYW5kaWRhdGUpO1xuXHRcdFx0Ly8gcmVtb3ZlIGNhbmRpZGF0ZSBmcm9tIHdlYmNvbVxuXHRcdFx0Ly9zbmFwc2hvdC5yZWYoKS5yZW1vdmUoKTtcblx0XHR9O1xuXG5cdFx0aWYgKGlzUHVibGlzaCkge1xuXHRcdFx0X2luaXRsb2NhbFN0cmVhbSgoKSA9PiB7XG5cdFx0XHRcdF9pbml0U2RwQ2FsbGJhY2tzKCk7XG5cdFx0XHRcdHNlbmRPZmZlcigpO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdF9pbml0U2RwQ2FsbGJhY2tzKCk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEluaXRpYWxpemVzIHRoZSBvYmplY3Rcblx0ICovXG5cdCgoKSA9PiB7XG5cdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6d2VicnRjOjppbml0KXN0YWNrSWQ9JHtzdGFja0lkfWApO1xuXHRcdC8vIHBlZXJjb25uZWN0aW9uXG5cdFx0aWYgKHR5cGVvZihSVENQZWVyQ29ubmVjdGlvbikgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdG15UGVlckNvbm5lY3Rpb24gPSBSVENQZWVyQ29ubmVjdGlvbjtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKGAoUmVhY2hTREs6OndlYnJ0Yzo6aW5pdClzdGFja0lkPSR7c3RhY2tJZH0gZXJyb3I9V2VicnRjIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBicm93c2VyICFgKTtcblx0XHRcdHRocm93IG5ldyBFcnJvcignV2VicnRjIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBicm93c2VyICEnKTtcblx0XHR9XG5cblx0XHRpZiAodHlwZW9mKFJUQ1Nlc3Npb25EZXNjcmlwdGlvbikgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdG15UlRDU2Vzc2lvbkRlc2NyaXB0aW9uID0gUlRDU2Vzc2lvbkRlc2NyaXB0aW9uO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoYChSZWFjaFNESzo6d2VicnRjOjppbml0KXN0YWNrSWQ9JHtzdGFja0lkfSBlcnJvcjI9V2VicnRjIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBicm93c2VyICFgKTtcblx0XHRcdHRocm93IG5ldyBFcnJvcignV2VicnRjIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBicm93c2VyICEnKTtcblx0XHR9XG5cblx0XHRpZiAodHlwZW9mKFJUQ0ljZUNhbmRpZGF0ZSkgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdG15UlRDSWNlQ2FuZGlkYXRlID0gUlRDSWNlQ2FuZGlkYXRlO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoYChSZWFjaFNESzo6d2VicnRjOjppbml0KXN0YWNrSWQ9JHtzdGFja0lkfSBlcnJvcjM9V2VicnRjIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBicm93c2VyICFgKTtcblx0XHRcdHRocm93IG5ldyBFcnJvcignV2VicnRjIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBicm93c2VyICEnKTtcblx0XHR9XG5cblx0XHRpZiAocF9tdXRlQXVkaW8pIHtcblx0XHRcdGlzQXVkaW9NdXRlID0gdHJ1ZTtcblx0XHR9XG5cdFx0aWYgKHBfbXV0ZVZpZGVvKSB7XG5cdFx0XHRpc1ZpZGVvTXV0ZSA9IHRydWU7XG5cdFx0fVxuXG5cdFx0Z2V0SWNlU2VydmVyc0NvbmZpZ0Zyb21TZXJ2ZXIoKF9jb25maWcpID0+IHtcblx0XHRcdGNvbmZpZyA9IF9jb25maWc7XG5cdFx0XHRjb25zb2xlLmxvZygnKFJlYWNoU0RLOjp3ZWJydGM6OikgdXNlIHNlcnZlciBjb25maWc9JywgSlNPTi5zdHJpbmdpZnkoY29uZmlnKSk7XG5cdFx0XHRpbml0X3BjKCk7XG5cdFx0fSwgKCkgPT4ge1xuXHRcdFx0aWYgKHR5cGVvZiBERUZBVUxUX0lDRV9DT05GSUcgIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdGNvbmZpZyA9IERFRkFVTFRfSUNFX0NPTkZJRztcblx0XHRcdFx0Y29uc29sZS5sb2coJyhSZWFjaFNESzo6d2VicnRjOjopIHVzZSBERUZBVUxUX0lDRV9DT05GSUcgY29uZmlnPScsIEpTT04uc3RyaW5naWZ5KGNvbmZpZykpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc29sZS5sb2coJyhSZWFjaFNESzo6d2VicnRjOjopIG5vIGljZSAgY29uZmlnJyk7XG5cdFx0XHR9XG5cdFx0XHRpbml0X3BjKCk7XG5cdFx0fSk7XG5cblx0fSkoKTtcblxuXHQvL2luaXQoKTtcblxuXHRyZXR1cm4ge1xuXG5cdFx0LyoqXG5cdFx0ICogRGVmaW5lcyB0aGUgY2FsbGJhY2sgdG8gdHJpZ2dlciBzbyBhcyB0byBjbG9zZSB0aGUgY29tbXVuaWNhdGlvblxuXHRcdCAqIEBwYXJhbSB7ZnVuY3Rpb259IGNiIC0gVGhlIGNhbGxiYWNrIHRvIHRyaWdnZXJcblx0XHQgKi9cblx0XHRzZXRPbkNsb3NlOiAoY2IpID0+IHtcblx0XHRcdG9uQ2xvc2VDYiA9IGNiO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogQ2xvc2VzIGEgY2FsbGJhY2tcblx0XHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYiAtIFRoZSBjYWxsYmFjayB0byBjbG9zZVxuXHRcdCAqL1xuXHRcdGNsb3NlOiAoY2IpID0+IHtcblx0XHRcdGNvbnNvbGUuZGVidWcoYChSZWFjaFNESzo6d2VicnRjOjpfY2xvc2Upc3RhY2tJZD0ke3N0YWNrSWR9LWNsb3NlIHJlcXVlc3RlZGApO1xuXHRcdFx0X2Nsb3NlKGNiKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogQ29ubmVjdCBhIGxvY2FsIHN0cmVhbSB0byBhbiBlbGVtZW50IGFjY29yZGluZyB0byB0aGUgYWN0aW9uIHR5cGUgaW4gdXNlIChBQ1RJT05fVFlQRV9WSURFTywgQUNUSU9OX1RZUEVfQVVESU8sIEFDVElPTl9UWVBFX0FVRElPX1ZJREVPKVxuXHRcdCAqIEBwYXJhbSB2aWRlb0VsdCAtIFRoZSB2aWRlbyBlbGVtZW50XG5cdFx0ICogQHBhcmFtIGdldFN0cmVhbUNiIC0gYSBjYWxsYmFjayBmdW5jdGlvbiB0byByZXRyaWV2ZSB0aGUgbWVkaWFzdHJlYW0gb2JqZWN0XG5cdFx0ICovXG5cdFx0Y29ubmVjdExvY2FsU3RyZWFtOiBfY29ubmVjdExvY2FsU3RyZWFtLFxuXHRcdC8qKlxuXHRcdCAqIENvbm5lY3QgYSByZW1vdGUgc3RyZWFtIHRvIGFuIGVsZW1lbnRcblx0XHQgKiBAcGFyYW0gdmlkZW9FbHQgLSBUaGUgdmlkZW8gZWxlbWVudFxuXHRcdCAqIEBwYXJhbSBnZXRTdHJlYW1DYiAtIGEgY2FsbGJhY2sgZnVuY3Rpb24gdG8gcmV0cmlldmUgdGhlIG1lZGlhc3RyZWFtIG9iamVjdFxuXHRcdCAqL1xuXHRcdGNvbm5lY3RSZW1vdGVTdHJlYW06IF9jb25uZWN0UmVtb3RlU3RyZWFtLFxuXHRcdC8qKlxuXHRcdCAqIG11dGUgQXVkaW9cblx0XHQgKi9cblx0XHRtdXRlQXVkaW86IF9tdXRlQXVkaW8sXG5cdFx0LyoqXG5cdFx0ICogdW5tdXRlIEF1ZGlvXG5cdFx0ICovXG5cdFx0dW5tdXRlQXVkaW86IF91bm11dGVBdWRpbyxcblx0XHQvKipcblx0XHQgKiBtdXRlIFZpZGVvXG5cdFx0ICovXG5cdFx0bXV0ZVZpZGVvOiBfbXV0ZVZpZGVvLFxuXHRcdC8qKlxuXHRcdCAqIHVubXV0ZSBWaWRlb1xuXHRcdCAqL1xuXHRcdHVubXV0ZVZpZGVvOiBfdW5tdXRlVmlkZW9cblx0fTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHdlYnJ0YztcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy93ZWJydGMuanNcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9